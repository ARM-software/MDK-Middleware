<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: USB Device Virtual COM Port</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dev_cdc_tutorial.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">USB Device Virtual COM Port </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Communication Device Class (CDC) is used for implementing virtual communication ports. This example demonstrates a bridge between a <b>Virtual COM Port</b> on the USB Host Computer and an UART port on the evaluation board.</p>
<p>The following picture shows an exemplary connection of the development board and the USB Host Computer.</p>
<div class="image">
<img src="cdc_dev_example_setup.png" alt=""/>
</div>
<p>The <b>Abstract.txt</b> file contained in the <b>Documentation</b> group of the <b>Project</b> window gives you more information on the general setup and the available I/O on the development board.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Build the "USB Device Virtual COM" Project</h1>
<p>Open the example project in MDK. The µVision <b>Project</b> window should display a similar project structure:</p>
<div class="image">
<img src="usb_cdc_example_proj_window.png" alt=""/>
<div class="caption">
Typical Project Structure of an USB VCOM Example</div></div>
<h2><a class="anchor" id="autotoc_md17"></a>
Source Files</h2>
<ul>
<li><b>VirtualCOM.c</b> contains the main C function that initializes the board hardware and the USB Device Component. Furthermore, it contains the code that exchanges the data internally between the USB and the UART port.</li>
<li>The <b>USBD_User_CDC_0.c</b> is an adapted code template that implements all necessary file access functions. Refer to <a class="el" href="group__usbd__cdcFunctions__acm.html">CDC: Communication Device Class (ACM)</a> for details about these template functions.</li>
</ul>
<p>If you are using RTOS other than CMSIS-RTOS2 RTX5 for your project please make sure to satisfy <a class="el" href="usb_resource_requirements.html#usbd_res_req">USB Device Resource Requirements</a>.</p>
<p>You may now build and download the example project to the evaluation board using the µVision commands:</p><ul>
<li><b>Project</b> --&gt; <b> Build target (F7) </b></li>
<li><b>Flash</b> &#160;&#160;--&gt; <b> Download (F8) </b></li>
</ul>
<p>After these steps, the project should start executing on your evaluation kit. In case of errors, refer to the Evaluation Board User's Guide for configuration information.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Using the "USB Device Virtual COM" Project</h1>
<h2><a class="anchor" id="autotoc_md19"></a>
Hardware Setup</h2>
<p>The setup of the Evaluation Board hardware is described in the <b>Abstract.txt</b> file.</p><ul>
<li>Verify all jumper settings on the target hardware.</li>
<li>Connect the UART on the development board to your PC (you might need an USB to serial RS232 adapter). Use an USB cable to connect your development board to the Host PC and power up your board.</li>
<li>The <b>Welcome to the Found New Hardware Wizard</b> appears. Installation of the driver is described in detail in the <b>Abstract.txt</b> file.</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
PC Software</h2>
<p>The USB Device Virtual COM example can be tested on a Windows PC using a terminal emulation program. Since Hyperterminal in not part of Windows any more, please download an appropriate program for this purpose (such as <b>PuTTY</b> for example). Open the two COM ports "COMx" and "COMy". Any data from "COMx" will be echoed on "COMy" and visa versa:</p>
<div class="image">
<img src="vcom_terminals.png" alt=""/>
</div>
<p><b>About Host PC driver for Microsoft Windows</b></p>
<p>The example folder contains two files relevant for driver installation on the Microsoft Windows:</p><ul>
<li>Driver setup information file (xxx-vcom.inf) which is used to create a digitally signed driver catalog file (xxx-vcom.cat)</li>
<li>Digitally signed driver catalog file (xxx-vcom.cat)</li>
</ul>
<p>The driver files are provided as an example, the driver setup information file should be adapted and digitally signed driver catalog file should be created from adapted driver setup information file.</p>
<p>Driver setup information file should be adapted in the following way:</p><ul>
<li><b>c251</b> in Vendor ID <b>VID_c251</b> entries should be changed to the vendor ID number assigned to your company by the USB organization (c251 Vendor ID is reserved for Keil Software and should not be used)</li>
<li><b>xxxx</b> in Product ID <b>PID_xxxx</b> entries should be changed to the product ID as assigned by your company</li>
<li>in <b>[DeviceList.xxx]</b> sections, entries not relevant for the device, should be removed or added as described below:<ul>
<li>if device is pure CDC class device (<b>not composite</b>) then all entries ending with <b>&amp;MI_xx should be removed</b></li>
<li>if device is a <b>composite device</b> with one or more CDC class instances then entries <b>not ending</b> with <b>&amp;MI_xx should be removed</b> and entries <b>ending</b> with <b>&amp;MI_xx should exist</b> for each CDC class instance (example driver contains entries ending with &amp;MI_00 and &amp;MI_02 which are used for composite device containing two CDC class instances and each instance uses 2 interfaces where MI_00 describes first CDC instance and MI_02 entry describes second CDC instance)</li>
</ul>
</li>
<li><b>[Strings]</b> section should be changed as desired</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Vendor ID and Product ID are configured in the USBD_Config_n.h configuration file of the embedded application. </dd>
<dd>
For producing digitally signed driver catalog file please refer to Microsoft Windows documentation. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
