<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: Core</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__usbd__coreFunctions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Content</a>  </div>
  <div class="headertitle"><div class="title">Core<div class="ingroups"><a class="el" href="group__usbd.html">USB Device</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Initialize and manage the USB Device Core statically and at run-time.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Content</h2></td></tr>
<tr class="memitem:group__usbd__coreFunctions__api"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__coreFunctions__api.html">User API</a></td></tr>
<tr class="memdesc:group__usbd__coreFunctions__api"><td class="mdescLeft">&#160;</td><td class="mdescRight">User API reference of the USB Device Core. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__usbd__coreFunctions__conf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__coreFunctions__conf.html">Configuration</a></td></tr>
<tr class="memdesc:group__usbd__coreFunctions__conf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration of the USB Device Core. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Initialize and manage the USB Device Core statically and at run-time. </p>
<p>The Core of the USB Device has standard functions that are used to initialize and start the USB Device. These functions must be used before any class specific functions are called:</p><ul>
<li>Initialize the USB Device Controller, Hardware Driver and a specific USB Device using <a class="el" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca">USBD_Initialize</a>.</li>
<li>Connect a specific USB Device to the USB Bus by calling <a class="el" href="group__usbd__coreFunctions__api.html#gad97153303fc0a6f51c1c20ac050b238f">USBD_Connect</a>.</li>
</ul>
<p>These two functions are accompanied <a class="el" href="group__usbd__coreFunctions__api.html#ga9440f139618900f2011034e70cd7a528">USBD_Disconnect</a> and <a class="el" href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb">USBD_Uninitialize</a>. Use them to properly disconnect and uninitialize the device from the USB bus.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Static and Run-Time Configuration</h2>
<p>The USB Device Core is statically configured using the <a class="el" href="group__usbd__coreFunctions__conf.html">USBD_Config_n.h</a> file. However, for mass-production it is often required to be able to configure some USB Device settings at run-time (for example the serial number which needs to be unique for every single device). To achieve this, the following device configuration functions are part of the <a class="el" href="group__usbd__coreFunctions.html#USBD_User_Device_UCT">USBD_User_Device_n.c</a> user code template. They enable user specific <a class="el" href="USB_Concepts.html#USB_Endpoints">USB Control Endpoint 0</a> request handling. This allows the user to intercept all Control Endpoint 0 requests and handle them overriding the default USB Component handling:</p><ul>
<li><a class="el" href="group__usbd__coreFunctions__api.html#ga8b8efce115c5874aa26492627c54de88">USBD_Devicen_Initialize</a> is used to add device specific initialization code.</li>
<li><a class="el" href="group__usbd__coreFunctions__api.html#gac23b8106ccb00fdf13de84474f53ffa1">USBD_Devicen_Uninitialize</a> is used to uninitialize the USB device.</li>
<li><a class="el" href="group__usbd__coreFunctions__api.html#ga7d7418260f001d450b5d6b87da772ba2">USBD_Devicen_Reset</a> is used to implement custom USB Device reset event handling.</li>
<li>The callback function <a class="el" href="group__usbd__coreFunctions__api.html#ga718d4b5f901b50ce6c86b78e07d21688">USBD_Devicen_Endpoint0_InDataSent</a> is called when the USB Device sent IN DATA on Control Endpoint 0.</li>
<li>The callback function <a class="el" href="group__usbd__coreFunctions__api.html#ga419d900bdd41d36494683c9534cdf281">USBD_Devicen_Endpoint0_OutDataReceived</a> is called when the USB Device received an OUT DATA request on Control Endpoint 0.</li>
<li>The callback function <a class="el" href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22">USBD_Devicen_Endpoint0_SetupPacketReceived</a> is called when the USB Device Instance n received a SETUP PACKET on Control Endpoint 0.</li>
<li>The callback function <a class="el" href="group__usbd__coreFunctions__api.html#ga966b91ca2ca092ca62095b82943dcfff">USBD_Devicen_Endpoint0_SetupPacketProcessed</a> is called when a SETUP PACKET was processed by the USB Component.</li>
</ul>
<h3><a class="anchor" id="autotoc_md24"></a>
Setup Packets on Control Endpoint 0</h3>
<p>Setup packets sent to Control Endpoint 0 are received by the USB Device Core. The USB Device Core will call the <a class="el" href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22">USBD_Devicen_Endpoint0_SetupPacketReceived</a> function and pass the setup packet to it. Depending on the return code of <b>USBD_Devicen_Endpoint0_SetupPacketReceived</b>, the USB Device Core either passes the processing to the Custom Class function if custom class is used and if message is addressed to a custom class by calling <a class="el" href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5">USBD_CustomClassn_Endpoint0_SetupPacketReceived</a> function or continues to process the received setup packet itself. Depending on the return code of <b>USBD_CustomClassn_Endpoint0_SetupPacketReceived</b>, processing of the setup packet is either done or continues to be processed by USB Device Core.</p>
<p>USB Device Core will call <a class="el" href="group__usbd__coreFunctions__api.html#ga966b91ca2ca092ca62095b82943dcfff">USBD_Devicen_Endpoint0_SetupPacketProcessed</a> and depending on return code it will call <a class="el" href="group__usbd__classFunctions__api.html#ga170bf6bfa6ab3bd069720d8a455b89b6">USBD_CustomClassn_Endpoint0_SetupPacketProcessed</a> to inform the application that setup packet has been processed by USB Device Core.</p>
<p>If custom handling of request was used and request contains data stage, USB Device Core will call <a class="el" href="group__usbd__coreFunctions__api.html#ga419d900bdd41d36494683c9534cdf281">USBD_Devicen_Endpoint0_OutDataReceived</a> and depending on return code it will call <a class="el" href="group__usbd__classFunctions__api.html#gaba68b8a4cdc472635133ffff7ad8a95f">USBD_CustomClassn_Endpoint0_OutDataReceived</a> after data expected by request was received, it will call <a class="el" href="group__usbd__coreFunctions__api.html#ga718d4b5f901b50ce6c86b78e07d21688">USBD_Devicen_Endpoint0_InDataSent</a> and depending on return code it will call <a class="el" href="group__usbd__classFunctions__api.html#gacd1d9f1538f74c858fda54889010f295">USBD_CustomClassn_Endpoint0_InDataSent</a> after data expected by request was sent.</p>
<div class="mscgraph">
<img src="msc_inline_mscgraph_1.png" alt="msc_inline_mscgraph_1" border="0" usemap="#msc_inline_mscgraph_1.map"/>
<map name="msc_inline_mscgraph_1.map" id="msc_inline_mscgraph_1.map"><area href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca" shape="rect" coords="56,78,145,91" alt=""/>
<area href="group__usbd__coreFunctions__api.html#gad97153303fc0a6f51c1c20ac050b238f" shape="rect" coords="65,129,136,142" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="217,192,384,205" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="256,205,345,218" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="256,218,345,231" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="217,288,384,301" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="256,301,345,314" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="223,314,378,327" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga718d4b5f901b50ce6c86b78e07d21688" shape="rect" coords="217,352,384,365" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga718d4b5f901b50ce6c86b78e07d21688" shape="rect" coords="283,365,318,378" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="217,435,384,448" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="256,448,345,461" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22" shape="rect" coords="223,461,378,474" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga419d900bdd41d36494683c9534cdf281" shape="rect" coords="217,499,384,512" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga419d900bdd41d36494683c9534cdf281" shape="rect" coords="268,512,333,525" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga9440f139618900f2011034e70cd7a528" shape="rect" coords="56,589,145,602" alt=""/>
<area href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb" shape="rect" coords="50,640,151,653" alt=""/>
</map>
</div>
<h2><a class="anchor" id="autotoc_md25"></a>
Implementation</h2>
<p>To <a class="el" href="usbd_create_app.html">create a USB Device</a>:</p><ul>
<li>Select required USB Device Class during the <a class="el" href="usbd_create_app.html#RTE_Software_Component_Selection">RTE Component Selection</a>.</li>
<li>Set the static USB Device parameters in the configuration file <a class="el" href="group__usbd__coreFunctions__conf.html">USBD_Config_n.h</a>.</li>
<li>Implement the application and run-time specific behavior using <a class="el" href="group__usbd__coreFunctions.html#USBD_User_Device_UCT">USBD_User_Device_n.c</a>.</li>
</ul>
<p><a class="anchor" id="UCT_USBD_User_Device"></a><b>User</b> <b>Code</b> <b>Templates</b> <br  />
 There are two user code templates available that help to configure the USB Device at run-time:</p><ol type="1">
<li><a class="el" href="group__usbd__coreFunctions.html#USBD_User_Device_UCT">USBD_User_Device_n.c</a> contains all the callback functions that need to be implemented by the user.</li>
<li><a class="el" href="group__usbd__coreFunctions.html#USBD_User_Device_SerNum_UCT">USBD_User_Device_SerNum_n.c</a> is a code template that creates a custom serial number for a USB Device. This serial number will override the one that is set in the <a class="el" href="group__usbd__coreFunctions__conf.html">USBD_Config_n.h</a> file.</li>
</ol>
<p><a class="anchor" id="USBD_User_Device_UCT"></a><b>User Code Template USBD_User_Device_n.c</b></p>
<p>The following source code can be used to implement the application specific behavior of a USB Device.</p>
<div class="fragment"><div class="line"><span class="comment">/*------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * MDK Middleware - Component ::USB:Device</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2004-2024 Arm Limited (or its affiliates). All rights reserved.</span></div>
<div class="line"><span class="comment"> *------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * Name:    USBD_User_Device_%Instance%.c</span></div>
<div class="line"><span class="comment"> * Purpose: USB Device User module</span></div>
<div class="line"><span class="comment"> * Rev.:    V6.8.3</span></div>
<div class="line"><span class="comment"> *----------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * USBD_User_Device_%Instance%.c is a code template for the user specific </span></div>
<div class="line"><span class="comment"> * Device events and Control Endpoint 0 requests handling. It allows user to </span></div>
<div class="line"><span class="comment"> * handle all user level events as well as to intercept all Control Endpoint 0 </span></div>
<div class="line"><span class="comment"> * requests and handle them overriding the default USB Library handling.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Uncomment &quot;Example code&quot; lines to override USB Device Descriptor.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * IMPORTANT NOTE!!!: Maximum packet size must not be set to less that 32 bytes!</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * \addtogroup usbd_coreFunctions_api</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_Device]</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//// Example code specifying USB Device Descriptor: </span></div>
<div class="line"><span class="comment">//// Device %Instance% USB Device Descriptor</span></div>
<div class="line"><span class="comment"></span><span class="comment">//static const uint8_t device%Instance%_dev_desc[] = {</span></div>
<div class="line"><span class="comment">//  18,                                   /* bLength            = 18 bytes      */</span></div>
<div class="line"><span class="comment">//  USB_DEVICE_DESCRIPTOR_TYPE,           /* bDescriptorType    = Device Desc   */</span></div>
<div class="line"><span class="comment">//  0x00, 0x02,                           /* bcdUSB             = 2.00          */</span></div>
<div class="line"><span class="comment">//  0x00,                                 /* bDeviceClass       = Defined in IF */</span></div>
<div class="line"><span class="comment">//  0x00,                                 /* bDeviceSubClass    = Defined in IF */</span></div>
<div class="line"><span class="comment">//  0x00,                                 /* bDeviceProtocol    = Defined in IF */</span></div>
<div class="line"><span class="comment">//  64,                                   /* bMaxPacketSize0    = 64 bytes !!! Must be same as USBD%Instance%_MAX_PACKET0 in USBD_Config_%Instance%.h */</span></div>
<div class="line"><span class="comment">//  0x51, 0xC2,                           /* idVendor           = 0xC251        */</span></div>
<div class="line"><span class="comment">//  0x01, 0x00,                           /* idProduct          = 1             */</span></div>
<div class="line"><span class="comment">//  0x00, 0x01,                           /* bcdDevice          = 1.00          */</span></div>
<div class="line"><span class="comment">//  0x01,                                 /* iManufacturer      = String1       */</span></div>
<div class="line"><span class="comment">//  0x02,                                 /* iProduct           = String2       */</span></div>
<div class="line"><span class="comment">//  0x03,                                 /* iSerialNumber      = String3       */</span></div>
<div class="line"><span class="comment">//  0x01                                  /* bNumConfigurations = 1 config      */</span></div>
<div class="line"><span class="comment">//};</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//static bool handle_request;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Initialize to initialize the USB Device</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Initialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Device Initialization</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//  handle_request = false;</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Uninitialize to de-initialize the USB Device</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Uninitialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Device De-initialization</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when VBUS level changes</span></div>
<div class="line"><span class="comment">// \param[in]     level                current VBUS level</span></div>
<div class="line"><span class="comment">//                                       - true: VBUS level is high</span></div>
<div class="line"><span class="comment">//                                       - false: VBUS level is low</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_VbusChanged (<span class="keywordtype">bool</span> level) {</div>
<div class="line">  (void)level;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called upon USB Bus Reset signaling</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Reset (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus speed was changed to high-speed</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_HighSpeedActivated (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus goes into suspend mode (no bus activity for 3 ms)</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Suspended (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus activity resumes</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Resumed (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device was successfully enumerated</span></div>
<div class="line"><span class="comment">// \param[in]     val                  current configuration value</span></div>
<div class="line"><span class="comment">//                                       - value 0: not configured</span></div>
<div class="line"><span class="comment">//                                       - value &gt; 0: active configuration</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_ConfigurationChanged (uint8_t val) {</div>
<div class="line">  (void)val;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Set Feature for Remote Wakeup comes over Control Endpoint 0</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_EnableRemoteWakeup (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Clear Feature for Remote Wakeup comes over Control Endpoint 0</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_DisableRemoteWakeup (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% received SETUP PACKET on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet             pointer to received setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    buf                      pointer to data buffer used for data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    len                      pointer to number of data bytes in data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (send Zero-Length Packet if no data stage)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_SetupPacketReceived (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet, uint8_t **buf, uint32_t *len) {</div>
<div class="line"> </div>
<div class="line">  (void)buf;</div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Type) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_STANDARD:</div>
<div class="line"><span class="comment">//      // Example code handling Get Device Descriptor request:</span></div>
<div class="line"><span class="comment">//      if ((setup_packet-&gt;bmRequestType.Dir       == USB_REQUEST_DEVICE_TO_HOST) &amp;&amp;      // Request to get</span></div>
<div class="line"><span class="comment">//          (setup_packet-&gt;bmRequestType.Recipient == USB_REQUEST_TO_DEVICE     ) &amp;&amp;      // from device</span></div>
<div class="line"><span class="comment">//          (setup_packet-&gt;bRequest                == USB_REQUEST_GET_DESCRIPTOR) &amp;&amp;      // the descriptor</span></div>
<div class="line"><span class="comment">//         ((setup_packet-&gt;wValue &gt;&gt; 8)            == USB_DEVICE_DESCRIPTOR_TYPE) &amp;&amp;      // Device Descriptor Type</span></div>
<div class="line"><span class="comment">//          (setup_packet-&gt;wIndex                  == 0U                        )) {      // Index = 0</span></div>
<div class="line"><span class="comment">//        *buf = (uint8_t *)((uint32_t)device%Instance%_dev_desc);</span></div>
<div class="line"><span class="comment">//        *len = sizeof               (device%Instance%_dev_desc);</span></div>
<div class="line"><span class="comment">//        handle_request = true;</span></div>
<div class="line"><span class="comment">//        return usbdRequestOK;</span></div>
<div class="line"><span class="comment">//      }</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_CLASS:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_VENDOR:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_RESERVED:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when SETUP PACKET was processed by USB library</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet            pointer to processed setup packet.</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Endpoint0_SetupPacketProcessed (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Type) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_STANDARD:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_CLASS:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_VENDOR:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_RESERVED:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% received OUT DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     len                      number of received data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (send Zero-Length Packet)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:          request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_OutDataReceived (uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% sent IN DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     len                      number of sent data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (return ACK)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:          request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_InDataSent (uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//  // Example code after Get Device Descriptor was sent:</span></div>
<div class="line"><span class="comment">//  if (handle_request) {                 // If Device Descriptor was sent</span></div>
<div class="line"><span class="comment">//    handle_request = false;</span></div>
<div class="line"><span class="comment">//    return usbdRequestOK;               // Acknowledge custom handled request</span></div>
<div class="line"><span class="comment">//  }</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_Device]</span></div>
</div><!-- fragment --><p><a class="anchor" id="USBD_User_Device_SerNum_UCT"></a><b>User Code Template USBD_User_Device_SerNum_n.c</b></p>
<p>The following source code can be used to set an application specific serial number for the USB Device.</p>
<div class="fragment"><div class="line"><span class="comment">/*------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * MDK Middleware - Component ::USB:Device</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2004-2024 Arm Limited (or its affiliates). All rights reserved.</span></div>
<div class="line"><span class="comment"> *------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * Name:    USBD_User_Device_SerNum_%Instance%.c</span></div>
<div class="line"><span class="comment"> * Purpose: USB Device User module</span></div>
<div class="line"><span class="comment"> * Rev.:    V1.2.1</span></div>
<div class="line"><span class="comment"> *----------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * USBD_User_Device_SerNum_%Instance%.c is a code template for the user specific </span></div>
<div class="line"><span class="comment"> * Device events and Control Endpoint 0 requests handling. It demonstrates how </span></div>
<div class="line"><span class="comment"> * to specify serial number at runtime instead of fixed one specified in </span></div>
<div class="line"><span class="comment"> * USBD_Config_%Instance%.h file.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * \addtogroup usbd_coreFunctions_api</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_Device]</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span>    handle_request;</div>
<div class="line"><span class="keyword">static</span> uint8_t ser_no_string_desc[32];  <span class="comment">// String Descriptor runtime value</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Initialize to initialize the USB Device</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Initialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Device Initialization</span></div>
<div class="line"> </div>
<div class="line">  handle_request = <span class="keyword">false</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Uninitialize to de-initialize the USB Device</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Uninitialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Device De-initialization</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when VBUS level changes</span></div>
<div class="line"><span class="comment">// \param[in]     level                current VBUS level</span></div>
<div class="line"><span class="comment">//                                       - true: VBUS level is high</span></div>
<div class="line"><span class="comment">//                                       - false: VBUS level is low</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_VbusChanged (<span class="keywordtype">bool</span> level) {</div>
<div class="line">  (void)level;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called upon USB Bus Reset signaling</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Reset (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus speed was changed to high-speed</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_HighSpeedActivated (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus goes into suspend mode (no bus activity for 3 ms)</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Suspended (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus activity resumes</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Resumed (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device was successfully enumerated</span></div>
<div class="line"><span class="comment">// \param[in]     val                  current configuration value</span></div>
<div class="line"><span class="comment">//                                       - value 0: not configured</span></div>
<div class="line"><span class="comment">//                                       - value &gt; 0: active configuration</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_ConfigurationChanged (uint8_t val) {</div>
<div class="line">  (void)val;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Set Feature for Remote Wakeup comes over Control Endpoint 0</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_EnableRemoteWakeup (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Clear Feature for Remote Wakeup comes over Control Endpoint 0</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_DisableRemoteWakeup (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% received SETUP PACKET on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet             pointer to received setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    buf                      pointer to data buffer used for data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    len                      pointer to number of data bytes in data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (send Zero-Length Packet if no data stage)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_SetupPacketReceived (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet, uint8_t **buf, uint32_t *len) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Type) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_STANDARD:</div>
<div class="line">      <span class="comment">// Catch Get String Descriptor request for serial number string and return desired string:</span></div>
<div class="line">      <span class="keywordflow">if</span> ((setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Dir       == USB_REQUEST_DEVICE_TO_HOST) &amp;&amp;      <span class="comment">// Request to get</span></div>
<div class="line">          (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Recipient == USB_REQUEST_TO_DEVICE     ) &amp;&amp;      <span class="comment">// from device</span></div>
<div class="line">          (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a1e7be110861bd4ff75c86d5214f31543" title="Specific request.">bRequest</a>                == USB_REQUEST_GET_DESCRIPTOR) &amp;&amp;      <span class="comment">// the descriptor</span></div>
<div class="line">         ((setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a7383d0165ad8eab48aa239c005199121" title="Value according to request.">wValue</a> &gt;&gt; 8)            == USB_STRING_DESCRIPTOR_TYPE) &amp;&amp;      <span class="comment">// String Descriptor Type</span></div>
<div class="line">         ((setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a7383d0165ad8eab48aa239c005199121" title="Value according to request.">wValue</a> &amp; 0xFFU)         == 0x03U                     ) &amp;&amp;      <span class="comment">// Index of String = 3</span></div>
<div class="line">          (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#adc578ce35d89d52deba61ee6f312f177" title="Index or Offset according to request.">wIndex</a>                  == 0x0409U                   )) {      <span class="comment">// Language ID = 0x0409 = English (United States)</span></div>
<div class="line">        ser_no_string_desc[0] = 26U;    <span class="comment">// Total size of String Descriptor</span></div>
<div class="line">        ser_no_string_desc[1] = USB_STRING_DESCRIPTOR_TYPE;   <span class="comment">// String Descriptor Type</span></div>
<div class="line">        memcpy(&amp;ser_no_string_desc[2], u<span class="stringliteral">&quot;0001A0000001&quot;</span>, 24);  <span class="comment">// Serial Number String value</span></div>
<div class="line">        *buf = ser_no_string_desc;      <span class="comment">// Return pointer to prepared String Descriptor</span></div>
<div class="line">        <span class="keywordflow">if</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a496c03443b177fd2e6c93616064d2934" title="Number of bytes to transfer if there is a Data stage.">wLength</a> &gt;= 26) {</div>
<div class="line">          *len = 26U;                   <span class="comment">// Number of bytes of whole String Descriptor</span></div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          *len = setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a496c03443b177fd2e6c93616064d2934" title="Number of bytes to transfer if there is a Data stage.">wLength</a>; <span class="comment">// Requested number of bytes of String Descriptor</span></div>
<div class="line">        }</div>
<div class="line">        handle_request = <span class="keyword">true</span>;          <span class="comment">// This request is handled</span></div>
<div class="line">        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7eab2a90632702edc200eed8321881ddbbc" title="Request processed and OK.">usbdRequestOK</a>;           <span class="comment">// Return status that custom handling for this request is used</span></div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_CLASS:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_VENDOR:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_RESERVED:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when SETUP PACKET was processed by USB library</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet            pointer to processed setup packet.</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Endpoint0_SetupPacketProcessed (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Type) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_STANDARD:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_CLASS:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_VENDOR:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_RESERVED:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% received OUT DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     len                      number of received data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (send Zero-Length Packet)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:          request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_OutDataReceived (uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% sent IN DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     len                      number of sent data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (return ACK)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:          request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_InDataSent (uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (handle_request) {                 <span class="comment">// If String Descriptor was sent</span></div>
<div class="line">    handle_request = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7eab2a90632702edc200eed8321881ddbbc" title="Request processed and OK.">usbdRequestOK</a>;               <span class="comment">// Acknowledge custom handled request</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_Device]</span></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
