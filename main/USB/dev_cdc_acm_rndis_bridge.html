<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: USB Device RNDIS to Ethernet Bridge</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dev_cdc_acm_rndis_bridge.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">USB Device RNDIS to Ethernet Bridge </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The USB Device RNDIS to Ethernet Bridge example connects a Windows host via USB to a Cortex-M system that provides an Ethernet interface for network connectivity.</p>
<p>The following picture shows an exemplary connection of the development board (in this case a <a href="https://www.keil.com/boards2/keil/mcb4300/" class="el" target="_blank">MCB4300</a>) to a host PC.</p>
<div class="image">
<img src="usb_dev_rndis_eth_bridge.png" alt=""/>
</div>
<p>The <b>Abstract.txt</b> file contained in the <b>Documentation</b> group of the <b>Project</b> window gives you more information on the general setup.</p>
<h1><a class="anchor" id="autotoc_md47"></a>
Build the "RNDIS to Ethernet Bridge" project</h1>
<p>Open the example project in MDK. The µVision <b>Project</b> window should display a similar project structure:</p>
<div class="image">
<img src="usb_dev_rndis_eth_bridge_proj_win.png" alt=""/>
<div class="caption">
Typical project structure of the RNDIS bridge example</div></div>
<h2><a class="anchor" id="autotoc_md48"></a>
Source Files</h2>
<ul>
<li><b>main.c</b> contains the main C function that initializes the Keil RTX real-time operating system.</li>
<li><b>RNDIS.c</b> contains the app_main C function that initializes the GLCD and the USB Device Component.</li>
<li>The files <b>USBD_User_CDC_ACM_RNDIS_ETH_0.c</b> implements the application specific functionality of the CDC ACM class using the RNDIS protocol and is used to implement a Network Interface Card (NIC) to Ethernet Bridge to the USB Host. Refer to <a class="el" href="group__usbd__cdcFunctions__acm.html">CDC: Communication Device Class (ACM)</a> for details about these template functions.</li>
</ul>
<p>If you are using RTOS other than CMSIS-RTOS2 RTX5 for your project please make sure to satisfy <a class="el" href="usb_resource_requirements.html#usbd_res_req">USB Device Resource Requirements</a>.</p>
<p>You may now build and download the example project to the development board using the µVision commands:</p><ul>
<li><b>Project</b> --&gt; <b> Build target (F7) </b></li>
<li><b>Flash</b> --&gt; <b> Download (F8) </b></li>
</ul>
<p>After these steps, the project should start executing on your development kit. In case of errors, refer to the development board user's guide for configuration information.</p>
<h1><a class="anchor" id="autotoc_md49"></a>
Using the "RNDIS to Ethernet Bridge" Project</h1>
<h2><a class="anchor" id="autotoc_md50"></a>
Hardware Setup</h2>
<p>The setup of the development board hardware is described in the <b>Abstract.txt</b> file.</p><ul>
<li>Verify all jumper settings on the target hardware.</li>
<li>Power your development board externally.</li>
<li>Connect a USB cable between your development board and the host PC.</li>
<li>You should see new "Ethernet" connection with a "Remote NDIS compatible device" in your network control panel: <div class="image">
<img src="usb_dev_rndis_eth_bridge_control_panel.png" alt=""/>
</div>
 if driver is not installed automatically please install driver from example folder.</li>
</ul>
<p><b>About Host PC driver for Microsoft Windows</b></p>
<p>The example folder contains two files relevant for driver installation on the Microsoft Windows:</p><ul>
<li>Driver setup information file (xxx-rndis.inf) which is used to create a digitally signed driver catalog file (xxx-rndis.cat)</li>
<li>Digitally signed driver catalog file (xxx-rndis.cat)</li>
</ul>
<p>The driver files are provided as an example, the driver setup information file should be adapted and digitally signed driver catalog file should be created from adapted driver setup information file.</p>
<p>Driver setup information file should be adapted in the following way:</p><ul>
<li><b>c251</b> in Vendor ID <b>VID_c251</b> entries should be changed to the vendor ID number assigned to your company by the USB organization (c251 Vendor ID is reserved for Keil Software and should not be used)</li>
<li><b>xxxx</b> in Product ID <b>PID_xxxx</b> entries should be changed to the product ID as assigned by your company</li>
<li>in <b>[DeviceList.xxx]</b> sections, entries not relevant for the device, should be removed or added as described below:<ul>
<li>if device is pure RNDIS CDC class device (<b>not composite</b>) then all entries ending with <b>&amp;MI_xx should be removed</b></li>
<li>if device is a <b>composite device</b> with one or more RNDIS CDC class instances then entries <b>not ending</b> with <b>&amp;MI_xx should be removed</b> and entries <b>ending</b> with <b>&amp;MI_xx should exist</b> for each RNDIS CDC class instance (example driver contains entries ending with &amp;MI_00 and &amp;MI_02 which are used for composite device containing two RNDIS CDC class instances and each instance uses 2 interfaces where MI_00 describes first RNDIS instance and MI_02 entry describes second RNDIS CDC instance)</li>
</ul>
</li>
<li><b>[Strings]</b> section should be changed as desired</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Vendor ID and Product ID are configured in the USBD_Config_n.h configuration file of the embedded application. </dd>
<dd>
For producing digitally signed driver catalog file please refer to Microsoft Windows documentation. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
