<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: USB Communication</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('USB_Endpoints.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">USB Communication </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>USB is a polled bus, where the USB Host initiates all data exchanges. The data travels to or from <a class="el" href="USB_Endpoints.html#endpoints">Endpoints</a> in an USB Device. The <b>client</b> in the USB Host stores data in buffers, but does not have endpoints. The USB Host and the peripheral USB Device have distinct layers, as shown in the picture below. The connections between the layers are <b>logical</b> Host-Device interfaces between each horizontal layer. Between the logical connections data is transferred using <a class="el" href="USB_Endpoints.html#pipe_types">Pipes</a>.</p>
<div class="image">
<img src="usb_endpoints.png" alt=""/>
<div class="caption">
Logical Connections Between USB Host Clients and USB Device Endpoints</div></div>
<h1><a class="anchor" id="pipe_types"></a>
Pipes</h1>
<p>Basically, two types of <b>pipes</b> exist:</p><ul>
<li><b>Message pipes</b> have a defined USB format and are host controlled. Message pipes allow data to flow in both directions and support <a class="el" href="USB_Control_Transfers.html">Control Transfers</a> only.</li>
<li><b>Stream pipes</b> have no defined USB format and can either be controlled by the host or by the device. The data stream has a predefined direction, either <b>IN</b> or <b>OUT</b>. Stream pipes support <a class="el" href="USB_Interrupt_Transfers.html">Interrupt Transfers</a>, <a class="el" href="USB_Isochronous_Transfers.html">Isochronous Transfers</a>, and <a class="el" href="USB_Bulk_Transfers.html">Bulk Transfers</a>.</li>
</ul>
<p>Most pipes come into existence when an USB Device has been connected to the USB Bus and configured by the USB Host. A pipe originates from a <b>data</b> <b>buffer</b> within the host <b>client</b> and terminates inside the USB Device at an <a class="el" href="USB_Endpoints.html#endpoints">Endpoint</a>.</p>
<h1><a class="anchor" id="transfers"></a>
Transfers</h1>
<p><b>Transfers</b> (data flow types) can consist of one or more transactions. A pipe supports only one of the following transfer types:</p><ul>
<li><a class="el" href="USB_Control_Transfers.html">Control Transfers</a> are typically used to setup an USB device. They always use IN/OUT Endpoint 0.</li>
<li><a class="el" href="USB_Interrupt_Transfers.html">Interrupt Transfers</a> can be used where data is sent regularly, for example for status updates.</li>
<li><a class="el" href="USB_Isochronous_Transfers.html">Isochronous Transfers</a> transmit real-time data such as audio and video. They have a guaranteed, fixed bandwidth, but no error detection.</li>
<li><a class="el" href="USB_Bulk_Transfers.html">Bulk Transfers</a> can be used to send data where timing is not important, for example to a printer.</li>
</ul>
<h1><a class="anchor" id="endpoints"></a>
Endpoints</h1>
<p><b>Endpoints</b> can be described as data sources or sinks and exists in USB Devices only. The data stored at an endpoint may either be received from or waiting for being sent to the USB Host. An endpoint can be configured to support four <a class="el" href="USB_Endpoints.html#transfers">transfer types</a> defined in the USB specification (<a class="el" href="USB_Control_Transfers.html">Control Transfers</a>, <a class="el" href="USB_Interrupt_Transfers.html">Interrupt Transfers</a>, <a class="el" href="USB_Isochronous_Transfers.html">Isochronous Transfers</a>, and <a class="el" href="USB_Bulk_Transfers.html">Bulk Transfers</a>). Within the limits of the hardware, endpoints can be configured using the USB Middleware (e.g. limit an endpoint to a certain transfer type). <br  />
 An endpoint acts as a kind of buffer. A USB Host's client may send data to Endpoint 1 for example. Coming from the USB Host, the data will be sent to the <b>OUT Endpoint 1</b>. The program on the microcontroller will then read the data as soon as it is ready to do so. Returning data has to be written to the <b>IN Endpoint 1</b>, as the program cannot access the USB bus freely (the USB bus being controlled by the USB Host). The data in IN Endpoint 1 stays there until the host sends an IN packet to Endpoint 1 requesting the data. <br  />
</p>
<p>These rules apply to all microcontroller devices:</p><ul>
<li>A device can have up to <b>16</b> <b>OUT</b> and <b>16</b> <b>IN</b> endpoints.</li>
<li>Each endpoint can have only <b>one</b> <b>transfer</b> <b>direction</b>.</li>
<li><b>Endpoint</b> <b>0</b> is used for control transfers only and can not be assigned to any other function.</li>
<li><b>OUT</b> always refers to the direction pointing from the host to the device.</li>
<li><b>IN</b> always refers to the direction pointing towards the host.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The total number of endpoints and the capability of each endpoint is defined by the underlying hardware. Please consult the hardware reference manual of your microcontroller. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
