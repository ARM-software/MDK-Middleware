<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: User API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__usbd__hidFunctions__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">User API<div class="ingroups"><a class="el" href="group__usbd.html">USB Device</a> &raquo; <a class="el" href="group__usbd__DevClassFunctions.html">Device Class</a> &raquo; <a class="el" href="group__usbd__hidFunctions.html">HID: Human Interface Class</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>User API reference of the Human Interface Device Class.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga2c21f6f5bbe3b1fb832bbd7a1615f477"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hidFunctions__api.html#ga2c21f6f5bbe3b1fb832bbd7a1615f477">USBD_HIDn_Initialize</a> (void)</td></tr>
<tr class="memdesc:ga2c21f6f5bbe3b1fb832bbd7a1615f477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called during <a class="el" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca">USBD_Initialize</a> to initialize the USB HID class instance.  <br /></td></tr>
<tr class="separator:ga2c21f6f5bbe3b1fb832bbd7a1615f477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ff95f579fd90e3c75f90c0c8d2b2968"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hidFunctions__api.html#ga5ff95f579fd90e3c75f90c0c8d2b2968">USBD_HIDn_Uninitialize</a> (void)</td></tr>
<tr class="memdesc:ga5ff95f579fd90e3c75f90c0c8d2b2968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called during <a class="el" href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb">USBD_Uninitialize</a> to de-initialize the USB HID class instance.  <br /></td></tr>
<tr class="separator:ga5ff95f579fd90e3c75f90c0c8d2b2968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaed8b507a9ce1bf958fbcae55ee0b91bf"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hidFunctions__api.html#gaed8b507a9ce1bf958fbcae55ee0b91bf">USBD_HIDn_GetReport</a> (uint8_t rtype, uint8_t req, uint8_t rid, uint8_t *buf)</td></tr>
<tr class="memdesc:gaed8b507a9ce1bf958fbcae55ee0b91bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called to prepare HID Report data to send.  <br /></td></tr>
<tr class="separator:gaed8b507a9ce1bf958fbcae55ee0b91bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7d101077f2018ca8a24da7dffce434f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hidFunctions__api.html#gab7d101077f2018ca8a24da7dffce434f">USBD_HIDn_SetReport</a> (uint8_t rtype, uint8_t req, uint8_t rid, const uint8_t *buf, int32_t len)</td></tr>
<tr class="memdesc:gab7d101077f2018ca8a24da7dffce434f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called to process received HID Report data.  <br /></td></tr>
<tr class="separator:gab7d101077f2018ca8a24da7dffce434f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7e97151e60e0b12b3f331610f31c071"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__hidFunctions__api.html#gad7e97151e60e0b12b3f331610f31c071">USBD_HID_GetReportTrigger</a> (uint8_t instance, uint8_t rid, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:gad7e97151e60e0b12b3f331610f31c071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronously prepare HID Report data to send.  <br /></td></tr>
<tr class="separator:gad7e97151e60e0b12b3f331610f31c071"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>User API reference of the Human Interface Device Class. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad7e97151e60e0b12b3f331610f31c071" name="gad7e97151e60e0b12b3f331610f31c071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7e97151e60e0b12b3f331610f31c071">&#9670;&#160;</a></span>USBD_HID_GetReportTrigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a> USBD_HID_GetReportTrigger </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asynchronously prepare HID Report data to send. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID class. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rid</td><td>report ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>buffer containing report data to send. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>number of report data bytes to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a>.</dd></dl>
<p>The function <b>USBD_HID_GetReportTrigger</b> asynchronously prepares data that will be returned to the USB Host upon request. It enables the USB Device to send HID report data only when the data has changed. Usually, the USB Host sets idle time to <em>infinity</em> upon HID Device enumeration. This means, the USB Host expects data from a device only when it has changed. If idle time is not set to infinity, the <a class="el" href="group__usbd__hidFunctions__api.html#gaed8b507a9ce1bf958fbcae55ee0b91bf">USBD_HIDn_GetReport</a> function is called whenever the idle time period is expired.</p>
<p>Use the function only for reports of type HID_REPORT_INPUT and for events that needs to update report data. The function should only be used for reports with the <em>rtype</em> = HID_REPORT_INPUT to signal that an updated HID report is available.</p>
<p>The argument <em>instance</em> specifies the instance of the HID device that is to be used.</p>
<p>The argument <em>rid</em> specifies the report ID and should be 0 if there's only one report in the system.</p>
<p>The argument <em>buf</em> is pointing to the buffer with the data to be sent.</p>
<p>The argument <em>len</em> specifies the number of bytes to be sent.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;cmsis_vio.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">__NO_RETURN <span class="keywordtype">void</span> app_main_thread (<span class="keywordtype">void</span> *argument) {</div>
<div class="line">  uint8_t but;</div>
<div class="line">  uint8_t but_prev = 0U;</div>
<div class="line"> </div>
<div class="line">  (void)argument;</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca" title="Initialize USB Device stack and controller.">USBD_Initialize</a>(0U);                  <span class="comment">// USB Device 0 Initialization</span></div>
<div class="line">  <a class="code hl_function" href="group__usbd__coreFunctions__api.html#gad97153303fc0a6f51c1c20ac050b238f" title="Activate pull-up on D+ or D- line to signal USB Device connection on USB Bus.">USBD_Connect</a>   (0U);                  <span class="comment">// USB Device 0 Connect</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (;;) {                            <span class="comment">// Loop forever</span></div>
<div class="line">    but = (uint8_t)(vioGetSignal(0xFFU));</div>
<div class="line">    <span class="keywordflow">if</span> (but != but_prev) {</div>
<div class="line">      but_prev = but;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code hl_function" href="group__usbd__coreFunctions__api.html#gabcbbc7a70c6050fbaec107968a581487" title="Retrieve USB Device configuration status.">USBD_Configured</a> (0)) { <a class="code hl_function" href="group__usbd__hidFunctions__api.html#gad7e97151e60e0b12b3f331610f31c071" title="Asynchronously prepare HID Report data to send.">USBD_HID_GetReportTrigger</a>(0U, 0U, &amp;but, 1U); }</div>
<div class="line">    }</div>
<div class="line">    osDelay(100U);                      <span class="comment">// 100 ms delay for sampling buttons</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gaed8b507a9ce1bf958fbcae55ee0b91bf" name="gaed8b507a9ce1bf958fbcae55ee0b91bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed8b507a9ce1bf958fbcae55ee0b91bf">&#9670;&#160;</a></span>USBD_HIDn_GetReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_HIDn_GetReport </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called to prepare HID Report data to send. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rtype</td><td>report type :<ul>
<li>HID_REPORT_INPUT = input report requested</li>
<li>HID_REPORT_FEATURE = feature report requested </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">req</td><td>request type :<ul>
<li>USBD_HID_REQ_EP_CTRL = control endpoint request</li>
<li>USBD_HID_REQ_PERIOD_UPDATE = idle period expiration request</li>
<li>USBD_HID_REQ_EP_INT = previously sent report on interrupt endpoint request </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rid</td><td>report ID (0 if only one report exists). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>buffer containing report data to send. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of report data bytes prepared to send or invalid report requested :<ul>
<li>value &gt;= 0 : number of report data bytes prepared to send</li>
<li>value -1 : invalid report requested</li>
</ul>
</dd></dl>
<p>The function <b>USBD_HIDn_GetReport</b> prepares data that will be returned to the USB Host. You may modify the function to the application's needs. The function is called on any of the following events:</p><ul>
<li>if USB Host has requested new data by request on Control Endpoint 0,</li>
<li>if USB Host set idle period different than infinite, at each idle period expiration,</li>
<li>if data was sent to USB Host.</li>
</ul>
<p>The argument <em>rtype</em> specifies the report type: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HID_REPORT_INPUT   </td><td class="markdownTableBodyNone">Input report requested    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HID_REPORT_FEATURE   </td><td class="markdownTableBodyNone">Feature report requested   </td></tr>
</table>
<p>The argument <em>req</em> specifies the request type: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">USBD_HID_REQ_EP_CTRL   </td><td class="markdownTableBodyNone">Request came from control endpoint    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">USBD_HID_REQ_PERIOD_UPDATE   </td><td class="markdownTableBodyNone">Request came from idle period expiration    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">USBD_HID_REQ_EP_INT   </td><td class="markdownTableBodyNone">Request came from previously sent report on interrupt endpoint   </td></tr>
</table>
<p>The argument <em>rid</em> specifies the report ID and should be 0 if there's only one report in the system.</p>
<p>The argument <em>buf</em> is pointing to the buffer to report data.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;cmsis_vio.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;rl_usbd.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;usb_hid.h&quot;</span></div>
<div class="line"> </div>
<div class="line">int32_t <a class="code hl_function" href="group__usbd__hidFunctions__api.html#gaed8b507a9ce1bf958fbcae55ee0b91bf" title="Callback function called to prepare HID Report data to send.">USBD_HIDn_GetReport</a> (uint8_t rtype, uint8_t req, uint8_t rid, uint8_t *buf) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (rtype) {</div>
<div class="line">    <span class="keywordflow">case</span> HID_REPORT_INPUT:</div>
<div class="line">      <span class="keywordflow">switch</span> (rid) {</div>
<div class="line">        <span class="keywordflow">case</span> 0:</div>
<div class="line">          <span class="keywordflow">switch</span> (req) {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#a4da684a1d01c75782fd63fcd65311791aa828fd6f941edb24dc3ec17e912c8745" title="Request from control endpoint.">USBD_HID_REQ_EP_CTRL</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#a4da684a1d01c75782fd63fcd65311791adde4a2cd8155113b82252ad237b899bf" title="Request from periodic update.">USBD_HID_REQ_PERIOD_UPDATE</a>:</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#a4da684a1d01c75782fd63fcd65311791a7d5c5fefca44e5d5b48bf0d2107f76ea" title="Request from interrupt endpoint.">USBD_HID_REQ_EP_INT</a>:</div>
<div class="line">              *buf = (uint8_t)(vioGetSignal(0xFFU));</div>
<div class="line">              <span class="keywordflow">return</span> 1;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> HID_REPORT_FEATURE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga2c21f6f5bbe3b1fb832bbd7a1615f477" name="ga2c21f6f5bbe3b1fb832bbd7a1615f477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2c21f6f5bbe3b1fb832bbd7a1615f477">&#9670;&#160;</a></span>USBD_HIDn_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HIDn_Initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called during <a class="el" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca">USBD_Initialize</a> to initialize the USB HID class instance. </p>
<p>The function <b>USBD_HIDn_Initialize</b> is called automatically upon initialization of a Human Interface Device Class Device and needs no invocation in the user code.</p>
<p>Modify this function to the application needs to allocate resources and initialize additional peripherals.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;rl_usbd.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;usb_hid.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>)  {</div>
<div class="line">  ..</div>
<div class="line">  <a class="code hl_function" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca" title="Initialize USB Device stack and controller.">USBD_Initialize</a> (0);   <span class="comment">// USB Device 0 Initialization calls USBD_HIDn_Initialize() automatically</span></div>
<div class="line">  <a class="code hl_function" href="group__usbd__coreFunctions__api.html#gad97153303fc0a6f51c1c20ac050b238f" title="Activate pull-up on D+ or D- line to signal USB Device connection on USB Bus.">USBD_Connect</a> (0);      <span class="comment">// USB Device 0 Connect</span></div>
<div class="line">  ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gab7d101077f2018ca8a24da7dffce434f" name="gab7d101077f2018ca8a24da7dffce434f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7d101077f2018ca8a24da7dffce434f">&#9670;&#160;</a></span>USBD_HIDn_SetReport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_HIDn_SetReport </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called to process received HID Report data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rtype</td><td>report type :<ul>
<li>HID_REPORT_OUTPUT = output report received</li>
<li>HID_REPORT_FEATURE = feature report received </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">req</td><td>request type :<ul>
<li>USBD_HID_REQ_EP_CTRL = report received on control endpoint</li>
<li>USBD_HID_REQ_EP_INT = report received on interrupt endpoint </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rid</td><td>report ID (0 if only one report exists). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>buffer that receives report data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of received report data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>received report data processed status :<ul>
<li>value true : processed</li>
<li>value false : not processed</li>
</ul>
</dd></dl>
<p>The function <b>USBD_HIDn_SetReport</b> handles HID report data that is received from the USB Host. The function is called when a HID report was received. You may modify the function to the application's needs.</p>
<p>The argument <em>rtype</em> specifies the report type: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HID_REPORT_OUTPUT   </td><td class="markdownTableBodyNone">Output report received    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HID_REPORT_FEATURE   </td><td class="markdownTableBodyNone">Feature report received   </td></tr>
</table>
<p>The argument <em>req</em> specifies the request type: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Value   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">USBD_HID_REQ_EP_CTRL   </td><td class="markdownTableBodyNone">Request came through control endpoint    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">USBD_HID_REQ_EP_INT   </td><td class="markdownTableBodyNone">Request came through interrupt endpoint   </td></tr>
</table>
<p>The argument <em>rid</em> specifies the report ID and should be 0 if there's only one report in the system.</p>
<p>The argument <em>buf</em> is pointing to the buffer to report data.</p>
<p>The argument <em>len</em> specifies the length of the received report data.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;cmsis_vio.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;rl_usbd.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;usb_hid.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__hidFunctions__api.html#gab7d101077f2018ca8a24da7dffce434f" title="Callback function called to process received HID Report data.">USBD_HIDn_SetReport</a> (uint8_t rtype, uint8_t req, uint8_t rid, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line">  uint8_t i;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (rtype) {</div>
<div class="line">    <span class="keywordflow">case</span> HID_REPORT_OUTPUT:</div>
<div class="line">      vioSetSignal(0xFFU, *buf);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> HID_REPORT_FEATURE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga5ff95f579fd90e3c75f90c0c8d2b2968" name="ga5ff95f579fd90e3c75f90c0c8d2b2968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ff95f579fd90e3c75f90c0c8d2b2968">&#9670;&#160;</a></span>USBD_HIDn_Uninitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HIDn_Uninitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called during <a class="el" href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb">USBD_Uninitialize</a> to de-initialize the USB HID class instance. </p>
<p>The function <b>USBD_HIDn_Uninitialize</b> is called automatically upon un-initialization of a Human Interface Device Class Device and needs no invocation in the user code. If <a class="el" href="group__usbd__hidFunctions__api.html#ga2c21f6f5bbe3b1fb832bbd7a1615f477">USBD_HIDn_Initialize</a> has been adapted to the application, <b>USBD_HIDn_Uninitialize</b> should release resources and should de-initialize peripherals.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;rl_usbd.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;usb_hid.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>)  {</div>
<div class="line">  ..</div>
<div class="line">  <a class="code hl_function" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca" title="Initialize USB Device stack and controller.">USBD_Initialize</a> (0);         <span class="comment">// USB Device 0 Initialization</span></div>
<div class="line">  ...</div>
<div class="line">  <a class="code hl_function" href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb" title="De-initialize USB Device stack and controller.">USBD_Uninitialize</a> (0);       <span class="comment">// USB Device 0 Un-Initialization</span></div>
<div class="line">  ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
