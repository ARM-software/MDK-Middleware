<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: Custom Class</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__usbd__classFunctions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Content</a>  </div>
  <div class="headertitle"><div class="title">Custom Class<div class="ingroups"><a class="el" href="group__usbd.html">USB Device</a> &raquo; <a class="el" href="group__usbd__DevClassFunctions.html">Device Class</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Implement application specific behavior of a Custom Class USB Device.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Content</h2></td></tr>
<tr class="memitem:group__usbd__classFunctions__api"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__classFunctions__api.html">User API</a></td></tr>
<tr class="memdesc:group__usbd__classFunctions__api"><td class="mdescLeft">&#160;</td><td class="mdescRight">User API reference of the Custom Device Class. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__usbd__classFunctions__conf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__classFunctions__conf.html">Configuration</a></td></tr>
<tr class="memdesc:group__usbd__classFunctions__conf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration of the USB Device Custom Class. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Implement application specific behavior of a Custom Class USB Device. </p>
<p>The Custom Class in the USB Component may be used to implement any type of USB Device class.</p>
<p>Refer to:</p><ul>
<li><a class="el" href="USB_Classes.html#CustomClass">Custom Class</a> for an overview of the Custom Class.</li>
</ul>
<p>The USB Component allows multiple instances of the Custom class. This feature may be used to create USB Composite Devices. Each Custom Class instance has separate files and interface functions:</p><ul>
<li>A configuration file <a class="el" href="group__usbd__classFunctions__conf.html">USBD_Config_CustomClass_n.h</a>.</li>
<li>An application-specific user source code file which may be implemented with the  <script>link_ext('uv4_ca_sourcefiles');</script> <b>USBD_User_CustomClass_<em>n</em>.c</b>.</li>
<li>Functions that start with the prefix <b>USBD_CustomClass<em>n</em>_</b> are available for each instance of a Custom Class.</li>
</ul>
<p>This documentation uses <em>n</em> as a placeholder for the instance number <em>0</em> - <em>3</em>. Most applications require only one instance of a Custom Class. For the first Custom Class instance the instance number is 0:</p><ul>
<li><b>USBD_Config_CustomClass_0.h</b></li>
<li><b>USBD_User_CustomClass_0.c</b></li>
<li>The function prefix is <b>USBD_CustomClass0_</b></li>
</ul>
<h2><a class="anchor" id="autotoc_md47"></a>
Software Structure</h2>
<p>The handling of the Custom Class endpoint events is implemented in an USBD_CustomClassn_Endpointx_Event for every endpoint. Each endpoint (or pair of IN/OUT endpoints with the same endpoint number) uses an own thread in order to allow a parallel functionality of every interface.</p>
<h3><a class="anchor" id="autotoc_md48"></a>
Setup Packets on Control Endpoint 0</h3>
<p>Setup packets sent to Control Endpoint 0 are received by the USB Device Core. The USB Device Core will call the <a class="el" href="group__usbd__coreFunctions__api.html#ga4e042536dff24404490771d698da1e22">USBD_Devicen_Endpoint0_SetupPacketReceived</a> function and pass the setup packet to it. Depending on the return code of <b>USBD_Devicen_Endpoint0_SetupPacketReceived</b>, the USB Device Core either passes the processing to the Custom Class function if custom class is used and if message is addressed to a custom class by calling <a class="el" href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5">USBD_CustomClassn_Endpoint0_SetupPacketReceived</a> function or continues to process the received setup packet itself. Depending on the return code of <b>USBD_CustomClassn_Endpoint0_SetupPacketReceived</b>, processing of the setup packet is either done or continues to be processed by USB Device Core.</p>
<p>USB Device Core will call <a class="el" href="group__usbd__coreFunctions__api.html#ga966b91ca2ca092ca62095b82943dcfff">USBD_Devicen_Endpoint0_SetupPacketProcessed</a> and depending on return code it will call <a class="el" href="group__usbd__classFunctions__api.html#ga170bf6bfa6ab3bd069720d8a455b89b6">USBD_CustomClassn_Endpoint0_SetupPacketProcessed</a> to inform the application that setup packet has been processed by USB Device Core.</p>
<p>If custom handling of request was used and request contains data stage, USB Device Core will call <a class="el" href="group__usbd__coreFunctions__api.html#ga419d900bdd41d36494683c9534cdf281">USBD_Devicen_Endpoint0_OutDataReceived</a> and depending on return code it will call <a class="el" href="group__usbd__classFunctions__api.html#gaba68b8a4cdc472635133ffff7ad8a95f">USBD_CustomClassn_Endpoint0_OutDataReceived</a> after data expected by request was received, it will call <a class="el" href="group__usbd__coreFunctions__api.html#ga718d4b5f901b50ce6c86b78e07d21688">USBD_Devicen_Endpoint0_InDataSent</a> and depending on return code it will call <a class="el" href="group__usbd__classFunctions__api.html#gacd1d9f1538f74c858fda54889010f295">USBD_CustomClassn_Endpoint0_InDataSent</a> after data expected by request was sent.</p>
<div class="mscgraph">
<img src="msc_inline_mscgraph_7.png" alt="msc_inline_mscgraph_7" border="0" usemap="#msc_inline_mscgraph_7.map"/>
<map name="msc_inline_mscgraph_7.map" id="msc_inline_mscgraph_7.map"><area href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca" shape="rect" coords="16,104,105,117" alt=""/>
<area href="group__usbd__coreFunctions__api.html#gad97153303fc0a6f51c1c20ac050b238f" shape="rect" coords="25,155,96,168" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac327042316e9bbdb8d326caee6cffd3e" shape="rect" coords="136,218,225,231" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac327042316e9bbdb8d326caee6cffd3e" shape="rect" coords="136,231,225,244" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac327042316e9bbdb8d326caee6cffd3e" shape="rect" coords="160,244,201,257" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac327042316e9bbdb8d326caee6cffd3e" shape="rect" coords="154,257,207,270" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga7118c1dabe34bdb7b822ef11aa30bd90" shape="rect" coords="16,231,105,244" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga7118c1dabe34bdb7b822ef11aa30bd90" shape="rect" coords="52,244,69,257" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,295,225,308" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,308,225,321" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,321,225,334" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="166,334,195,347" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,347,225,360" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,417,225,430" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,430,225,443" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,443,225,456" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="166,456,195,469" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="151,469,210,482" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,482,225,495" alt=""/>
<area href="group__usbd__classFunctions__api.html#gacd1d9f1538f74c858fda54889010f295" shape="rect" coords="136,520,225,533" alt=""/>
<area href="group__usbd__classFunctions__api.html#gacd1d9f1538f74c858fda54889010f295" shape="rect" coords="136,533,225,546" alt=""/>
<area href="group__usbd__classFunctions__api.html#gacd1d9f1538f74c858fda54889010f295" shape="rect" coords="151,546,210,559" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,616,225,629" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,629,225,642" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,642,225,655" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="166,655,195,668" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="136,668,225,681" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga71d4b65ea6d404c6e588672a413d06b5" shape="rect" coords="151,681,210,694" alt=""/>
<area href="group__usbd__classFunctions__api.html#gaba68b8a4cdc472635133ffff7ad8a95f" shape="rect" coords="136,719,225,732" alt=""/>
<area href="group__usbd__classFunctions__api.html#gaba68b8a4cdc472635133ffff7ad8a95f" shape="rect" coords="136,732,225,745" alt=""/>
<area href="group__usbd__classFunctions__api.html#gaba68b8a4cdc472635133ffff7ad8a95f" shape="rect" coords="136,745,225,758" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga3e9549675ea613f44324c2a843b8a657" shape="rect" coords="16,821,105,834" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga3e9549675ea613f44324c2a843b8a657" shape="rect" coords="49,834,72,847" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga787cdff1582f1907116b7e0fb6a9358e" shape="rect" coords="256,815,345,828" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga787cdff1582f1907116b7e0fb6a9358e" shape="rect" coords="256,828,345,841" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga787cdff1582f1907116b7e0fb6a9358e" shape="rect" coords="286,841,315,854" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac0e1beb1550c7947d253186e57414dca" shape="rect" coords="376,879,465,892" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac0e1beb1550c7947d253186e57414dca" shape="rect" coords="376,892,465,905" alt=""/>
<area href="group__usbd__classFunctions__api.html#gac0e1beb1550c7947d253186e57414dca" shape="rect" coords="406,905,435,918" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga7118c1dabe34bdb7b822ef11aa30bd90" shape="rect" coords="16,924,105,937" alt=""/>
<area href="group__usbd__classFunctions__api.html#ga7118c1dabe34bdb7b822ef11aa30bd90" shape="rect" coords="52,937,69,950" alt=""/>
<area href="group__usbd__coreFunctions__api.html#ga9440f139618900f2011034e70cd7a528" shape="rect" coords="16,988,105,1001" alt=""/>
<area href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb" shape="rect" coords="16,1039,105,1052" alt=""/>
<area href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb" shape="rect" coords="52,1052,69,1065" alt=""/>
</map>
</div>
<h2><a class="anchor" id="autotoc_md49"></a>
Implementation</h2>
<p>To <a class="el" href="usbd_create_app.html">create an USB Device</a> with a Custom Class:</p><ul>
<li>Set the required number for <b>USB:Device:Custom</b> class instances during the <a class="el" href="usbd_create_app.html#RTE_Software_Component_Selection">RTE Component Selection</a>.</li>
<li>Set the parameters in the configuration file <a class="el" href="group__usbd__classFunctions__conf.html">USBD_Config_CustomClass_n.h</a>.</li>
<li>Implement the application specific behavior using one of the available <a class="el" href="group__usbd__classFunctions.html#USBD_User_UCT">templates</a>.</li>
</ul>
<p><a class="anchor" id="USBD_User_UCT"></a></p>
<h2><a class="anchor" id="autotoc_md50"></a>
User Code Templates</h2>
<p>Two  <script>link_ext('uv4_ca_sourcefiles');</script> files are available to implement the application-specific behavior:</p><ul>
<li><a class="el" href="group__usbd__classFunctions.html#USBD_User_Cust_UCT">USBD_User_CustomClass.c</a> is used for custom handling of class requests to instances of a custom class.</li>
<li><a class="el" href="group__usbd__classFunctions.html#USBD_User_Device_Cust_UCT">USBD_User_Device_n.c</a> is used for custom handling of any request coming to the USB Device. Its primary use is to allow for custom handling of standard and vendor requests, for example overriding the serial number string. It allows to intercept all incoming requests and to override the default USB Component handling.</li>
</ul>
<p>Both user code templates contain example code that can be used to demonstrate the features of the templates. Uncomment this code to see how it works on your target hardware.</p>
<p><a class="anchor" id="USBD_User_Cust_UCT"></a><b>USBD_User_CustomClass.c</b> </p>
<div class="fragment"><div class="line"><span class="comment">/*------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * MDK Middleware - Component ::USB:Device:Custom Class</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2004-2020 Arm Limited (or its affiliates). All rights reserved.</span></div>
<div class="line"><span class="comment"> *------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * Name:    USBD_User_CustomClass_%Instance%.c</span></div>
<div class="line"><span class="comment"> * Purpose: USB Device Custom Class User module</span></div>
<div class="line"><span class="comment"> * Rev.:    V6.7.4</span></div>
<div class="line"><span class="comment"> *----------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * USBD_User_CustomClass_%Instance%.c is a code template for the Custom Class %Instance% </span></div>
<div class="line"><span class="comment"> * class request handling. It allows user to handle all Custom Class class </span></div>
<div class="line"><span class="comment"> * requests.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Uncomment &quot;Example code&quot; lines to see example that receives data on </span></div>
<div class="line"><span class="comment"> * Endpoint 1 OUT and echoes it back on Endpoint 1 IN.</span></div>
<div class="line"><span class="comment"> * To try the example you also have to enable Bulk Endpoint 1 IN/OUT in Custom </span></div>
<div class="line"><span class="comment"> * Class configuration in USBD_Config_CustomClass_%Instance%.h file.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * \addtogroup usbd_custom_classFunctions</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_CustomClass]</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Driver_USBD.h&quot;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">//// Example code variable declaration/definition: </span></div>
<div class="line"><span class="comment"></span><span class="comment">//uint8_t class%Instance%_bulk_out_buf[64] = { 0 };</span></div>
<div class="line"><span class="comment">//uint8_t class%Instance%_bulk_in_buf [64] = { 0 };</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Initialize to initialize the USB Custom class instance</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Initialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Custom Class Initialization</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Uninitialize to de-initialize the USB Custom class instance</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Uninitialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Custom Class De-initialization</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called upon USB Bus Reset signaling</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Reset (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle USB Bus Reset Event</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Endpoint Start was requested (by activating interface or configuration)</span></div>
<div class="line"><span class="comment">// \param[in]     ep_addr       endpoint address.</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_EndpointStart (uint8_t ep_addr) {</div>
<div class="line">  <span class="comment">// Start communication on Endpoint</span></div>
<div class="line">  (void)ep_addr;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//  // Example code start reception on Endpoint 1 OUT: </span></div>
<div class="line"><span class="comment">//  if (ep_addr == USB_ENDPOINT_OUT(1)) {</span></div>
<div class="line"><span class="comment">//    USBD_EndpointRead(0, USB_ENDPOINT_OUT(1), class%Instance%_bulk_out_buf, 64);</span></div>
<div class="line"><span class="comment">//  }</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Endpoint Stop was requested (by de-activating interface or activating configuration 0)</span></div>
<div class="line"><span class="comment">// \param[in]     ep_addr       endpoint address.</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_EndpointStop (uint8_t ep_addr) {</div>
<div class="line">  <span class="comment">// Handle Endpoint communication stopped</span></div>
<div class="line">  (void)ep_addr;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Custom Class %Instance% received SETUP PACKET on Control Endpoint 0</span></div>
<div class="line"><span class="comment">//        (this callback will be called only for Class Requests (USB_REQUEST_CLASS) if it was not processed </span></div>
<div class="line"><span class="comment">//         previously by Device callback)</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet            pointer to received setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    buf                     pointer to data buffer used for data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    len                     pointer to number of data bytes in data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus       enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed:request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:          request was processed successfully (send Zero-Length Packet if no data stage)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:       request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_CustomClass%Instance%_Endpoint0_SetupPacketReceived (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet, uint8_t **buf, uint32_t *len) {</div>
<div class="line">  (void)buf;</div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Recipient) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_TO_DEVICE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_TO_INTERFACE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_TO_ENDPOINT:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when SETUP PACKET was processed by USB library</span></div>
<div class="line"><span class="comment">//        (this callback will be called only for Class Requests (USB_REQUEST_CLASS) if it was not processed </span></div>
<div class="line"><span class="comment">//         previously by Device callback nor by Custom Class callback)</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet            pointer to processed setup packet.</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint0_SetupPacketProcessed (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Recipient) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_TO_DEVICE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_TO_INTERFACE:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_TO_ENDPOINT:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Custom Class %Instance% received OUT DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">//        (this callback will be called only for Class Requests (USB_REQUEST_CLASS) if it was not processed </span></div>
<div class="line"><span class="comment">//         previously by Device callback)</span></div>
<div class="line"><span class="comment">// \param[in]     len                     number of received data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus       enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed:request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:          request was processed successfully (send Zero-Length Packet)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:       request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:         request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_CustomClass%Instance%_Endpoint0_OutDataReceived (uint32_t len) {</div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Custom Class %Instance% sent IN DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">//        (this callback will be called only for Class Requests (USB_REQUEST_CLASS) if it was not processed </span></div>
<div class="line"><span class="comment">//         previously by Device callback)</span></div>
<div class="line"><span class="comment">// \param[in]     len                     number of sent data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus       enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed:request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:          request was processed successfully (return ACK)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:       request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:         request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_CustomClass%Instance%_Endpoint0_InDataSent (uint32_t len) {</div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when DATA was sent or received on Endpoint n</span></div>
<div class="line"><span class="comment">// \param[in]     event                   event on Endpoint:</span></div>
<div class="line"><span class="comment">//                                          - ARM_USBD_EVENT_OUT = data OUT received</span></div>
<div class="line"><span class="comment">//                                          - ARM_USBD_EVENT_IN  = data IN  sent</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint1_Event  (uint32_t event) {<span class="comment"></span></div>
<div class="line"><span class="comment">////Example code variable declaration/definition</span></div>
<div class="line"><span class="comment"></span><span class="comment">//  uint32_t len;</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Handle Endpoint 1 events</span></div>
<div class="line">  <span class="keywordflow">if</span> (event &amp; ARM_USBD_EVENT_OUT) {     <span class="comment">// OUT event</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//    // Example code upon reception on Endpoint 1 OUT echo received data on </span></div>
<div class="line"><span class="comment">//    // Endpoint 1 IN: </span></div>
<div class="line"><span class="comment">//    // Get number of received data bytes</span></div>
<div class="line"><span class="comment">//    len = USBD_EndpointReadGetResult(0, USB_ENDPOINT_OUT(1));</span></div>
<div class="line"><span class="comment">//    // Copy received data bytes to transmit buffer</span></div>
<div class="line"><span class="comment">//    memcpy(class%Instance%_bulk_in_buf, class%Instance%_bulk_out_buf, len);</span></div>
<div class="line"><span class="comment">//    // Transmit back data bytes</span></div>
<div class="line"><span class="comment">//    USBD_EndpointWrite(0, USB_ENDPOINT_IN(1) , class%Instance%_bulk_in_buf, len);</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//    // Restart reception on Endpoint 1 OUT: </span></div>
<div class="line"><span class="comment">//    USBD_EndpointRead (0, USB_ENDPOINT_OUT(1), class%Instance%_bulk_out_buf, 64);</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (event &amp; ARM_USBD_EVENT_IN) {      <span class="comment">// IN event</span></div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint2_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 2 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint3_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 3 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint4_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 4 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint5_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 5 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint6_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 6 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint7_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 7 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint8_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 8 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint9_Event  (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 9 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint10_Event (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 10 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint11_Event (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 11 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint12_Event (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 12 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint13_Event (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 13 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint14_Event (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 14 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"><span class="keywordtype">void</span> USBD_CustomClass%Instance%_Endpoint15_Event (uint32_t event) {</div>
<div class="line">  <span class="comment">// Handle Endpoint 15 events</span></div>
<div class="line">  (void)event;</div>
<div class="line">}</div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_CustomClass]</span></div>
</div><!-- fragment --><p><a class="anchor" id="USBD_User_Device_Cust_UCT"></a><b>USBD_User_Device_<em>n</em>.c</b></p>
<div class="fragment"><div class="line"><span class="comment">/*------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * MDK Middleware - Component ::USB:Device</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2004-2024 Arm Limited (or its affiliates). All rights reserved.</span></div>
<div class="line"><span class="comment"> *------------------------------------------------------------------------------</span></div>
<div class="line"><span class="comment"> * Name:    USBD_User_Device_%Instance%.c</span></div>
<div class="line"><span class="comment"> * Purpose: USB Device User module</span></div>
<div class="line"><span class="comment"> * Rev.:    V6.8.3</span></div>
<div class="line"><span class="comment"> *----------------------------------------------------------------------------*/</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * USBD_User_Device_%Instance%.c is a code template for the user specific </span></div>
<div class="line"><span class="comment"> * Device events and Control Endpoint 0 requests handling. It allows user to </span></div>
<div class="line"><span class="comment"> * handle all user level events as well as to intercept all Control Endpoint 0 </span></div>
<div class="line"><span class="comment"> * requests and handle them overriding the default USB Library handling.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Uncomment &quot;Example code&quot; lines to override USB Device Descriptor.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * IMPORTANT NOTE!!!: Maximum packet size must not be set to less that 32 bytes!</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * \addtogroup usbd_coreFunctions_api</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_Device]</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//// Example code specifying USB Device Descriptor: </span></div>
<div class="line"><span class="comment">//// Device %Instance% USB Device Descriptor</span></div>
<div class="line"><span class="comment"></span><span class="comment">//static const uint8_t device%Instance%_dev_desc[] = {</span></div>
<div class="line"><span class="comment">//  18,                                   /* bLength            = 18 bytes      */</span></div>
<div class="line"><span class="comment">//  USB_DEVICE_DESCRIPTOR_TYPE,           /* bDescriptorType    = Device Desc   */</span></div>
<div class="line"><span class="comment">//  0x00, 0x02,                           /* bcdUSB             = 2.00          */</span></div>
<div class="line"><span class="comment">//  0x00,                                 /* bDeviceClass       = Defined in IF */</span></div>
<div class="line"><span class="comment">//  0x00,                                 /* bDeviceSubClass    = Defined in IF */</span></div>
<div class="line"><span class="comment">//  0x00,                                 /* bDeviceProtocol    = Defined in IF */</span></div>
<div class="line"><span class="comment">//  64,                                   /* bMaxPacketSize0    = 64 bytes !!! Must be same as USBD%Instance%_MAX_PACKET0 in USBD_Config_%Instance%.h */</span></div>
<div class="line"><span class="comment">//  0x51, 0xC2,                           /* idVendor           = 0xC251        */</span></div>
<div class="line"><span class="comment">//  0x01, 0x00,                           /* idProduct          = 1             */</span></div>
<div class="line"><span class="comment">//  0x00, 0x01,                           /* bcdDevice          = 1.00          */</span></div>
<div class="line"><span class="comment">//  0x01,                                 /* iManufacturer      = String1       */</span></div>
<div class="line"><span class="comment">//  0x02,                                 /* iProduct           = String2       */</span></div>
<div class="line"><span class="comment">//  0x03,                                 /* iSerialNumber      = String3       */</span></div>
<div class="line"><span class="comment">//  0x01                                  /* bNumConfigurations = 1 config      */</span></div>
<div class="line"><span class="comment">//};</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//static bool handle_request;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Initialize to initialize the USB Device</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Initialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Device Initialization</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">//  handle_request = false;</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called during USBD_Uninitialize to de-initialize the USB Device</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Uninitialize (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Handle Device De-initialization</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when VBUS level changes</span></div>
<div class="line"><span class="comment">// \param[in]     level                current VBUS level</span></div>
<div class="line"><span class="comment">//                                       - true: VBUS level is high</span></div>
<div class="line"><span class="comment">//                                       - false: VBUS level is low</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_VbusChanged (<span class="keywordtype">bool</span> level) {</div>
<div class="line">  (void)level;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called upon USB Bus Reset signaling</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Reset (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus speed was changed to high-speed</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_HighSpeedActivated (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus goes into suspend mode (no bus activity for 3 ms)</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Suspended (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when USB Bus activity resumes</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Resumed (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device was successfully enumerated</span></div>
<div class="line"><span class="comment">// \param[in]     val                  current configuration value</span></div>
<div class="line"><span class="comment">//                                       - value 0: not configured</span></div>
<div class="line"><span class="comment">//                                       - value &gt; 0: active configuration</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_ConfigurationChanged (uint8_t val) {</div>
<div class="line">  (void)val;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Set Feature for Remote Wakeup comes over Control Endpoint 0</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_EnableRemoteWakeup (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Clear Feature for Remote Wakeup comes over Control Endpoint 0</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_DisableRemoteWakeup (<span class="keywordtype">void</span>) {</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% received SETUP PACKET on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet             pointer to received setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    buf                      pointer to data buffer used for data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \param[out]    len                      pointer to number of data bytes in data stage requested by setup packet.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (send Zero-Length Packet if no data stage)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_SetupPacketReceived (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet, uint8_t **buf, uint32_t *len) {</div>
<div class="line"> </div>
<div class="line">  (void)buf;</div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Type) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_STANDARD:</div>
<div class="line"><span class="comment">//      // Example code handling Get Device Descriptor request:</span></div>
<div class="line"><span class="comment">//      if ((setup_packet-&gt;bmRequestType.Dir       == USB_REQUEST_DEVICE_TO_HOST) &amp;&amp;      // Request to get</span></div>
<div class="line"><span class="comment">//          (setup_packet-&gt;bmRequestType.Recipient == USB_REQUEST_TO_DEVICE     ) &amp;&amp;      // from device</span></div>
<div class="line"><span class="comment">//          (setup_packet-&gt;bRequest                == USB_REQUEST_GET_DESCRIPTOR) &amp;&amp;      // the descriptor</span></div>
<div class="line"><span class="comment">//         ((setup_packet-&gt;wValue &gt;&gt; 8)            == USB_DEVICE_DESCRIPTOR_TYPE) &amp;&amp;      // Device Descriptor Type</span></div>
<div class="line"><span class="comment">//          (setup_packet-&gt;wIndex                  == 0U                        )) {      // Index = 0</span></div>
<div class="line"><span class="comment">//        *buf = (uint8_t *)((uint32_t)device%Instance%_dev_desc);</span></div>
<div class="line"><span class="comment">//        *len = sizeof               (device%Instance%_dev_desc);</span></div>
<div class="line"><span class="comment">//        handle_request = true;</span></div>
<div class="line"><span class="comment">//        return usbdRequestOK;</span></div>
<div class="line"><span class="comment">//      }</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_CLASS:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_VENDOR:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_RESERVED:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when SETUP PACKET was processed by USB library</span></div>
<div class="line"><span class="comment">// \param[in]     setup_packet            pointer to processed setup packet.</span></div>
<div class="line"><span class="keywordtype">void</span> USBD_Device%Instance%_Endpoint0_SetupPacketProcessed (<span class="keyword">const</span> <a class="code hl_struct" href="group__usbd__data__types.html#structUSB__SETUP__PACKET" title="USB Setup Packet structure.">USB_SETUP_PACKET</a> *setup_packet) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (setup_packet-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#af7ad4865d238e6994874ea0f56963db0" title="Characteristics of request.">bmRequestType</a>.Type) {</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_STANDARD:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_CLASS:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_VENDOR:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> USB_REQUEST_RESERVED:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% received OUT DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     len                      number of received data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (send Zero-Length Packet)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:          request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_OutDataReceived (uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// \brief Callback function called when Device %Instance% sent IN DATA on Control Endpoint 0</span></div>
<div class="line"><span class="comment">// \param[in]     len                      number of sent data bytes.</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStatus        enumerator value indicating the function execution status</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNotProcessed: request was not processed; processing will be done by USB library</span></div>
<div class="line"><span class="comment">// \return        usbdRequestOK:           request was processed successfully (return ACK)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestStall:        request was processed but is not supported (stall Endpoint 0)</span></div>
<div class="line"><span class="comment">// \return        usbdRequestNAK:          request was processed but the device is busy (return NAK)</span></div>
<div class="line"><a class="code hl_enumeration" href="group__status__error__codes__usb.html#gaefad6fdbbf674f7d85f203e24732ca7e" title="USB Device Custom Class API enumerated constants.">usbdRequestStatus</a> USBD_Device%Instance%_Endpoint0_InDataSent (uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  (void)len;</div>
<div class="line"> </div>
<div class="line"><span class="comment">//  // Example code after Get Device Descriptor was sent:</span></div>
<div class="line"><span class="comment">//  if (handle_request) {                 // If Device Descriptor was sent</span></div>
<div class="line"><span class="comment">//    handle_request = false;</span></div>
<div class="line"><span class="comment">//    return usbdRequestOK;               // Acknowledge custom handled request</span></div>
<div class="line"><span class="comment">//  }</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="rl__usb_8h.html#gaefad6fdbbf674f7d85f203e24732ca7ea6b1574557d08fd6edd2c129acd4d3b9d" title="Request not processed.">usbdRequestNotProcessed</a>;</div>
<div class="line">}</div>
<div class="line"> <span class="comment"></span></div>
<div class="line"><span class="comment">//! [code_USBD_User_Device]</span></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
