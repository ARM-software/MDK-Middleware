<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network Component: Creating a Network Application</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "Network Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('create_app.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Creating a Network Application</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_src_2create__app"></a></p>
<p>The steps to create a microcontroller application that uses TCP/IP communication are:</p>
<ol type="1">
<li>Select <a class="el" href="#nw_RTE_Software_Component_Selection">RTE Components</a> along with the Network Services that are required for your application.</li>
<li><a class="el" href="#nw_Driver_Configuration">Enable the Network Driver and Controller</a> that is integrated in the microcontroller.</li>
<li>Configure the various <a class="el" href="#nw_Device_Configuration">Network Components</a>.</li>
<li>Configure the <a class="el" href="#nw_system_resources">system resources</a> according to the network component's <a class="el" href="resource_requirements.html">Resource Requirements</a>.</li>
<li>Implement the <a class="el" href="#nw_User_Code_Implementation">User Code</a> using code templates that are provided for the Network Component.</li>
<li><a class="el" href="#nw_debugging">Debug</a> your application using the built-in mechanisms of the Network Component.</li>
<li>Sometimes, it is necessary to change some network settings at <a class="el" href="#nw_runtime_config">runtime</a>.</li>
</ol>
<h1><a class="anchor" id="nw_RTE_Software_Component_Selection"></a>
RTE Component Selection</h1>
<p>Only a few steps are necessary to complete the RTE Component selection:</p>
<ol type="1">
<li>From the <b>Network</b> Component:<ul>
<li>Select <b>Network:CORE</b> that provides the basic functionality required for TCP/IP communication.</li>
<li>Select your desired <b>Network:Interface</b>. For example, set <b>Network:Interface:Ethernet</b> to '1' for enabling Ethernet communication.</li>
<li>Select the desired Network Services. For example, select <b>Network:Service:Web Server Compact</b> to create a simple Web Server.</li>
<li>Select the desired Network Sockets. For example, select <b>Network:Socket:TCP</b> for TCP communication. Usually, you will also select <b>Network:Socket:UDP</b> for stateless communication.</li>
</ul>
</li>
<li>From the <b>CMSIS Driver</b> Component:<ul>
<li>If you do Ethernet communication, select appropriate <b>CMSIS Driver:Ethernet (API)</b> or <b>CMSIS Driver:Ethernet MAC (API)</b> <em>and</em> <b>CMSIS Driver:Ethernet PHY (API)</b> drivers suitable for your application. For PPP or SLIP communication simply select <b>CMSIS Driver:USART (API):USART</b>. If you use wireless communication, select appropriate <b>CMSIS Driver:WiFi (API)</b> driver that supports transparent mode.</li>
</ul>
</li>
<li>From the <b>Device</b> Component:<ul>
<li>Additional device specific drivers may be required according to the validation output.</li>
</ul>
</li>
<li>From the <b>CMSIS</b> Component:<ul>
<li>Select the <b>CMSIS:CORE</b> to provide the core interface to the processor.</li>
<li>Select the <b>CMSIS:RTOS2</b> that is required for the Networking Component.</li>
</ul>
</li>
<li>If you need to <a class="el" href="secure_communication.html">secure the communication</a>, select from the <b>Security</b> Component:<ul>
<li><b>mbed TLS</b></li>
</ul>
</li>
</ol>
<div class="image">
<img src="nw_rte_comp_selection.png" alt=""/>
<div class="caption">
RTE Component Selection Example</div></div>
    <h1><a class="anchor" id="nw_Driver_Configuration"></a>
Network Driver and Controller Configuration</h1>
<p>The Network Device Driver and the Network Controller of the microcontroller need to be correctly configured. This means:</p>
<ul>
<li>The <a class="el" href="group__netETH__Func.html">Ethernet interface</a> or <b>UART</b> (for <a class="el" href="group__netSLIP__Func.html">SLIP</a>/<a class="el" href="group__netPPP__Func.html">PPP</a>) is typically configured in the RTE_Device.h configuration file. While this file provides multiple options, it is typically sufficient to enable the Ethernet/UART interface. <b>Note</b>: Some microcontrollers may require settings that are related to a physical layer interface (PHY).</li>
<li>The Network Controller of the microcontroller typically needs specific clock settings. Consult the user's guide of the microcontroller to understand the requirements. Alternatively, you may copy the setup of an <a class="el" href="examples.html">Examples</a> that is provided for various evaluation boards.</li>
</ul>
<h1><a class="anchor" id="nw_PHY_Configuration"></a>
Ethernet PHY Configuration</h1>
<p>For Ethernet network communication, usually an external Ethernet PHY is required to interface the physical line to the digital MAC of the microcontroller device. The MAC usually contains two buses:</p>
<ol type="1">
<li>Data bus: <a href="https://en.wikipedia.org/wiki/Media-independent_interface">MII, RMII,</a> or Serial Network Interface (SNI)</li>
<li>Management bus: Serial Management Interface (<b>SMI</b>) (using MDC and MDIO)</li>
</ol>
<p>SMI is used to access the PHY’s internal registers to read the state of the link (up/down), duplex mode, speed, and to restart auto-negotiation etc. SMI is a serial bus, which allows to connect up to 32 devices. Devices on the bus are accessed using a 5-bit device address. A default device address is hardware configurable by pin-strapping on the device (some pins are sampled when a reset is asserted or at power-up).</p>
<p>The device’s internal weak pull-up or pull-down resistors define a default device address. This address can be changed by connecting strong pull-up or pull-down resistors externally. In this case, the <code>ETH_PHY_ADDR</code> in the PHY driver needs to be changed accordingly to be able to control the PHY and to communicate with it. In µVision use the <b>Options for Component</b> dialog to override the default setting for <code>ETH_PHY_ADDR</code>:</p>
<div class="image">
<img src="eth_phy_config.png" alt=""/>
<div class="caption">
Ethernet PHY Configuration</div></div>
    <h1><a class="anchor" id="nw_Device_Configuration"></a>
Network Configuration</h1>
<p>All configuration files for the Network Component are listed in the Project window below the Component Class <b>Network</b>.</p>
<h2><a class="anchor" id="nw_Network_Core"></a>
Network Core</h2>
<div class="image">
<img src="net_config_h.png" alt=""/>
<div class="caption">
Net_Config.h Configuration File</div></div>
    <p>The configuration file Network Core <code>Net_Config.h</code> contains the setting for the library version to be used in the application.</p>
<p>The following <b>Variant</b> options are available:</p>
<ul>
<li><b>IPv4 only</b> is a pure IPv4 implementation. This choice saves some system resources if no IPv6 networking is used in the application.</li>
<li><b>IPv4/IPv6 dual stack</b> implements both IPv4 and IPv6 internet protocols.</li>
</ul>
<p>The <b>Local Host Name</b> specifies a name under which the network device can be accessed on a local area network (<b>LAN</b>). This requires a <a class="el" href="group__using__ethernet__interfaces__conf.html">NetBIOS Name Service</a> to be enabled in the configuration. This name is very useful if you don't know the IP address that has been assigned to your device by the DHCP server.</p>
<p>The <b>Memory Pool Size</b> specifies the amount of RAM in bytes allocated for the memory pool. The buffers for the network packets are allocated from this memory pool. Usually, the default value of 12000 bytes is sufficient.</p>
<p>Many <a class="el" href="group__netServices.html">Network Services</a> are started by the Network Core automatically. If you disable <b>Start System Services</b>, you need to enable/start them at runtime using the dedicated functions for that.</p>
<p>To change the default OS resource settings for the Network Core, use <b>Core Thread Stack Size</b>. The default value is 2048 bytes. The default Core Thread priority is <b>osPriorityNormal</b>. You can change this priority by changing the <code>NET_THREAD_PRIORITY</code> defined in this configuration file. This priority must be lower than the priorities of the network interface threads.</p>
<h2><a class="anchor" id="nw_Network_Interface"></a>
Network Interface</h2>
<p>The Network Interface configuration files <b>Net_Config_Interface_n.h</b> contain general IP address and other settings. You also need to specify the hardware driver number that is to be used with the network interface. In case of Ethernet for example, this is usually 0. If you are using a SLIP or PPP over a serial connection, you need to specify the hardware driver number of the exact UART you wish to use. All settings for the different interfaces are described here:</p>
<ul>
<li><a class="el" href="group__using__ethernet__interfaces__conf.html">Net_Config_ETH_0.h</a></li>
<li><a class="el" href="group__using__wifi__interfaces__conf.html">Net_Config_WiFi_0.h</a></li>
<li><a class="el" href="group__using__ppp__interfaces__conf.html">Net_Config_PPP.h</a></li>
<li><a class="el" href="group__using__slip__interfaces__conf.html">Net_Config_SLIP.h</a></li>
</ul>
<h2><a class="anchor" id="nw_Network_Socket"></a>
Network Socket</h2>
<p>Usually, the needs of most applications are served by using the default settings for the sockets. Of course, there are configuration files for all three socket types that are specified in</p>
<ul>
<li><a class="el" href="group__using__network__sockets__bsd__conf.html">Net_Config_BSD.h</a></li>
<li><a class="el" href="group__using__network__sockets__tcp__conf.html">Net_Config_TCP.h</a></li>
<li><a class="el" href="group__using__network__sockets__udp__conf.html">Net_Config_UDP.h</a></li>
</ul>
<h2><a class="anchor" id="nw_Network_Service"></a>
Network Service</h2>
<p>The configuration files for all the Network Services are explained in the respective section:</p>
<ul>
<li><a class="el" href="group__ws__configuration.html">Net_Config_HTTP_Server.h</a></li>
<li><a class="el" href="group__using__ftp__server__conf.html">Net_Config_FTP_Server.h</a></li>
<li><a class="el" href="group__using__ftpc__conf.html">Net_Config_FTP_Client.h</a></li>
<li><a class="el" href="group__using__tftp__server__conf.html">Net_Config_TFTP_Server.h</a></li>
<li><a class="el" href="group__using__tftpc__conf.html">Net_Config_TFTP_Client.h</a></li>
<li><a class="el" href="group__telnet__server__conf.html">Net_Config_Telnet_Server.h</a></li>
<li><a class="el" href="group__using__snmp__agent__conf.html">Net_Config_SNMP_Agent.h</a></li>
<li><a class="el" href="group__using__dns__client__conf.html">Net_Config_DNS_Client.h</a></li>
<li><a class="el" href="group__using__sntp__client__conf.html">Net_Config_SNTP_Client.h</a></li>
<li><a class="el" href="group__using__smtpc__conf.html">Net_Config_SMTP_Client.h</a></li>
</ul>
<h1><a class="anchor" id="nw_security_config"></a>
Security Configuration</h1>
<p>The mbed TLS component provides an API for <a class="el" href="secure_communication.html">secure communication</a>. When selecting this software component, the mbedTLS_config.h configuration file is added to the project. The proper usage of this file is out of the scope of this document. For further information, check the online documentation of  <script>link_ext('mbedTLS');</script>.</p>
<h1><a class="anchor" id="nw_system_resources"></a>
System Resource Configuration</h1>
<p>For proper operation, the Network Component requires some system configuration settings. The requirements are:</p>
<ul>
<li>Additional <b>main stack size</b> of <b>512 bytes</b>.</li>
<li>Additional two <b>threads</b> when Ethernet Interface is enabled (<code>netCore_Thread</code> and <code>netETH_Thread</code>).<ul>
<li>If <b>RTX v5</b> is used, no changes to the <b>RTX settings</b> are required as all resources are statically allocated.</li>
</ul>
</li>
</ul>
<p>For more information, check the Network Component's <a class="el" href="resource_requirements.html">Resource Requirements</a> section.</p>
<h1><a class="anchor" id="nw_User_Code_Implementation"></a>
User Code Implementation</h1>
<p>Before using the networking communications, the Network Core must be initialized with the function <a class="el" href="group__system__user__api.html#ga0c68e74df79a37750413f72518f63f73">netInitialize</a>. The function initializes the Network system resources and creates threads and other RTOS objects. The initialization is usually executed from the <b>app_main</b> thread.</p>
<p>The initialization process is different depending on which network interface is used:</p>
<ul>
<li><b>Ethernet interface</b> <div class="fragment"><div class="line"><span class="keywordtype">void</span> app_main_thread (<span class="keywordtype">void</span> *argument) {</div>
<div class="line">  (void)argument;</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__system__user__api.html#ga0c68e74df79a37750413f72518f63f73" title="Initialize Network Component and interfaces. [not_thread-safe].">netInitialize</a> ();</div>
<div class="line"> </div>
<div class="line">  osThreadExit();</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><b>WiFi interface</b> <div class="fragment"><div class="line"><span class="keywordtype">void</span> app_main_thread (<span class="keywordtype">void</span> *argument) {</div>
<div class="line">  <a class="code hl_struct" href="group__Wifi__structs.html#structNET__WIFI__CONFIG" title="WiFi Configuration.">NET_WIFI_CONFIG</a> wifi_config;</div>
<div class="line">  (void)argument;</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__system__user__api.html#ga0c68e74df79a37750413f72518f63f73" title="Initialize Network Component and interfaces. [not_thread-safe].">netInitialize</a> ();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Configure wireless parameters</span></div>
<div class="line">  wifi_config.<a class="code hl_variable" href="group__Wifi__structs.html#a587ba0cb07f02913598610049a3bbb79" title="Network name, a null-terminated string.">ssid</a>       = <span class="stringliteral">&quot;GuestAccess&quot;</span>;</div>
<div class="line">  wifi_config.<a class="code hl_variable" href="group__Wifi__structs.html#aa4a2ebcb494493f648ae1e6975672575" title="Password, a null-terminated string.">password</a>   = <span class="stringliteral">&quot;guest&quot;</span>;</div>
<div class="line">  wifi_config.<a class="code hl_variable" href="group__Wifi__structs.html#aec30474f97bb7bcc198d8d36b646f4f0" title="Security type.">security</a>   = <a class="code hl_enumvalue" href="rl__net_8h.html#ga47b4f67d1bf39195b04faa194294b2dcaba44563e1f60cea0f2b6f23db50ee0db" title="WiFi Protected Access 2.">netWiFi_SecurityWPA2</a>;</div>
<div class="line">  wifi_config.<a class="code hl_variable" href="group__Wifi__structs.html#a715f5cb061d11eb75981741eda4dafcd" title="WiFi Channel (0=auto)">channel</a>    = 0;</div>
<div class="line">  wifi_config.<a class="code hl_variable" href="group__Wifi__structs.html#afe897994ccb1383db83bc3355e69b5a7" title="WiFi Protected Setup method.">wps_method</a> = <a class="code hl_enumvalue" href="rl__net_8h.html#ga923615425840e0578bc76e8ba1b9147ea21b783b9fc36e1efdfbd6e429c083a99" title="Not used.">netWiFi_WPS_None</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Connect to wireless network</span></div>
<div class="line">  <a class="code hl_function" href="group__wifi__user__api.html#gad5f9a8d136edec8f731af4c0f43e5b15" title="Activate the WiFi interface. [thread-safe].">netWiFi_Activate</a> (0, &amp;wifi_config);</div>
<div class="line"> </div>
<div class="line">  osThreadExit();</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><b>PPP interface</b> <div class="fragment"><div class="line"><span class="keywordtype">void</span> app_main_thread (<span class="keywordtype">void</span> *argument) {</div>
<div class="line">  (void)argument;</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__system__user__api.html#ga0c68e74df79a37750413f72518f63f73" title="Initialize Network Component and interfaces. [not_thread-safe].">netInitialize</a> ();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Connect to remote PPP server</span></div>
<div class="line">  <a class="code hl_function" href="group__ppp__user__api.html#gaff5343f51863e458736684f4d6bc5e91" title="Start a dial-up connection to remote PPP server. [thread-safe].">netPPP_Connect</a> (<span class="stringliteral">&quot;04213372&quot;</span>, <span class="stringliteral">&quot;Guest&quot;</span>, <span class="stringliteral">&quot;test&quot;</span>)</div>
<div class="line"> </div>
<div class="line">  osThreadExit();</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md0"></a>
User Code Templates</h2>
<p> <script>link_ext('uv4_ca_sourcefiles');</script> files provide access to all functions that are required to communicate over the Network. The available functions are explained in the <a href="./topics.html">Reference</a> section of the Network Component. These routines can be adapted to the needs of the microcontroller application, in case more functionality is needed.</p>
<p>The following templates are available for the Network component:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Template Name   </th><th class="markdownTableHeadNone">User Functions    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DNS_Client.c   </td><td class="markdownTableBodyNone"><code>dns_cbfunc</code> (Callback function for notification about DNS client events), <code>resolve_host</code> (DNS resolving process)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FTP_Client_UIF.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ftpc__operation.html#ga2d45d1e964d8960971fb852b45f4cdf8">netFTPc_Process</a> (Request parameters for FTP client session), <a class="el" href="group__ftpc__operation.html#ga6c61683ecd364f193ceebd3aa6974288">netFTPc_Notify</a> (Notify the user application when FTP client operation ends)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FTP_Server_Access.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ftp__access__filter__mui.html#ga38c2ff05058bdb0ca8b3c122bffc4bb9">netFTPs_AcceptClient</a> (Accept or deny connection from remote FTP client)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FTP_Server_Event.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ftp__user__notification.html#ga32dd710872b1d0a7d244af76f942d807">netFTPs_Notify</a> (Notify the user application about events in FTP server service)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FTP_Server_Multiuser.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ftp__access__filter__mui.html#gab204f191fe2ed707562ca0246dab0617">netFTPs_CheckUsername</a> (Check if an user account exists), <a class="el" href="group__ftp__access__filter__mui.html#ga100ca730f5e9e891ede74caf51d0ce3a">netFTPs_CheckPassword</a> (Check user account password), <a class="el" href="group__ftp__access__filter__mui.html#ga946cfca1047c9d91737ba310ba4f2238">netFTPs_FileAccess</a> (Check if remote user is allowed to access a file)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HTTP_Server_Access.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ws__access__filtering__mui.html#gaf36a37f99a76e8ca958fbde377cee73d">netHTTPs_AcceptClient</a> (Accept or deny connection from remote HTTP client)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP_Server_CGI.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ws__cgi__script.html#ga7d01432d1adc6a5a0e21eacd82d55910">netCGI_ProcessQuery</a> (Process query string received by GET request), <a class="el" href="group__ws__cgi__script.html#gafa3ddab948908d6fd4926fe3a3da06e9">netCGI_ProcessData</a> (Process data received by POST request), <a class="el" href="group__ws__cgi__script.html#ga5203e3a1a0f95a8b76fb83bec73e4be8">netCGI_Script</a> (Generate dynamic web data from a script line)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HTTP_Server_Error.c   </td><td class="markdownTableBodyNone"><code>net_http_error</code> (Define user-friendly HTTP error messages)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">HTTP_Server_Multiuser.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__ws__access__filtering__mui.html#gaee074414cedf60bc3d259f6647d67e0d">netHTTPs_CheckAccount</a> (Check if an user account exists), <a class="el" href="group__ws__access__filtering__mui.html#ga5844644be087d719f4d4f7e7e92993e4">netHTTPs_FileAccess</a> (Check if remote user is allowed to access a file)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SMTP_Client_UIF.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__smtpc__operation.html#ga9f299f586e428d9a005c1ca9668fd7b3">netSMTPc_Process</a> (Request parameters for SMTP client session), <a class="el" href="group__smtpc__operation.html#ga5240c89a181c1ddb07bbe888a6a8657f">netSMTPc_Notify</a> (Notify the user application when SMTP client operation ends), <a class="el" href="group__smtpc__operation.html#ga58a7a56c6bda480e21591ee33c028aa5">netSMTPc_AcceptAuthentication</a> (Accept or deny authentication requested by SMTP server)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SNMP_Agent_MIB.c   </td><td class="markdownTableBodyNone"><code>mib_table</code> (Defines MIB information data table), <code>register_mib_table</code> (Registers a MIB table in SNMP agent)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TCP_Socket_Client.c   </td><td class="markdownTableBodyNone"><code>tcp_cb_client</code> (Notify the user application about TCP socket events), <code>send_data</code> (Connect to TCP server and send data)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TCP_Socket_Server.c   </td><td class="markdownTableBodyNone"><code>tcp_cb_server</code> (Notify the user application about TCP socket events)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Telnet_Server_Access.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__telnet__access__filter__mui.html#ga3ec99f8332f7734909fb66808daca8f4">netTELNETs_AcceptClient</a> (Accept or deny connection from remote Telnet client)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Telnet_Server_Multiuser.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__telnet__access__filter__mui.html#ga73d0d9e1ca34deaef1a4d0ae60e4f899">netTELNETs_CheckUsername</a> (Check if an user account exists), <a class="el" href="group__telnet__access__filter__mui.html#ga2ce267a4349c5723e02eee6e22149bb8">netTELNETs_CheckPassword</a> (Check user account password)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Telnet_Server_UIF.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__telnet__user__notification.html#ga66dbef28a03b6885922151c38bf3b0e2">netTELNETs_ProcessMessage</a> (Request message for Telnet server session), <a class="el" href="group__telnet__user__notification.html#gae28cb4a796ee5e59ad5e32dccc969c76">netTELNETs_ProcessCommand</a> (Process a command and generate response)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TFTP_Client_UIF.c   </td><td class="markdownTableBodyNone"><code>tftp_client_notify</code> (Notify the user application when TFTP client operation ends)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TFTP_Server_Access.c   </td><td class="markdownTableBodyNone"><a class="el" href="group__tftp__server__access.html#gab05c8ba4e93e67235ca3ac5e955288f4">netTFTPs_AcceptClient</a> (Accept or deny connection from remote TFTP client)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UDP_Socket.c   </td><td class="markdownTableBodyNone"><code>udp_cb_func</code> (Notify the user application about UDP socket events), <code>send_udp_data</code> (Send UDP data to destination client)   </td></tr>
</table>
<h1><a class="anchor" id="nw_debugging"></a>
Debugging</h1>
<p>Network Component can be easily configured to generate debug events and provide dynamic visibility to the component operation.</p>
<p>Network supports event annotations for the  <script>link_ext('Event-Recorder-About');</script> and makes it very easy to analyze the internal operation of the Network Component during application debugging. The old <a class="el" href="#netDebugStdio">STDIO</a> debug, which outputs event information as ASCII messages on the standard output device, is also supported.</p>
<h2><a class="anchor" id="netDebugConfig"></a>
Debug Configuration</h2>
<p>The Network Component debug is configured using the <code>Net_Debug.h</code> file. The options are set in the file directly or using the <a href="https://developer.arm.com/documentation/101407/0539/Utilities/Configuration-Wizard">Configuration Wizard</a>.</p>
<div class="image">
<img src="net_debug_h.png" alt=""/>
<div class="caption">
Net_Debug.h Configuration File</div></div>
    <p>The following settings are available:</p>
<ul>
<li><b>Network Debug</b> enables or disables the debug mode.</li>
<li><b>Output Channel</b> selects where the diagnostic messages are to be sent:<ul>
<li> <script>link_ext('Event-Recorder-About');</script> outputs event messages to event recorder.</li>
<li><a class="el" href="#netDebugStdio">STDIO</a> outputs diagnostic messages on the standard output device.</li>
<li><a class="el" href="#netDebugStdio">STDIO + Timestamp</a> additionally prints the time information with debug messages.</li>
</ul>
</li>
</ul>
<p>The debugging configuration settings are divided into groups that can be activated separately:</p>
<ul>
<li><b>System</b> enables memory allocation and interface diagnostics.</li>
<li><b>IPv4</b> enables IP version 4 network layer diagnostics.</li>
<li><b>IPv6</b> enables IP version 6 network layer diagnostics.</li>
<li><b>Socket</b> enables socket layer diagnostics.</li>
<li><b>Service</b> enables service layer diagnostics.</li>
</ul>
<h3><a class="anchor" id="netDebugLevels"></a>
Debug Levels</h3>
<p>The system consists of several modules that output diagnostic messages. It is possible to configure the debug output for each module separately. The <b>Debug level</b> for each module defines what kind of debug messages are output:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Level   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Off   </td><td class="markdownTableBodyNone">The debug messages for the selected module are <b>disabled</b>.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Errors   </td><td class="markdownTableBodyNone">Only error messages are output. This mode is useful for error tracking.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">All   </td><td class="markdownTableBodyNone">In this mode, <b>all</b> debug messages are output.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1"></a>
Event filtering</h3>
<p>The Network debug variant generates lots of debug events. This might have an impact on the operation of the Network library. It is a good idea to disable debug for modules, which are not used, or at least to reduce the number of messages, that are generated. Therefore, enable <b>Error</b> events for such modules and enable <b>All</b> debug events only for the modules you are focused on.</p>
<h2><a class="anchor" id="netEvrSupport"></a>
Event Recorder</h2>
<p> <script>link_ext('Event-Recorder-About');</script> is a powerful tool that provides visibility to the dynamic execution of the program. The Network Component generates a broad set of <a class="el" href="group__net__evr.html">Debug Events</a> for the Event Recorder and implements required infrastructure to interface with it.</p>
<p>To use the Event Recorder together with Network Component, it is required to create an image with event generation support. The necessary steps are:</p>
<ol type="1">
<li><a class="el" href="#netDebugConfig">Select Debug mode</a>: in the <code>Net_Config.h</code> enable the <b>Network Debug</b> and select <code>Event Recorder</code> for <b>Output Channel</b>.</li>
<li> <script>link_ext('Event-Recorder-Enable');</script>: in the RTE management dialog enable the software component <b>CMSIS-View:Event Recorder</b>.</li>
<li> <script>link_ext('Event-Recorder-Initialize');</script>: in the application code, call the function <b>EventRecorderInitialize</b>.</li>
<li> <script>link_ext('Event-Recorder-Configure');</script>: if necessary, adjust default Event Recorder configuration.</li>
<li>Configure the <a class="el" href="#netDebugLevels">Debug Levels</a>.</li>
<li>Build the application code, download it to the target hardware and start debug session.</li>
</ol>
<p>Now, when the network services generate event information, it can be viewed in the  <script>link_ext('uv4-Event-Recorder');</script>.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Event IDs</h3>
<p>The network component uses the following event IDs:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Event ID    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_SYS   </td><td class="markdownTableBodyNone">0xC0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_MEM   </td><td class="markdownTableBodyNone">0xC1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_ETH   </td><td class="markdownTableBodyNone">0xC2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_WiFi   </td><td class="markdownTableBodyNone">0xDD    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_PPP   </td><td class="markdownTableBodyNone">0xC3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_SLIP   </td><td class="markdownTableBodyNone">0xC4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_LOOP   </td><td class="markdownTableBodyNone">0xC5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_IP4   </td><td class="markdownTableBodyNone">0xC6    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_ICMP   </td><td class="markdownTableBodyNone">0xC7    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_IGMP   </td><td class="markdownTableBodyNone">0xC8    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_NBNS   </td><td class="markdownTableBodyNone">0xC9    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_DHCP   </td><td class="markdownTableBodyNone">0xCA    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_ARP   </td><td class="markdownTableBodyNone">0xCB    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_IP6   </td><td class="markdownTableBodyNone">0xCC    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_ICMP6   </td><td class="markdownTableBodyNone">0xCD    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_DHCP6   </td><td class="markdownTableBodyNone">0xCE    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_NDP   </td><td class="markdownTableBodyNone">0xCF    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_MLD   </td><td class="markdownTableBodyNone">0xDE    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_UDP   </td><td class="markdownTableBodyNone">0xD0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_TCP   </td><td class="markdownTableBodyNone">0xD1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_BSD   </td><td class="markdownTableBodyNone">0xD2    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_HTTPs   </td><td class="markdownTableBodyNone">0xD3    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_FTPs   </td><td class="markdownTableBodyNone">0xD4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_FTPc   </td><td class="markdownTableBodyNone">0xD5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_Teln   </td><td class="markdownTableBodyNone">0xD6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_TFTPs   </td><td class="markdownTableBodyNone">0xD7    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_TFTPc   </td><td class="markdownTableBodyNone">0xD8    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_SMTP   </td><td class="markdownTableBodyNone">0xD9    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_DNS   </td><td class="markdownTableBodyNone">0xDA    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Net_SNMP   </td><td class="markdownTableBodyNone">0xDB    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Net_SNTP   </td><td class="markdownTableBodyNone">0xDC   </td></tr>
</table>
<h2><a class="anchor" id="netDebugStdio"></a>
STDIO Debug</h2>
<p>STDIO Debug is a legacy debug variant that prints event information as ASCII messages to a standard IO port. It is generally less feature-rich and slower than the debug with <a class="el" href="#netEvrSupport">Event Recorder</a> and is not recommended for new projects.</p>
<p>To enable STDIO debugging together with the Network Component, it is required to create an image that generates event information. The necessary steps are:</p>
<ol type="1">
<li><a class="el" href="#netDebugConfig">Select Debug mode</a>: in the <code>Net_Config.h</code> enable the <b>Network Debug</b> and select <code>STDIO + Timestamp</code> or <code>STDIO</code> for <b>Output Channel</b>.</li>
<li>In the RTE management dialog enable <b>CMSIS-Compiler:CORE</b> and <b>CMSIS-Compiler:STDOUT</b> components and select its <code>ITM</code> variant.</li>
<li>Configure the <a class="el" href="#netDebugLevels">Debug Levels</a>.</li>
<li>Build the application code and download it to the target hardware.</li>
</ol>
<h3><a class="anchor" id="autotoc_md3"></a>
Module IDs</h3>
<p>The owner module of the displayed debug message is identified by the message prefix. The following system and application modules are configurable for debugging:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">ID   </th><th class="markdownTableHeadNone">Module   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SYS   </td><td class="markdownTableBodyNone">System Core   </td><td class="markdownTableBodyNone">Handles Network system operation.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MEM   </td><td class="markdownTableBodyNone">Memory Management   </td><td class="markdownTableBodyNone">Allocates and releases frame buffers.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ETH   </td><td class="markdownTableBodyNone">ETH Interface   </td><td class="markdownTableBodyNone">Handles Ethernet link.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">WIFI   </td><td class="markdownTableBodyNone">WiFi Interface   </td><td class="markdownTableBodyNone">Handles wireless network link.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PPP   </td><td class="markdownTableBodyNone">PPP Interface   </td><td class="markdownTableBodyNone">Handles serial line direct or modem connection PPP link.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SLIP   </td><td class="markdownTableBodyNone">SLIP Interface   </td><td class="markdownTableBodyNone">Handles serial line direct or modem connection SLIP link.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOOP   </td><td class="markdownTableBodyNone">Loopback Interface   </td><td class="markdownTableBodyNone">Handles localhost loopback interface.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">IP4   </td><td class="markdownTableBodyNone">IPv4 Core   </td><td class="markdownTableBodyNone">Processes the IP version 4 network layer.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ICMP   </td><td class="markdownTableBodyNone">Control Message (ICMP)   </td><td class="markdownTableBodyNone">Processes ICMP messages. Best known example is the ping.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ARP   </td><td class="markdownTableBodyNone">Address Resolution (ARP)   </td><td class="markdownTableBodyNone">Handles Ethernet MAC address resolution and caching.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">IGMP   </td><td class="markdownTableBodyNone">Group Management (IGMP)   </td><td class="markdownTableBodyNone">Processes IGMP messages, Hosts groups and IP Multicasting.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NBNS   </td><td class="markdownTableBodyNone">NBNS Client   </td><td class="markdownTableBodyNone">The NetBIOS Name Service maintains name access to your hardware.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DHCP   </td><td class="markdownTableBodyNone">DHCP Client   </td><td class="markdownTableBodyNone">Handles automatic configuration of IP address, Net mask, Default Gateway, and Primary and Secondary DNS servers.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">IP6   </td><td class="markdownTableBodyNone">IPv6 Core   </td><td class="markdownTableBodyNone">Processes the IP version 6 network layer.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ICMP6   </td><td class="markdownTableBodyNone">Control Message (ICMP6)   </td><td class="markdownTableBodyNone">Processes ICMP version 6 messages. Best known example is the ping.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NDP   </td><td class="markdownTableBodyNone">Neighbor Discovery (NDP)   </td><td class="markdownTableBodyNone">Handles Neighbor Discovery MAC address resolution and caching.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MLD   </td><td class="markdownTableBodyNone">Multicast Listener Discovery (MLD)   </td><td class="markdownTableBodyNone">Handles Neighbor Discovery MAC address resolution and caching.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">DHCP6   </td><td class="markdownTableBodyNone">DHCP6 Client   </td><td class="markdownTableBodyNone">Handles automatic configuration of IP address in IP version 6.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UDP   </td><td class="markdownTableBodyNone">UDP Socket   </td><td class="markdownTableBodyNone">Processes UDP frames.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TCP   </td><td class="markdownTableBodyNone">TCP Socket   </td><td class="markdownTableBodyNone">Processes TCP frames.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BSD   </td><td class="markdownTableBodyNone">BSD Socket   </td><td class="markdownTableBodyNone">Processes TCP and UDP frames via standard BSD Sockets API.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">HTTP   </td><td class="markdownTableBodyNone">HTTP Server   </td><td class="markdownTableBodyNone">Delivers web pages on the request to web clients.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FTP   </td><td class="markdownTableBodyNone">FTP Server   </td><td class="markdownTableBodyNone">Manages the files stored on the server and serves the file requests received from the clients.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FTPC   </td><td class="markdownTableBodyNone">FTP Client   </td><td class="markdownTableBodyNone">Connects to FTP server to transfer files on the server, and to manage files stored on the server.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TELN   </td><td class="markdownTableBodyNone">Telnet Server   </td><td class="markdownTableBodyNone">Allows remote clients to control the system using the command line interface.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">TFTP   </td><td class="markdownTableBodyNone">TFTP Server   </td><td class="markdownTableBodyNone">A simple service which allows you to send files to or read files from the server.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">TFTPC   </td><td class="markdownTableBodyNone">TFTP Client   </td><td class="markdownTableBodyNone">Connects to TFTP server to send or receive files.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SMTP   </td><td class="markdownTableBodyNone">SMTP Client   </td><td class="markdownTableBodyNone">Connects to SMTP server to send emails.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">DNS   </td><td class="markdownTableBodyNone">DNS Client   </td><td class="markdownTableBodyNone">Handles the resolution of the IP address from a host name.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SNMP   </td><td class="markdownTableBodyNone">SNMP Agent   </td><td class="markdownTableBodyNone">Manages devices on IP network.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SNTP   </td><td class="markdownTableBodyNone">SNTP Client   </td><td class="markdownTableBodyNone">Manages clock synchronization over the network.   </td></tr>
</table>
<p>An example of the debug output is:</p>
<div class="fragment"><div class="line">015.0 ETH:*** Processing frame ***</div>
<div class="line">015.0 ETH: DstMAC 1E-30-6C-A2-45-5E</div>
<div class="line">015.0 ETH: SrcMAC 00-11-43-A4-FE-40</div>
<div class="line">015.0 ETH: Proto IP4, 66 bytes</div>
<div class="line">015.0 IP4:*** Processing frame ***</div>
<div class="line">015.0 IP4: SrcAddr 192.168.0.5</div>
<div class="line">015.0 IP4: DstAddr 192.168.0.150</div>
<div class="line">015.0 IP4: Proto TCP, Id=0x0622</div>
<div class="line">015.0 IP4: Length 52 bytes</div>
<div class="line">015.0 TCP:*** Processing frame ***</div>
<div class="line">015.0 TCP: Ports  : Src=49232, Dst=80</div>
<div class="line">015.0 TCP: Segment: Seq=0x31EDC88C, Ack=0x0</div>
<div class="line">015.0 TCP: Control: [SYN] Win=8192, Cks=0x0C67</div>
<div class="line">015.0 TCP: Mapped to Socket 1, state LISTEN</div>
<div class="line">015.0 TCP:Process Options, 12 bytes</div>
<div class="line">015.0 TCP: Opt-MSS: 1440</div>
<div class="line">015.0 TCP: SendWin: 8192</div>
<div class="line">015.0 TCP: RTO=4000ms (sa=0, sv=40)</div>
<div class="line">015.0 TCP: Next state SYN_REC</div>
</div><!-- fragment --><p>In the above example, Ethernet, IP and TCP debug messages are enabled:</p>
<ul>
<li>Received Ethernet packets are processed by the Ethernet layer and a debug message containing Ethernet header information is printed out. Ethernet debug information contains source and destination MAC address, Ethernet frame length and Ethernet protocol type.</li>
<li>The packet is then passed to the IP layer. IP layer prints out IP debug messages containing the IP header information such as source and destination IP address, frame length, protocol type etc.</li>
<li>When the IP layer has processed the packet, the packet is passed to the upper TCP layer. TCP layer prints out TCP debug messages containing the TCP header information such as source and destination ports, sequence and acknowledge numbers, checksum value, frame length etc.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>If the debug mode is used on a high traffic LAN, the system might block. Reduce the amount of printed debug messages in <code>Net_Debug.h</code> configuration or disable the debug mode completely.</li>
<li>Printing debug messages blocks out the system task scheduler during the time when the message is being sent from the serial port. The incoming IP packets accumulate in the memory. This soon causes an <b>out of memory</b> error. Any further incoming packets are lost until some memory is released.</li>
</ul>
</dd></dl>
<h1><a class="anchor" id="nw_runtime_config"></a>
Runtime Configuration</h1>
<p>It is often necessary to change the parameters and mode of operation of the network interface at startup or runtime. System control functions allow reading and changing the settings of the network interface and the system (for example the <a href="https://en.wikipedia.org/wiki/Hostname">hostname</a>).</p>
<p>This is required for using the same application code for serial production of embedded devices. The <b>runtime configuration</b> feature enables reading of configuration parameters from an EEPROM or SD Card and configuring the network interface for each embedded device differently.</p>
<p>To control the network interface options, you can use:</p>
<ul>
<li><a class="el" href="group__common__user__api.html#gadbf28bb56266770f9b1d276c48c13d36">netIF_GetOption</a> function to retrieve the options</li>
<li><a class="el" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6">netIF_SetOption</a> function to set the options</li>
<li><a class="el" href="group__common__user__api.html#ga7e16ce8f65945bfc49bee15172d6ad41">netIF_SetDefault</a> function to set default interface for internet access</li>
</ul>
<p>The options which can be changed are defined in the <a class="el" href="group__netInterfaces__Enums.html#ga2e0460c920b348a8633c2e54ceecbed5">netIF_Option</a> enumerator. However, some interfaces do not support the complete set of available options. For example, the PPP interface does not have a MAC address. If you try to modify an unsupported option, an error is returned.</p>
<p>The <a href="https://en.wikipedia.org/wiki/Localhost">localhost</a> name is used to access the embedded system without knowledge of its IP address. <a class="el" href="group__system__user__api.html#ga6eda1bb2895a98252a851160c15111a5">netSYS_GetHostName</a> is used to retrieve the localhost name, whereas <a class="el" href="group__system__user__api.html#ga141ae4581698cb95e5fc5c8458fa9710">netSYS_SetHostName</a> changes the localhost name.</p>
<p>The <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">DHCP</a> client can be disabled or enabled at runtime. When disabled, the user provided network parameters defined in the <code>Net_Config_ETH_0.h</code> or <code>Net_Config_WiFi_0.h</code> configuration files are used. Switch the state of the DHCP client using <a class="el" href="group__common__user__api.html#gad8ddb783cbb076297f64c3aa13a7d930">netDHCP_Disable</a> and <a class="el" href="group__common__user__api.html#gace7634f951ec523cccc505b5d2ffd5a7">netDHCP_Enable</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Each embedded Ethernet device must have a unique <b>MAC address</b>, <b>IP address</b>, and <b>hostname</b>. This is very important when multiple devices are connected to the same LAN. Otherwise, the system might not work (due to collisions or disturbed network communications).</dd></dl>
<p><b>Code Example</b></p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The following values are read from EEPROM */</span></div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> mac_addr[]  = { <span class="stringliteral">&quot;00-01-02-32-3c-46&quot;</span> };</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> ip_addr[]   = { <span class="stringliteral">&quot;192.168.0.150&quot;</span>     };</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> def_gw[]    = { <span class="stringliteral">&quot;192.168.0.1&quot;</span>       };</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> net_mask[]  = { <span class="stringliteral">&quot;255.255.255.0&quot;</span>     };</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> pri_dns[]   = { <span class="stringliteral">&quot;194.25.2.129&quot;</span>      };</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> sec_dns[]   = { <span class="stringliteral">&quot;194.25.2.130&quot;</span>      };</div>
<div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> host_name[] = { <span class="stringliteral">&quot;Keil_MCB&quot;</span>          };</div>
<div class="line"><span class="keywordtype">bool</span> DHCP_enabled      = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  uint8_t buf[8];</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__system__user__api.html#ga0c68e74df79a37750413f72518f63f73" title="Initialize Network Component and interfaces. [not_thread-safe].">netInitialize</a> ();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Change host name */</span></div>
<div class="line">  <a class="code hl_function" href="group__system__user__api.html#ga141ae4581698cb95e5fc5c8458fa9710" title="Set localhost name. [thread-safe].">netSYS_SetHostName</a> (host_name);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* Change MAC address */</span></div>
<div class="line">  <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga8f9dc823db5abb2bc6ccd8e1788c92da" title="Convert MAC address from text to binary form. [thread-safe].">netMAC_aton</a> (mac_addr, buf);</div>
<div class="line">  <a class="code hl_function" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6" title="Set the value of an Interface option. [thread-safe].">netIF_SetOption</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0, <a class="code hl_enumvalue" href="rl__net_8h.html#ga2e0460c920b348a8633c2e54ceecbed5a3433c9bf63b20186d9c9dc7359dc3d7e" title="Ethernet MAC Address (6 bytes)">netIF_OptionMAC_Address</a>, buf, <a class="code hl_define" href="rl__net_8h.html#abc6c76b89cc97f1dd7ffb8f1a82e0754" title="General definitions.">NET_ADDR_ETH_LEN</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (DHCP_enabled == <span class="keyword">false</span>) {</div>
<div class="line">    <span class="comment">/* Static configuration mode */</span></div>
<div class="line">    <a class="code hl_function" href="group__common__user__api.html#gad8ddb783cbb076297f64c3aa13a7d930" title="Disable Dynamic Host Configuration at runtime. [thread-safe].">netDHCP_Disable</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Change IP address */</span></div>
<div class="line">    <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga39518491393bd2b4c6f32df03768b6b8" title="Convert IP address from text to binary form. [thread-safe].">netIP_aton</a> (ip_addr, <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, buf);</div>
<div class="line">    <a class="code hl_function" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6" title="Set the value of an Interface option. [thread-safe].">netIF_SetOption</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0, <a class="code hl_enumvalue" href="rl__net_8h.html#ga2e0460c920b348a8633c2e54ceecbed5a3746e578ee900eb8d9619d36585a5e21" title="IPv4 Address (4 bytes)">netIF_OptionIP4_Address</a>, buf, <a class="code hl_define" href="rl__net_8h.html#a592ab2bc0921be0762e26d38621f62cd" title="IPv4 Address Length in bytes.">NET_ADDR_IP4_LEN</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Change Network mask */</span></div>
<div class="line">    <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga39518491393bd2b4c6f32df03768b6b8" title="Convert IP address from text to binary form. [thread-safe].">netIP_aton</a> (net_mask, <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, buf);</div>
<div class="line">    <a class="code hl_function" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6" title="Set the value of an Interface option. [thread-safe].">netIF_SetOption</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0, <a class="code hl_enumvalue" href="rl__net_8h.html#ga2e0460c920b348a8633c2e54ceecbed5aae9f616813558d8a345bda00ca47004c" title="IPv4 Subnet mask (4 bytes)">netIF_OptionIP4_SubnetMask</a>, buf, <a class="code hl_define" href="rl__net_8h.html#a592ab2bc0921be0762e26d38621f62cd" title="IPv4 Address Length in bytes.">NET_ADDR_IP4_LEN</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Change Default Gateway address */</span></div>
<div class="line">    <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga39518491393bd2b4c6f32df03768b6b8" title="Convert IP address from text to binary form. [thread-safe].">netIP_aton</a> (def_gw, <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, buf);</div>
<div class="line">    <a class="code hl_function" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6" title="Set the value of an Interface option. [thread-safe].">netIF_SetOption</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0, <a class="code hl_enumvalue" href="rl__net_8h.html#ga2e0460c920b348a8633c2e54ceecbed5abc895891ba1aea3b621808e613361208" title="IPv4 Default Gateway (4 bytes)">netIF_OptionIP4_DefaultGateway</a>, buf, <a class="code hl_define" href="rl__net_8h.html#a592ab2bc0921be0762e26d38621f62cd" title="IPv4 Address Length in bytes.">NET_ADDR_IP4_LEN</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Change Primary DNS Server address */</span></div>
<div class="line">    <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga39518491393bd2b4c6f32df03768b6b8" title="Convert IP address from text to binary form. [thread-safe].">netIP_aton</a> (pri_dns, <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, buf);</div>
<div class="line">    <a class="code hl_function" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6" title="Set the value of an Interface option. [thread-safe].">netIF_SetOption</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0, <a class="code hl_enumvalue" href="rl__net_8h.html#ga2e0460c920b348a8633c2e54ceecbed5ad1dc6f54d4e047357eb0c5dacc75f3c2" title="IPv4 Primary DNS (4 bytes)">netIF_OptionIP4_PrimaryDNS</a>, buf, <a class="code hl_define" href="rl__net_8h.html#a592ab2bc0921be0762e26d38621f62cd" title="IPv4 Address Length in bytes.">NET_ADDR_IP4_LEN</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Change Secondary DNS Server address */</span></div>
<div class="line">    <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga39518491393bd2b4c6f32df03768b6b8" title="Convert IP address from text to binary form. [thread-safe].">netIP_aton</a> (sec_dns, <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, buf);</div>
<div class="line">    <a class="code hl_function" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6" title="Set the value of an Interface option. [thread-safe].">netIF_SetOption</a> (<a class="code hl_define" href="rl__net_8h.html#a005856112372179cbbdb9f815a563a6c" title="Interface Class.">NET_IF_CLASS_ETH</a> | 0, <a class="code hl_enumvalue" href="rl__net_8h.html#ga2e0460c920b348a8633c2e54ceecbed5ad735ade79f2df5d930673a6be414dfc2" title="IPv4 Secondary DNS (4 bytes)">netIF_OptionIP4_SecondaryDNS</a>, buf, <a class="code hl_define" href="rl__net_8h.html#a592ab2bc0921be0762e26d38621f62cd" title="IPv4 Address Length in bytes.">NET_ADDR_IP4_LEN</a>);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
