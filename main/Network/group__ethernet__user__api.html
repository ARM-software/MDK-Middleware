<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network Component: User API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "Network Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__ethernet__user__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">User API<div class="ingroups"><a class="el" href="group__netInterfaces.html">Interfaces</a> &raquo; <a class="el" href="group__netETH__Func.html">Ethernet Interface</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Functions of the Ethernet Interface.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3689cc367295fc84a2adade9a64b0178"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ethernet__user__api.html#ga3689cc367295fc84a2adade9a64b0178">netETH_SendRaw</a> (uint32_t if_num, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga3689cc367295fc84a2adade9a64b0178"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send raw Ethernet data. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:ga3689cc367295fc84a2adade9a64b0178"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Functions of the Ethernet Interface. </p>
<p>In the Network Component, the Ethernet interface API is responsible for various Application/Internet/Link layer protocols such as <a class="el" href="group__ethernet__user__api.html#ethernet_arp">ARP</a>, <a class="el" href="group__ethernet__user__api.html#ethernet_ndp">NDP</a>, <a class="el" href="group__ethernet__user__api.html#ethernet_igmp">IGMP</a>, <a class="el" href="group__ethernet__user__api.html#ethernet_mld">MLD</a> and <a class="el" href="group__ethernet__user__api.html#ethernet_dhcp">DHCP</a>. In the Network Component, these protocols are supported for IPv4 and IPv6 connections (where applicable).</p>
<p>To get or set Ethernet options, use the generic <a class="el" href="group__common__user__api.html#gadbf28bb56266770f9b1d276c48c13d36">netIF_GetOption</a> and <a class="el" href="group__common__user__api.html#ga919bfb395143e0bc1775106080c61eb6">netIF_SetOption</a>. The available options are as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionMAC_Address</span>   </td><td class="markdownTableBodyNone">Ethernet MAC Address    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionVLAN_Identifier</span>   </td><td class="markdownTableBodyNone">Ethernet VLAN Identifier    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP4_MTU</span>   </td><td class="markdownTableBodyNone">IPv4 Maximum Transmission Unit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP4_Address</span>   </td><td class="markdownTableBodyNone">IPv4 Address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP4_SubnetMask</span>   </td><td class="markdownTableBodyNone">IPv4 Subnet mask    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP4_DefaultGateway</span>   </td><td class="markdownTableBodyNone">IPv4 Default Gateway    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP4_PrimaryDNS</span>   </td><td class="markdownTableBodyNone">IPv4 Primary DNS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP4_SecondaryDNS</span>   </td><td class="markdownTableBodyNone">IPv4 Secondary DNS    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_MTU</span>   </td><td class="markdownTableBodyNone">IPv6 Maximum Transmission Unit    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_LinkLocalAddress</span>   </td><td class="markdownTableBodyNone">IPv6 Link-local Address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_StaticAddress</span>   </td><td class="markdownTableBodyNone">IPv6 Static Address    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_DynamicAddress</span>   </td><td class="markdownTableBodyNone">IPv6 Dynamic Address    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_SubnetPrefixLength</span>   </td><td class="markdownTableBodyNone">IPv6 Subnet Prefix-length    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_DefaultGateway</span>   </td><td class="markdownTableBodyNone">IPv6 Default Gateway    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_PrimaryDNS</span>   </td><td class="markdownTableBodyNone">IPv6 Primary DNS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netIF_OptionIP6_SecondaryDNS</span>   </td><td class="markdownTableBodyNone">IPv6 Secondary DNS   </td></tr>
</table>
<p>The callback function <a class="el" href="group__ethernet__interface__callbacks.html#gaec33d8aae18edc0ce65cad4480246398">netETH_Notify</a> informs the user application about state changes on the Ethernet link.</p>
<p><a class="anchor" id="ethernet_arp"></a></p>
<h2><a class="anchor" id="autotoc_md98"></a>
Address Resolution Protocol (ARP, IPv4 only)</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Address_Resolution_Protocol" target="_blank">Address Resolution Protocol (ARP)</a> is used to resolve network layer (IP) addresses to link layer (MAC) addresses. It is being used in IPv4 networks only. In IPv6 networks, <a class="el" href="group__ethernet__user__api.html#ethernet_ndp">Neighbor Discovery Protocol (NDP)</a> is used instead.</p>
<p>The Network Component provides five functions for ARP. Two functions are working on the ARP table, two functions actually resolve the IP or MAC address and one function that checks whether the IP address is already in use. <a class="el" href="group__common__user__api.html#ga2ef41d262467109292e7e96eb4b6e399">netARP_CacheIP</a> determines whether the ARP table has a MAC address resolved for a certain IP address. <a class="el" href="group__common__user__api.html#ga0517419c7d4cf9bdb9133a26314f4fb9">netARP_CacheMAC</a> determines whether the ARP table has an IP address resolved for a certain MAC address. To retrieve the MAC address for an IP address from the ARP table, use <a class="el" href="group__common__user__api.html#ga63bb9bd2f310b9b47a987dd968ae34ce">netARP_GetMAC</a>, while <a class="el" href="group__common__user__api.html#ga64d1b664c9e52f4a3e1adb333f0b059b">netARP_GetIP</a> provides the IP address for a given MAC address. To verify that the IP address is not used in local area network, use <a class="el" href="group__common__user__api.html#ga9b7dcaba471180a6033c4568e23872e7">netARP_Probe</a>.</p>
<p><a class="anchor" id="ethernet_ndp"></a></p>
<h2><a class="anchor" id="autotoc_md99"></a>
Neighbor Discovery Protocol (NDP, IPv6 only)</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Neighbor_Discovery_Protocol" target="_blank">Neighbor Discovery Protocol (NDP)</a> operates on the link layer and is responsible for</p><ul>
<li>address auto-configuration of a node</li>
<li>discovery of other nodes on the link</li>
<li>determining the link layer (MAC) addresses of other nodes</li>
<li>duplicate address detection</li>
<li>finding available routers and <a class="el" href="group__netDNSc__Func.html">Domain Name System (DNS)</a> servers</li>
<li>address prefix discovery and</li>
<li>maintaining trace information to other neighboring nodes.</li>
</ul>
<p>It is available for IPv6 only.</p>
<p>The function <a class="el" href="group__common__user__api.html#ga8729881dd80de688b7d39e18d0abfb0a">netNDP_CacheIP</a> checks if the NDP table has a MAC address resolved for a certain IPv6 address. To retrieve this MAC address, use <a class="el" href="group__common__user__api.html#gafee45b0bcc2a5df0981fbe8a4de1543b">netNDP_GetMAC</a>. To retrieve an IPv6 address for any given MAC address, use <a class="el" href="group__common__user__api.html#ga28b47274f61346da4b15c811544809f3">netNDP_GetIP</a>. To verify that the IPv6 address is not used in local area network, use <a class="el" href="group__common__user__api.html#ga8a28246375e6b569630be5610c43ed36">netNDP_Probe</a>.</p>
<p><a class="anchor" id="ethernet_igmp"></a></p>
<h2><a class="anchor" id="autotoc_md100"></a>
Internet Group Management Protocol (IGMP, IPv4 only)</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Internet_Group_Management_Protocol" target="_blank">Internet Group Management Protocol (IGMP)</a> is used to operate IP Multicasting. This means that an IP datagram is sent to a "host group". A multicast datagram is delivered to all members of its target host group. The IGMPv1 and IGMPv2 protocol specification is supported by the Network Component. It is only available for IPv4.</p>
<p>To add a host to a specific host group, use <a class="el" href="group__common__user__api.html#ga7f3207be0b4b9a6aac320ddfe4c5937f">netIGMP_Join</a>. To leave a host group, <a class="el" href="group__common__user__api.html#gab0deb90dddf3ac4471d513c6a501b641">netIGMP_Leave</a> is used.</p>
<p><a class="anchor" id="ethernet_mld"></a></p>
<h2><a class="anchor" id="autotoc_md101"></a>
Multicast Listener Discovery Protocol (MLD, IPv6 only)</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Multicast_Listener_Discovery" target="_blank">Multicast Listener Discovery (MLD)</a> is used to perform IPv6 Multicasting. This means that an IPv6 datagram is sent to a "multicast group". A multicast datagram is delivered to all members of its destination multicast listening nodes. The MLDv1 protocol specification is supported by the Network Component. It is only available for IPv6.</p>
<p>To add a node to a specific multicast group, use <a class="el" href="group__common__user__api.html#ga78f8362937a5cbb046f5ccea7223f0da">netMLD_Join</a>. To leave a multicast group, <a class="el" href="group__common__user__api.html#ga5c8885da1c15cc4130bb7e1fb48f5939">netMLD_Leave</a> is used.</p>
<p><a class="anchor" id="ethernet_dhcp"></a></p>
<h2><a class="anchor" id="autotoc_md102"></a>
Dynamic Host Configuration Protocol (DHCP, IPv4 only)</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol" target="_blank">Dynamic Host Configuration Protocol (DHCP)</a> is used for dynamically distributing network configuration parameters, such as IP addresses for interfaces and services. Using DHCP, network nodes request IP addresses and networking parameters automatically from a DHCP server, eliminating the need to configure these settings manually (refer to <a class="el" href="group__using__ethernet__interfaces__ip__assign.html">IP Address Assignment</a> for more information). Although DHCP is specified for IPv4 and IPv6 networks, the Network Component is only supporting IPv4 networks at the moment.</p>
<p>Like all services, the DHCP is normally started automatically if <code>NET_START_SERVICE</code> is set to <span class="XML-Token">1</span> in the <b>Net_Config.h</b> configuration file. If it is disabled, DHCP needs to be started manually in the user application using <a class="el" href="group__common__user__api.html#gace7634f951ec523cccc505b5d2ffd5a7">netDHCP_Enable</a>. At runtime, it is always possible to stop DHCP using the function <a class="el" href="group__common__user__api.html#gad8ddb783cbb076297f64c3aa13a7d930">netDHCP_Disable</a>. In this case, the Network Core will revert the IP address of the node to the static IP address specified in the <b>Net_Config_ETH_<em>n</em></b>.h file.</p>
<p>The callback function <a class="el" href="group__common__interface__callbacks.html#gaddab848a7ea7ab4638313f6b6fc7ef88">netDHCP_Notify</a> notifies the user application of DHCP events or extended DHCP options. This function is optional and not required for a default DHCP client configuration. However, if your application requires the ability to react on changes of the IP address, you need to implement this function in the user code. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3689cc367295fc84a2adade9a64b0178" name="ga3689cc367295fc84a2adade9a64b0178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3689cc367295fc84a2adade9a64b0178">&#9670;&#160;</a></span>netETH_SendRaw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netETH_SendRaw </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>if_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send raw Ethernet data. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">if_num</td><td>Ethernet interface number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>buffer containing the data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netETH_SendRaw</b> sends the raw Ethernet data to a remote machine. The data must contain Ethernet header and payload data. This allows the users to implement additional Ethernet protocols, which are not supported by the network library.</p>
<p>The argument <em>if_num</em> specifies the <a class="el" href="group__netInterfaces__Common.html#interface_num">Ethernet Interface</a> which is used for sending.</p>
<p>The argument <em>buf</em> points to a buffer containing Ethernet raw data.</p>
<p>The argument <em>len</em> specifies the number of data bytes to send.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Data sent successfully.</li>
<li><em>netInvalidParameter:</em> Invalid parameter provided.</li>
<li><em>netWrongState:</em> Ethernet link is down.</li>
<li><em>netDriverError:</em> Ethernet driver internal error.</li>
<li><em>netBusy:</em> Ethernet transmitter is busy.</li>
</ul>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__ethernet__interface__callbacks.html#ga44683a9134e3a393c5e8125ce42040f9" title="Receive raw Ethernet data. [user-provided].">netETH_ReceiveRaw</a> (uint32_t if_num, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line">  uint8_t echo_buf[60];</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Echo small packets</span></div>
<div class="line">  <span class="keywordflow">if</span> (len &lt;= 60) {</div>
<div class="line">    memcpy (&amp;echo_buf[0], &amp;buf[6], 6);          <span class="comment">// Destination MAC address</span></div>
<div class="line">    memcpy (&amp;echo_buf[6], &amp;buf[0], 6);          <span class="comment">// Source MAC address</span></div>
<div class="line">    memcpy (&amp;echo_buf[12], &amp;buf[12], len-12);   <span class="comment">// EtherType + data</span></div>
<div class="line">    <a class="code hl_function" href="group__ethernet__user__api.html#ga3689cc367295fc84a2adade9a64b0178" title="Send raw Ethernet data. [thread-safe].">netETH_SendRaw</a> (if_num, echo_buf, len);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
