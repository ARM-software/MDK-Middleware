<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network Component: User API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "Network Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__udp__user__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">User API<div class="ingroups"><a class="el" href="group__netSockets.html">Sockets</a> &raquo; <a class="el" href="group__netUDP__Func.html">UDP Socket</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>UDP Socket functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga25e3d72c69328efecfcf78c413251351"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#ga25e3d72c69328efecfcf78c413251351">netUDP_cb_t</a>) (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>, const <a class="el" href="group__network__structs.html#structNET__ADDR">NET_ADDR</a> *addr, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga25e3d72c69328efecfcf78c413251351"><td class="mdescLeft">&#160;</td><td class="mdescRight">UDP Event callback function.  <br /></td></tr>
<tr class="separator:ga25e3d72c69328efecfcf78c413251351"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad087599bfea6f4d6c9e7bb601352fd16"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a> (<a class="el" href="group__udp__user__api.html#ga25e3d72c69328efecfcf78c413251351">netUDP_cb_t</a> cb_func)</td></tr>
<tr class="memdesc:gad087599bfea6f4d6c9e7bb601352fd16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a free UDP socket. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:gad087599bfea6f4d6c9e7bb601352fd16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef522f5e090220f72350a8aa0984bbd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#gaef522f5e090220f72350a8aa0984bbd9">netUDP_ReleaseSocket</a> (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>)</td></tr>
<tr class="memdesc:gaef522f5e090220f72350a8aa0984bbd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release UDP socket and free resources. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:gaef522f5e090220f72350a8aa0984bbd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga688c8b42295a8bbe177f0eab181f9871"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871">netUDP_Open</a> (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>, uint16_t port)</td></tr>
<tr class="memdesc:ga688c8b42295a8bbe177f0eab181f9871"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open UDP socket for communication. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:ga688c8b42295a8bbe177f0eab181f9871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa92c8a4eaead886fe8b9bf16231aca91"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#gaa92c8a4eaead886fe8b9bf16231aca91">netUDP_Close</a> (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>)</td></tr>
<tr class="memdesc:gaa92c8a4eaead886fe8b9bf16231aca91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop UDP communication and close socket. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:gaa92c8a4eaead886fe8b9bf16231aca91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac133764142fbb68ec64ff13c01ed1208"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208">netUDP_GetBuffer</a> (uint32_t size)</td></tr>
<tr class="memdesc:gac133764142fbb68ec64ff13c01ed1208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory for UDP send buffer. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:gac133764142fbb68ec64ff13c01ed1208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a82db98b82300e5fd03ce1b7afb6cba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba">netUDP_Send</a> (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>, const <a class="el" href="group__network__structs.html#structNET__ADDR">NET_ADDR</a> *addr, uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga7a82db98b82300e5fd03ce1b7afb6cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to a remote node. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:ga7a82db98b82300e5fd03ce1b7afb6cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93496cfeb5f324f09dc81211243093cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#ga93496cfeb5f324f09dc81211243093cb">netUDP_SetOption</a> (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>, <a class="el" href="group__netUDP__Enums.html#gae1f17f41d866b528526d55ea58ba162e">netUDP_Option</a> option, uint32_t val)</td></tr>
<tr class="memdesc:ga93496cfeb5f324f09dc81211243093cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set UDP socket IP option. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:ga93496cfeb5f324f09dc81211243093cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1bb08cb3ed2cffaf19b056056c84b3d3"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__user__api.html#ga1bb08cb3ed2cffaf19b056056c84b3d3">netUDP_GetLocalPort</a> (int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>)</td></tr>
<tr class="memdesc:ga1bb08cb3ed2cffaf19b056056c84b3d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve local port number of UDP socket. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:ga1bb08cb3ed2cffaf19b056056c84b3d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>UDP Socket functions. </p>
<p>UDP is a byte stream service. It does not know anything about the format of the data being sent. It simply takes the data, <b>encapsulates</b> it into a UDP packet, and sends it to the remote peer.</p>
<p>The UDP protocol does not wait for any acknowledgment and is unable to detect any lost packets. If this is required, it must be done by the application layer. However, it is better to use a <a class="el" href="group__netTCP__Func.html">TCP Socket</a> for reliable communication.</p>
<p><a class="anchor" id="udp_send_data"></a></p>
<h2><a class="anchor" id="autotoc_md91"></a>
Sending Data via UDP in Unicast Mode</h2>
<p>The function <a class="el" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871">netUDP_Open</a> opens a socket for communication. You need to specify the socket number and the local port to be used. As a first step, you need to establish the communication between two nodes, otherwise <a class="el" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba">netUDP_Send</a> will fail with netError. To avoid this, call a <a class="el" href="group__common__user__api.html#ga2ef41d262467109292e7e96eb4b6e399">netARP_CacheIP</a> in a first step.</p>
<p>If <a class="el" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871">netUDP_Open</a> is called with a local port number of <span class="XML-Token">0</span>, the Network Core determines which port to use. Later, this information can be retrieved using the function <a class="el" href="group__udp__user__api.html#ga1bb08cb3ed2cffaf19b056056c84b3d3">netUDP_GetLocalPort</a>. To set certain UDP options (for IPv4 or IPv6) for the opened socket, use <a class="el" href="group__udp__user__api.html#ga93496cfeb5f324f09dc81211243093cb">netUDP_SetOption</a>.</p>
<p>To send data via UDP, you first need to request a buffer to be allocated using <a class="el" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208">netUDP_GetBuffer</a>. Then, fill the buffer with the data to be sent and send it using <a class="el" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba">netUDP_Send</a>. The buffer will be released by the Network Component automatically. If the buffer is not valid (not allocated with the <a class="el" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208">netUDP_GetBuffer</a> function), the buffer is ignored.</p>
<p>The Network Component does not send 0-length packets. So it is possible to release a buffer that has been allocated, by simply calling <a class="el" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba">netUDP_Send</a> with parameter <em>len</em> = 0.</p>
<p>The user code template file <b>UDP_Socket.c</b> contains an exemplary send function, called <b>send_data</b>. This shows how to use <a class="el" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208">netUDP_GetBuffer</a> (for memory allocation) and <a class="el" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba">netUDP_Send</a> for data transmission. To add the template to your project, simply right-click on the Source group, select <b>Add New Item to Group</b>, then click on <b>User Code Template</b> and scroll in the template files list until you find the <b>UDP Socket</b> template. Adapt the <b>send_data</b> function to your application's needs.</p>
<p>UDP communication will be stopped using <a class="el" href="group__udp__user__api.html#gaa92c8a4eaead886fe8b9bf16231aca91">netUDP_Close</a>. The UDP socket will be closed. Subsequently, call <a class="el" href="group__udp__user__api.html#gaef522f5e090220f72350a8aa0984bbd9">netUDP_ReleaseSocket</a> as well, as this function finally frees the memory used by the UDP socket.</p>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">int32_t udp_sock;                       <span class="comment">// UDP socket handle</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Notify the user application about UDP socket events.</span></div>
<div class="line">uint32_t udp_cb_func (int32_t <a class="code hl_function" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9" title="Create a communication endpoint called socket. [thread-safe].">socket</a>, <span class="keyword">const</span> <a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> *addr, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Data received</span></div>
<div class="line">  <span class="keywordflow">if</span> ((buf[0] == 0x01) &amp;&amp; (len == 2)) {</div>
<div class="line">    <span class="comment">// Switch LEDs on and off</span></div>
<div class="line">    LED_out (buf[1]);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send UDP data to destination client.</span></div>
<div class="line"><span class="keywordtype">void</span> send_udp_data (<span class="keywordtype">void</span>) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (udp_sock &gt;= 0) {</div>
<div class="line">    <span class="comment">// IPv4 address: 192.168.0.1</span></div>
<div class="line">    <a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> addr = { <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, 2000, 192, 168, 0, 1 };</div>
<div class="line">    <span class="comment">// IPv6 address: [fe80::1c30:6cff:fea2:455e]</span></div>
<div class="line">    <span class="comment">//  NET_ADDR addr = { NET_ADDR_IP6, 2000,</span></div>
<div class="line">    <span class="comment">//                    0xfe, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,</span></div>
<div class="line">    <span class="comment">//                    0x1c, 0x30, 0x6c, 0xff, 0xfe, 0xa2, 0x45, 0x5e };</span></div>
<div class="line">    uint8_t *sendbuf;</div>
<div class="line"> </div>
<div class="line">    sendbuf = <a class="code hl_function" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208" title="Allocate memory for UDP send buffer. [thread-safe].">netUDP_GetBuffer</a> (2);</div>
<div class="line">    sendbuf[0] = 0x01;</div>
<div class="line">    sendbuf[1] = 0xAA;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba" title="Send data to a remote node. [thread-safe].">netUDP_Send</a> (udp_sock, &amp;addr, sendbuf, 2);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Allocate and initialize the socket.</span></div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_function" href="group__netSys__Func.html#ga0c68e74df79a37750413f72518f63f73" title="Initialize Network Component and interfaces. [not_thread-safe].">netInitialize</a> ();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Initialize UDP socket and open port 2000</span></div>
<div class="line">  udp_sock = <a class="code hl_function" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16" title="Allocate a free UDP socket. [thread-safe].">netUDP_GetSocket</a> (udp_cb_func);</div>
<div class="line">  <span class="keywordflow">if</span> (udp_sock &gt;= 0) {</div>
<div class="line">    <a class="code hl_function" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871" title="Open UDP socket for communication. [thread-safe].">netUDP_Open</a> (udp_sock, 2000);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><a class="anchor" id="udp_send_data_mcast"></a></p>
<h2><a class="anchor" id="autotoc_md92"></a>
Sending Data via UDP in Multicast Mode</h2>
<p>To send and receive data to/from multiple hosts, you need to join a specific group of hosts with <a class="el" href="group__common__user__api.html#ga7f3207be0b4b9a6aac320ddfe4c5937f">netIGMP_Join</a> function. Then you can use the same functions as described in <a class="el" href="group__udp__user__api.html#udp_send_data">Sending Data via UDP in Unicast Mode</a>. When you want to stop sending and receiving the data from that group address, you have to leave a specific group with <a class="el" href="group__common__user__api.html#gab0deb90dddf3ac4471d513c6a501b641">netIGMP_Leave</a> function. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga25e3d72c69328efecfcf78c413251351" name="ga25e3d72c69328efecfcf78c413251351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga25e3d72c69328efecfcf78c413251351">&#9670;&#160;</a></span>netUDP_cb_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t(* netUDP_cb_t)(int32_t <a class="el" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9">socket</a>, const <a class="el" href="group__network__structs.html#structNET__ADDR">NET_ADDR</a> *addr, const uint8_t *buf, uint32_t len)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UDP Event callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>UDP socket handle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Pointer to the structure containing the remote IP address and port number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Pointer to buffer containing the received data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of bytes in the received packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>Currently not used. Reserved for future use.</em></dd></dl>
<p>Is the type definition for the UDP callback function. The Network Core calls the callback function whenever a UDP data packet is received. Users must provide the function.</p>
<p>The argument <em>socket</em> is the UDP socket handle of the local machine.</p>
<p>The argument <em>addr</em> is a pointer to the buffer containing the IP address and port of the remote machine, and the IP version IPv4 or IPv6.</p>
<p>The argument <em>buf</em> points to a buffer containing the received data.</p>
<p>The argument <em>len</em> specifies the number of received data bytes. The maximum size of a received data is:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">IP Version   </th><th class="markdownTableHeadNone">Maximum data size   </th><th class="markdownTableHeadNone">Fragmentation supported    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">IPv4</span>   </td><td class="markdownTableBodyNone">2000 bytes   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">IPv6</span>   </td><td class="markdownTableBodyNone">2000 bytes   </td><td class="markdownTableBodyNone">Yes   </td></tr>
</table>
<p>If the IP fragmentation is not supported or is disabled in the configuration, received fragmented IP packets are dumped by the stack automatically. Therefore, it is not possible to receive mega UDP frames up to 64K.</p>
<p><b>Parameter for:</b></p><ul>
<li><a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a></li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The IPv4 fragmentation must be enabled in the Network interface configuration.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line">uint32_t udp_cb_func (int32_t <a class="code hl_function" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9" title="Create a communication endpoint called socket. [thread-safe].">socket</a>, <span class="keyword">const</span> <a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> *addr, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Data received</span></div>
<div class="line">  <span class="keywordflow">if</span> ((buf[0] == 0x01) &amp;&amp; (len == 2)) {</div>
<div class="line">    <span class="comment">// Switch LEDs on and off</span></div>
<div class="line">    <span class="comment">// LED_SetOut (buf[1]);</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (0);</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Code</b> <b>Example</b> <b>IPv4</b> <b>only</b> </p><div class="fragment"><div class="line">uint32_t udp_cb_func (int32_t <a class="code hl_function" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9" title="Create a communication endpoint called socket. [thread-safe].">socket</a>, <span class="keyword">const</span> <a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> *addr, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (addr-&gt;<a class="code hl_variable" href="group__network__structs.html#a0444de3555073772ebd025a838b9a911" title="IP address type: NET_ADDR_IP4 or NET_ADDR_IP6.">addr_type</a> == <a class="code hl_define" href="rl__net_8h.html#a5af8b5fa13b653a73d397cabe75ca4bb" title="IPv6 Address.">NET_ADDR_IP6</a>) {</div>
<div class="line">    <span class="comment">// Dump IPv6 data</span></div>
<div class="line">    <span class="keywordflow">return</span> (0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> ((buf[0] == 0x01) &amp;&amp; (len == 2)) {</div>
<div class="line">    <span class="comment">// Switch LEDs on and off</span></div>
<div class="line">    <span class="comment">// LED_SetOut (buf[1]);</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (0);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa92c8a4eaead886fe8b9bf16231aca91" name="gaa92c8a4eaead886fe8b9bf16231aca91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa92c8a4eaead886fe8b9bf16231aca91">&#9670;&#160;</a></span>netUDP_Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netUDP_Close </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop UDP communication and close socket. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The <b>netUDP_Close</b> function closes the UDP <em>socket</em> identified in the function argument. After calling the <b>netUDP_Close</b> function, the UDP socket cannot send or receive any data packet. After closing the UDP socket, you can reopen it using the <a class="el" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871">netUDP_Open</a> function.</p>
<p>The UDP socket still reserves memory after calling the <b>netUDP_Close</b> function. Hence, if you do not need the socket, you must release the memory using the <a class="el" href="group__udp__user__api.html#gaef522f5e090220f72350a8aa0984bbd9">netUDP_ReleaseSocket</a> function after calling <b>netUDP_Close</b>.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Socket closed successfully.</li>
<li><em>netInvalidParameter:</em> Invalid socket requested.</li>
</ul>
<p><b>Code</b> <b>Example</b> (see <a class="el" href="group__udp__user__api.html#gaef522f5e090220f72350a8aa0984bbd9">netUDP_ReleaseSocket</a>) </p>

</div>
</div>
<a id="gac133764142fbb68ec64ff13c01ed1208" name="gac133764142fbb68ec64ff13c01ed1208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac133764142fbb68ec64ff13c01ed1208">&#9670;&#160;</a></span>netUDP_GetBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * netUDP_GetBuffer </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate memory for UDP send buffer. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the allocated memory.<ul>
<li>NULL = out of memory.</li>
</ul>
</dd></dl>
<p>The function <b>netUDP_GetBuffer</b> allocates memory for the UDP send buffer into which your application can write the outgoing data packet.</p>
<p>The argument <em>size</em> specifies the number of data bytes that the application wants to send. When the UDP frame has been sent, the Network Core automatically de-allocates the memory used by the send buffer.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Your application must call the <b>netUDP_GetBuffer</b> function each time it wants to send a UDP data packet.</li>
<li>The total size of the allocated memory must not exceed the UDP Maximum Packet Size (1452 bytes).</li>
<li>Writing more data than the allocated size of the data buffer overwrites the Memory Manager Block links and causes the Network Core to crash.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> (see <a class="el" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba">netUDP_Send</a>) </p>

</div>
</div>
<a id="ga1bb08cb3ed2cffaf19b056056c84b3d3" name="ga1bb08cb3ed2cffaf19b056056c84b3d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1bb08cb3ed2cffaf19b056056c84b3d3">&#9670;&#160;</a></span>netUDP_GetLocalPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t netUDP_GetLocalPort </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve local port number of UDP socket. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>local port number.<ul>
<li>0 = socket invalid or in invalid state.</li>
</ul>
</dd></dl>
<p>The function <b>netUDP_GetLocalPort</b> returns the port number for the specified <em>socket</em>. This is useful if you have not specified a port in the <a class="el" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871">netUDP_Open</a> function as the system sets the port automatically then.</p>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line">int32_t udp_sock;</div>
<div class="line"> </div>
<div class="line">udp_sock = <a class="code hl_function" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16" title="Allocate a free UDP socket. [thread-safe].">netUDP_GetSocket</a> (udp_cb_func);</div>
<div class="line"><span class="keywordflow">if</span> (udp_sock &gt;= 0) {</div>
<div class="line">  <a class="code hl_function" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871" title="Open UDP socket for communication. [thread-safe].">netUDP_Open</a> (udp_sock, 0);</div>
<div class="line">  printf (<span class="stringliteral">&quot;Local port is %d\n&quot;</span>, <a class="code hl_function" href="group__udp__user__api.html#ga1bb08cb3ed2cffaf19b056056c84b3d3" title="Retrieve local port number of UDP socket. [thread-safe].">netUDP_GetLocalPort</a> (udp_sock));</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gad087599bfea6f4d6c9e7bb601352fd16" name="gad087599bfea6f4d6c9e7bb601352fd16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad087599bfea6f4d6c9e7bb601352fd16">&#9670;&#160;</a></span>netUDP_GetSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t netUDP_GetSocket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__udp__user__api.html#ga25e3d72c69328efecfcf78c413251351">netUDP_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb_func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a free UDP socket. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_func</td><td>event listening callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>socket handle number or execution status:<ul>
<li>value &gt;= 0: socket handle number.</li>
<li>value &lt; 0: error occurred, -value is execution status as defined with <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</li>
</ul>
</dd></dl>
<p>The function <b>netUDP_GetSocket</b> allocates a free UDP socket. It initializes all state variables of the UDP socket to the default state. By default, a checksum will be calculated for every UDP packet. To turn this off, use the <a class="el" href="group__udp__user__api.html#ga93496cfeb5f324f09dc81211243093cb">netUDP_SetOption</a> function.</p>
<p>The argument <em>cb_func</em> is the event callback function of the UDP socket. Users must provide this function. Refer to <a class="el" href="group__udp__user__api.html#ga25e3d72c69328efecfcf78c413251351">netUDP_cb_t</a>.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netInvalidParameter:</em> Callback function not valid.</li>
<li><em>netError:</em> No free sockets available.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>You must call the <b>netUDP_GetSocket</b> function before any other function calls to the UDP socket.</li>
<li>You must define the listener function to use with the UDP socket.</li>
<li>UDP socket is IP version agnostic (supports both IPv4 and IPv6).</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line">int32_t udp_sock;</div>
<div class="line"> </div>
<div class="line">uint32_t udp_cb_func (int32_t <a class="code hl_function" href="group__using__network__sockets__bsd__func.html#gac01ac0611ef0f7d743e0eb464e7786a9" title="Create a communication endpoint called socket. [thread-safe].">socket</a>, <span class="keyword">const</span> <a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> *addr, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line">   ..</div>
<div class="line">  <span class="keywordflow">return</span> (0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Initialize UDP socket and open port 2000</span></div>
<div class="line">udp_sock = <a class="code hl_function" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16" title="Allocate a free UDP socket. [thread-safe].">netUDP_GetSocket</a> (udp_cb_func);</div>
<div class="line"><span class="keywordflow">if</span> (udp_sock &gt;= 0) {</div>
<div class="line">  <a class="code hl_function" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871" title="Open UDP socket for communication. [thread-safe].">netUDP_Open</a> (udp_sock, 2000);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga688c8b42295a8bbe177f0eab181f9871" name="ga688c8b42295a8bbe177f0eab181f9871"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga688c8b42295a8bbe177f0eab181f9871">&#9670;&#160;</a></span>netUDP_Open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netUDP_Open </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open UDP socket for communication. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>local port number.<ul>
<li>0 = system assigned local port. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The <b>netUDP_Open</b> function opens the UDP socket identified by the argument <em>socket</em> for communication.</p>
<p>The argument <em>port</em> specifies the local port for sending and receiving data packets. If <em>port</em> is set to <span class="XML-Token">0</span>, then the Network Core allocates the first free UDP port automatically. If you need the port number later, use <a class="el" href="group__udp__user__api.html#ga1bb08cb3ed2cffaf19b056056c84b3d3">netUDP_GetLocalPort</a> to retrieve this information.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Socket opened successfully.</li>
<li><em>netInvalidParameter:</em> Invalid socket requested or port not available.</li>
<li><em>netWrongState:</em> Socket already opened.</li>
</ul>
<p><b>Code</b> <b>Example</b> (see <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>) </p>

</div>
</div>
<a id="gaef522f5e090220f72350a8aa0984bbd9" name="gaef522f5e090220f72350a8aa0984bbd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaef522f5e090220f72350a8aa0984bbd9">&#9670;&#160;</a></span>netUDP_ReleaseSocket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netUDP_ReleaseSocket </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release UDP socket and free resources. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netUDP_ReleaseSocket</b> releases the <em>socket</em> and de-allocates its memory.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Socket released successfully.</li>
<li><em>netInvalidParameter:</em> Invalid socket requested.</li>
<li><em>netWrongState:</em> Socket not closed.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Once the socket is released, the Network Core can allocate the socket to another process.</li>
<li>You must call the <b>netUDP_ReleaseSocket</b> function when you do not need the UDP socket any longer.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="comment">// This UDP connection is no longer needed </span></div>
<div class="line"><a class="code hl_function" href="group__udp__user__api.html#gaa92c8a4eaead886fe8b9bf16231aca91" title="Stop UDP communication and close socket. [thread-safe].">netUDP_Close</a> (udp_sock);</div>
<div class="line"><a class="code hl_function" href="group__udp__user__api.html#gaef522f5e090220f72350a8aa0984bbd9" title="Release UDP socket and free resources. [thread-safe].">netUDP_ReleaseSocket</a> (udp_sock);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga7a82db98b82300e5fd03ce1b7afb6cba" name="ga7a82db98b82300e5fd03ce1b7afb6cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7a82db98b82300e5fd03ce1b7afb6cba">&#9670;&#160;</a></span>netUDP_Send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netUDP_Send </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__network__structs.html#structNET__ADDR">NET_ADDR</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data to a remote node. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>structure containing remote IP address and port. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>buffer containing the data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netUDP_Send</b> sends the data packet to a remote machine.</p>
<p>The argument <em>socket</em> specifies the socket handle to use for communication on the local machine.</p>
<p>The argument <em>addr</em> points to a buffer containing the IP address and port of the remote machine.</p>
<p>The argument <em>buf</em> points to the constructed UDP data packet.</p>
<p>The argument <em>len</em> specifies the number of bytes in the data packet. The maximum size of a transmitted data is:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">IP Version   </th><th class="markdownTableHeadNone">Maximum data size   </th><th class="markdownTableHeadNone">Fragmentation supported    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">IPv4</span>   </td><td class="markdownTableBodyNone">2000 bytes   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">IPv6</span>   </td><td class="markdownTableBodyNone">2000 bytes   </td><td class="markdownTableBodyNone">Yes   </td></tr>
</table>
<p>Over-sized transmit packets are truncated to the maximum size before being sent. Therefore, it is not possible to send mega UDP frames up to 64K.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Send data successful.</li>
<li><em>netInvalidParameter:</em> Invalid or not supported parameter provided.</li>
<li><em>netWrongState:</em> Socket not open.</li>
<li><em>netError:</em> Send data failed.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>You must allocate the memory using <a class="el" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208">netUDP_GetBuffer</a> before calling <b>netUDP_Send</b>.</li>
<li>The buffer will be released, no matter if <b>netUDP_Send</b> is successful or not.</li>
<li><b>netUDP_Send</b> does not send 0-length packets. It is possible to release a buffer that has been allocated, by simply calling <b>netUDP_Send</b> with parameter len = 0.</li>
<li>The socket must already be open for communication before you can send data.</li>
<li>The same UDP socket, using the same local port, can communicate with several remote machines using UDP ports. The user application must handle proper multiplexing of outgoing packets and demultiplexing of received packets.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> <b>IPv4</b> </p><div class="fragment"><div class="line"><span class="comment">// IPv4 address: 192.168.0.1</span></div>
<div class="line"><a class="code hl_struct" href="group__network__structs.html#structNET__ADDR4" title="Network Address IPv4 only.">NET_ADDR4</a> addr = { <a class="code hl_define" href="rl__net_8h.html#ab5ae61a54f36e338a8dc06cee088d89f" title="IPv4 Address.">NET_ADDR_IP4</a>, 2000, 192, 168, 0, 1 };</div>
<div class="line">uint8_t *sendbuf;</div>
<div class="line"> </div>
<div class="line">sendbuf = <a class="code hl_function" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208" title="Allocate memory for UDP send buffer. [thread-safe].">netUDP_GetBuffer</a> (2);</div>
<div class="line">sendbuf[0] = 0x01;</div>
<div class="line">sendbuf[1] = 0xAA;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba" title="Send data to a remote node. [thread-safe].">netUDP_Send</a> (udp_sock, (<a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> *)&amp;addr, sendbuf, 2);</div>
</div><!-- fragment --><p><b>Code</b> <b>Example</b> <b>IPv6</b> </p><div class="fragment"><div class="line"><span class="comment">// IPv6 address: [fe80::1c30:6cff:fea2:455e]</span></div>
<div class="line"><a class="code hl_struct" href="group__network__structs.html#structNET__ADDR" title="Network Address IPv4/IPv6 capable.">NET_ADDR</a> addr = { <a class="code hl_define" href="rl__net_8h.html#a5af8b5fa13b653a73d397cabe75ca4bb" title="IPv6 Address.">NET_ADDR_IP6</a>, 2000,</div>
<div class="line">                  0xfe, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,</div>
<div class="line">                  0x1c, 0x30, 0x6c, 0xff, 0xfe, 0xa2, 0x45, 0x5e };</div>
<div class="line">uint8_t *sendbuf;</div>
<div class="line"> </div>
<div class="line">sendbuf = <a class="code hl_function" href="group__udp__user__api.html#gac133764142fbb68ec64ff13c01ed1208" title="Allocate memory for UDP send buffer. [thread-safe].">netUDP_GetBuffer</a> (2);</div>
<div class="line">sendbuf[0] = 0x01;</div>
<div class="line">sendbuf[1] = 0xAA;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="group__udp__user__api.html#ga7a82db98b82300e5fd03ce1b7afb6cba" title="Send data to a remote node. [thread-safe].">netUDP_Send</a> (udp_sock, &amp;addr, sendbuf, 2);</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga93496cfeb5f324f09dc81211243093cb" name="ga93496cfeb5f324f09dc81211243093cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93496cfeb5f324f09dc81211243093cb">&#9670;&#160;</a></span>netUDP_SetOption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netUDP_SetOption </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__netUDP__Enums.html#gae1f17f41d866b528526d55ea58ba162e">netUDP_Option</a>&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set UDP socket IP option. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16">netUDP_GetSocket</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">option</td><td>option name as defined with <a class="el" href="group__netUDP__Enums.html#gae1f17f41d866b528526d55ea58ba162e">netUDP_Option</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">val</td><td>option value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netUDP_SetOption</b> sets different options for an UDP socket identified by the argument <em>socket</em>.</p>
<p>The argument <em>option</em> specifies the UDP option that is to be set (see below).</p>
<p>The argument <em>val</em> carries the value of the UDP option that is to be set.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netUDP_OptionTOS</span>   </td><td class="markdownTableBodyNone">IPv4 Type of Service   </td><td class="markdownTableBodyNone">val=TOS    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netUDP_OptionTTL</span>   </td><td class="markdownTableBodyNone">IPv4 Multi-cast Time to Live   </td><td class="markdownTableBodyNone">val=TTL    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netUDP_OptionTrafficClass</span>   </td><td class="markdownTableBodyNone">IPv6 Traffic Class   </td><td class="markdownTableBodyNone">val=TrafficClass    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netUDP_OptionHopLimit</span>   </td><td class="markdownTableBodyNone">IPv6 Multi-cast Hop Limit   </td><td class="markdownTableBodyNone">val=HopLimit    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><span class="XML-Token">netUDP_OptionInterface</span>   </td><td class="markdownTableBodyNone">IPv4 Broadcast Interface   </td><td class="markdownTableBodyNone">val=if_id (class and number)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><span class="XML-Token">netUDP_OptionChecksum</span>   </td><td class="markdownTableBodyNone">UDP Checksum Options   </td><td class="markdownTableBodyNone">val=Options   </td></tr>
</table>
<p>The option <span class="XML-Token">netUDP_OptionInterface</span> specifies the network interface to be used for sending the broadcast message in the local network. By default the broadcast message is routed to the first LAN interface from the list where IPv4 is enabled. You can use this option to change the default interface for sending broadcast messages. Only used in IPv4.</p>
<p>For the option <span class="XML-Token">netUDP_OptionChecksum</span> the argument <em>val</em> is a combination of:</p><ul>
<li><a class="el" href="rl__net_8h.html#aa8e173af4c4b9ca9155105ff9aa55257">NET_UDP_CHECKSUM_SEND</a> - calculate the checksum for transmit packets,</li>
<li><a class="el" href="rl__net_8h.html#a8497adeb3534bca2a8de1962edc9c27d">NET_UDP_CHECKSUM_VERIFY</a> - calculate the checksum for received packets.</li>
</ul>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Option successfully set.</li>
<li><em>netInvalidParameter:</em> Invalid parameter provided.</li>
<li><em>netWrongState:</em> Requested socket not allocated.</li>
</ul>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line">int32_t udp_sock;</div>
<div class="line"> </div>
<div class="line">udp_sock = <a class="code hl_function" href="group__udp__user__api.html#gad087599bfea6f4d6c9e7bb601352fd16" title="Allocate a free UDP socket. [thread-safe].">netUDP_GetSocket</a> (udp_cb_func);</div>
<div class="line"><span class="keywordflow">if</span> (udp_sock &gt;= 0) {</div>
<div class="line">  <span class="comment">// Open UDP port 1000 for communication.</span></div>
<div class="line">  <a class="code hl_function" href="group__udp__user__api.html#ga688c8b42295a8bbe177f0eab181f9871" title="Open UDP socket for communication. [thread-safe].">netUDP_Open</a> (udp_sock, 1000);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Let UDP Multicast datagrams cross a router. </span></div>
<div class="line">  <a class="code hl_function" href="group__udp__user__api.html#ga93496cfeb5f324f09dc81211243093cb" title="Set UDP socket IP option. [thread-safe].">netUDP_SetOption</a> (udp_sock, <a class="code hl_enumvalue" href="rl__net_8h.html#gae1f17f41d866b528526d55ea58ba162eaed47e059088bb5ed25630721c60f3291" title="IPv4 Multi-cast Time to Live; val=TTL.">netUDP_OptionTTL</a>, 2);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
