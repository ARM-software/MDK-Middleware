<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network Component: Management Information Base (MIB) Interface</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "Network Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__mib__interface.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Management Information Base (MIB) Interface<div class="ingroups"><a class="el" href="group__netServices.html">Services</a> &raquo; <a class="el" href="group__netSNMP__Func.html">SNMP Agent</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Management Information Base (MIB) Interface.  
</p>
<p>Management Information Base (MIB) Interface. </p>
<p>The database controlled by the SNMP Agent is referred to as the <a href="https://en.wikipedia.org/wiki/Management_information_base" target="_blank">Management Information Base (MIB)</a>. It is a standard set of statistical and control values. SNMP allows the extension of these standard values with values specific to a particular agent through the use of private MIBs.</p>
<p>The definitions of MIB variables supported by a particular agent are incorporated in descriptor files, written in <a href="https://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One" target="_blank">Abstract Syntax Notation (ASN.1)</a> format, made available to network management client programs so that they can become aware of these MIB variables and their usage.</p>
<p>The MIB variables are referred to as MIB <a href="https://en.wikipedia.org/wiki/Object_identifier" target="_blank">Object Identifiers (OIDs)</a>. OID names are hierarchy structured and unique. SNMP uses the OID to identify objects on each network element (device running SNMP agent) that can be managed using SNMP.</p>
<p>The SNMP Agent manages MIB variables that are located in the <b>SNMP_Agent_MIB.c</b> template file. To add the file to your project, simply right-click on the Source group, select <b>Add New Item to Group</b>, then click on <b>User Code Template</b> and scroll in the template files list until you find the <b>SNMP Agent</b> template. The <b>SNMP_Agent_MIB.c</b> file has implemented a scaled-down <b>MIB-II</b> Management Information Base. Only the System <b>MIB</b> is defined by default. The user might expand this table by adding his own MIB variables.</p>
<p>The user can register a callback function with a MIB variable. This function gets called, when the SNMP Manager accesses the MIB variable. This concept allows the SNMP Manager to control the SNMP Agent system. For example to change LED outputs, to write text on embedded LCD module, to read push buttons or analog inputs, etc.</p>
<p><a class="anchor" id="mib_entry"></a></p>
<h2><a class="anchor" id="autotoc_md71"></a>
MIB Entry</h2>
<p>The SNMP MIB entry information structure <a class="el" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO">NET_SNMP_MIB_INFO</a> describes the MIB variable. The SNMP Agent uses this description to process local MIB variables. This structure is defined as follows: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>net_snmp_mib_info {</div>
<div class="line">  uint8_t  type;                        <span class="comment">// Object Type</span></div>
<div class="line">  uint8_t  oid_len;                     <span class="comment">// Object ID length</span></div>
<div class="line">  uint8_t  oid[<a class="code hl_define" href="rl__net_8h.html#aa68240bfc4b59f400d36cf6a9f3527d4" title="Max.size of Object ID value.">NET_SNMP_MIB_OID_SIZE</a>];  <span class="comment">// Object ID value</span></div>
<div class="line">  uint8_t  var_size;                    <span class="comment">// Size of a variable</span></div>
<div class="line">  <span class="keywordtype">void</span>     *var;                        <span class="comment">// Pointer to a variable</span></div>
<div class="line">  void     (*cb_func)(int32_t mode);    <span class="comment">// Write/Read event callback function</span></div>
<div class="line">} <span class="keyword">const</span> <a class="code hl_struct" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO" title="SNMP-MIB Entry information.">NET_SNMP_MIB_INFO</a>;</div>
</div><!-- fragment --><p> The components of <a class="el" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO" title="SNMP-MIB Entry information.">NET_SNMP_MIB_INFO</a> structure are:</p><ul>
<li>the <em class="arg">type</em> defines the MIB variable type: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">MIB Type   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Size    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_INTEGER   </td><td class="markdownTableBodyNone">Signed Integer   </td><td class="markdownTableBodyNone">1, 2 or 4 bytes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NET_SNMP_MIB_OCTET_STR   </td><td class="markdownTableBodyNone">Octet String entry   </td><td class="markdownTableBodyNone">max. 110 characters    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_BYTE_STR   </td><td class="markdownTableBodyNone">Byte String entry   </td><td class="markdownTableBodyNone">max. 110 bytes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NET_SNMP_MIB_OBJECT_ID   </td><td class="markdownTableBodyNone">Object Identifier entry   </td><td class="markdownTableBodyNone">max. 17 bytes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_IP_ADDR   </td><td class="markdownTableBodyNone">IP Address entry   </td><td class="markdownTableBodyNone">4 bytes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NET_SNMP_MIB_COUNTER   </td><td class="markdownTableBodyNone">Counter entry   </td><td class="markdownTableBodyNone">1, 2 or 4 bytes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_GAUGE   </td><td class="markdownTableBodyNone">Gauge entry   </td><td class="markdownTableBodyNone">1, 2 or 4 bytes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NET_SNMP_MIB_TIME_TICKS   </td><td class="markdownTableBodyNone">Time Ticks entry   </td><td class="markdownTableBodyNone">4 bytes   </td></tr>
</table>
The <em class="arg">type</em> component may be OR-ed with the <b>NET_SNMP_MIB_ATR_RO</b> read-only attribute. A read-only variable can not be changed by the SNMP Manager.</li>
<li>the OID specifies the Object Identification Name of the variable. It is length encoded:<ul>
<li><em class="arg">oid_len</em> specifies the length of the <em class="arg">oid</em>[] array.</li>
<li><em class="arg">oid</em>[NET_SNMP_MIB_OID_SIZE] array specifies the OID name - a length encoded binary array.</li>
</ul>
</li>
<li><em class="arg">var</em> specifies the Pointer to the variable and its Size:<ul>
<li><em class="arg">var_size</em> specifies the size of var variable.</li>
<li><em class="arg">var</em> is a pointer to the actual variable.</li>
</ul>
</li>
<li>the <em class="arg">cb_func</em> specifies a callback function which is called, when the variable is accessed by SNMP Manager. The callback function is not registered, when the value of <em class="arg">cb_func</em> is <span class="XML-Token">NULL</span>. The argument <em class="arg">mode</em> of the callback function specifies the access mode of SNMP Manager: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Mode   </th><th class="markdownTableHeadNone">Type of Access    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_READ   </td><td class="markdownTableBodyNone">Reads a MIB variable.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NET_SNMP_MIB_WRITE   </td><td class="markdownTableBodyNone">Writes to a MIB variable.   </td></tr>
</table>
</li>
</ul>
<p><a class="anchor" id="mib_data_table"></a></p>
<h2><a class="anchor" id="autotoc_md72"></a>
MIB Table</h2>
<p>The <b>MIB</b> Table table is defined as an array. The components of this array are of type <a class="el" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO">NET_SNMP_MIB_INFO</a>. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_struct" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO" title="SNMP-MIB Entry information.">NET_SNMP_MIB_INFO</a> mib_table[] = {</div>
<div class="line"><span class="comment">// ---------- System MIB ----------- </span></div>
<div class="line">  <span class="comment">// SysDescr Entry</span></div>
<div class="line">  { <a class="code hl_define" href="rl__net_8h.html#a6e25c850163c27f9d1151943c1a52a72" title="MIB entry type OCTET_STRING (null-terminated)">NET_SNMP_MIB_OCTET_STR</a> | <a class="code hl_define" href="rl__net_8h.html#a1caf9c451b6068cfc6c72abff08a756e" title="MIB entry attribute READ_ONLY.">NET_SNMP_MIB_ATR_RO</a>,</div>
<div class="line">    8, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 2, 1, 1, 1, 0},</div>
<div class="line">    <a class="code hl_define" href="rl__net_8h.html#ab47bb233395f6f92e24dc4045c1b22af" title="SNMP-MIB macros.">NET_SNMP_MIB_STR</a>(<span class="stringliteral">&quot;Embedded System SNMP V1.0&quot;</span>),</div>
<div class="line">    NULL },</div>
<div class="line">  <span class="comment">// SysObjectID Entry</span></div>
<div class="line">  { <a class="code hl_define" href="rl__net_8h.html#ae65e03dc842d28867c7b55a7e5d0ef14" title="MIB entry type OBJECT_IDENTIFIER.">NET_SNMP_MIB_OBJECT_ID</a> | <a class="code hl_define" href="rl__net_8h.html#a1caf9c451b6068cfc6c72abff08a756e" title="MIB entry attribute READ_ONLY.">NET_SNMP_MIB_ATR_RO</a>,</div>
<div class="line">    8, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 2, 1, 1, 2, 0},</div>
<div class="line">    <a class="code hl_define" href="rl__net_8h.html#ab47bb233395f6f92e24dc4045c1b22af" title="SNMP-MIB macros.">NET_SNMP_MIB_STR</a>(<span class="stringliteral">&quot;\x2b\x06\x01\x02\x01\x01\x02\x00&quot;</span>),</div>
<div class="line">    NULL },</div>
<div class="line">  <span class="comment">// SysUpTime Entry</span></div>
<div class="line">  { <a class="code hl_define" href="rl__net_8h.html#a34ec36a2f3aa31cf7af547c1109aeb68" title="MIB entry type TIME_TICKS.">NET_SNMP_MIB_TIME_TICKS</a> | <a class="code hl_define" href="rl__net_8h.html#a1caf9c451b6068cfc6c72abff08a756e" title="MIB entry attribute READ_ONLY.">NET_SNMP_MIB_ATR_RO</a>,</div>
<div class="line">    8, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 2, 1, 1, 3, 0},</div>
<div class="line">    4, &amp;snmp_SysUpTime,</div>
<div class="line">    NULL },</div>
<div class="line">    ..</div>
<div class="line">}</div>
</div><!-- fragment --><p> In the following example, we will construct a MIB variable entry <b>LedOut</b>. It will allow the SNMP Manager to control LEDs on an evaluation board.</p>
<p>The MIB variable <b>type</b> is Integer. An uint8_t variable is sufficient, because the LED port is 8-bit: </p><div class="fragment"><div class="line"><span class="comment">// LedOut Entry</span></div>
<div class="line">{ <a class="code hl_define" href="rl__net_8h.html#a3331bd3d72927ae1ce71898ac8a5250f" title="SNMP-MIB definitions.">NET_SNMP_MIB_INTEGER</a>,</div>
</div><!-- fragment --><p>The OID reference is 1.3.6.1.3.1.0. It is defined in the <b>Experimental</b> MIB branch of the MIB tree: </p><div class="fragment"><div class="line">6, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 3, 1, 0},</div>
</div><!-- fragment --><ul>
<li>the first byte defines the <b>length</b> of the OID name,</li>
<li>macro <b>NET_SNMP_MIB_OID0</b> calculates the first byte of OID value from 1st and 2nd address byte,</li>
<li>the value of an OID address byte must be less than 128, otherwise an <b>extended</b> encoding must be used.</li>
</ul>
<p>The variable size and location is described with the help of <b>NET_SNMP_MIB_INT</b> macro: </p><div class="fragment"><div class="line"><a class="code hl_define" href="rl__net_8h.html#a8e69467d6fabcce6c6edcef778e45465">NET_SNMP_MIB_INT</a>(LedOut),</div>
</div><!-- fragment --><p> The following macros are defined: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro   </th><th class="markdownTableHeadNone">Variable Definition    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_STR   </td><td class="markdownTableBodyNone">Octet or Byte String size and location.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">NET_SNMP_MIB_INT   </td><td class="markdownTableBodyNone">Signed or Unsigned Integer size and location.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">NET_SNMP_MIB_IP   </td><td class="markdownTableBodyNone">IP Address size and location.   </td></tr>
</table>
<p>The <b>write_leds</b> is specified as callback function. It gets called when the <b>LedOut</b> is written: </p><div class="fragment"><div class="line">write_leds },</div>
</div><!-- fragment --><p>Finally we need the actual variable definition: </p><div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t LedOut;</div>
</div><!-- fragment --><p>For the <b>LedOut</b> control we actually need the following parts of code to be defined in <b>SNMP_Agent_MIB.c</b> module: </p><div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t LedOut;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> write_leds (int32_t mode);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_struct" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO" title="SNMP-MIB Entry information.">NET_SNMP_MIB_INFO</a> snmp_mib[] = {</div>
<div class="line">    ..</div>
<div class="line">  <span class="comment">// LedOut Entry</span></div>
<div class="line">  { <a class="code hl_define" href="rl__net_8h.html#a3331bd3d72927ae1ce71898ac8a5250f" title="SNMP-MIB definitions.">NET_SNMP_MIB_INTEGER</a>,</div>
<div class="line">    6, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 3, 1, 0},</div>
<div class="line">    <a class="code hl_define" href="rl__net_8h.html#a8e69467d6fabcce6c6edcef778e45465">NET_SNMP_MIB_INT</a>(LedOut),</div>
<div class="line">    write_leds },</div>
<div class="line">    ..</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> write_leds (int32_t mode) {</div>
<div class="line">  <span class="comment">// No action on read access.</span></div>
<div class="line">  <span class="keywordflow">if</span> (mode == <a class="code hl_define" href="rl__net_8h.html#ae8095e763f09c922ebc43292528c2786" title="MIB entry Write access.">NET_SNMP_MIB_WRITE</a>) {</div>
<div class="line">    LED_SetOut (LedOut);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md73"></a>
String Handling</h2>
<p>Two types of read/write strings are supported: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">OCTET_STRING   </td><td class="markdownTableBodyNone">An 0-terminating ascii string.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">BYTE_STRING   </td><td class="markdownTableBodyNone">Length-encoded binary string.   </td></tr>
</table>
<p>The <b>OCTET_STRING</b> is treated as an 0-terminating ascii string, the last character in the string is a zero character. When the ascii string is written in the SET request, a 0-termination is added. The position of the zero character specifies the length of the data encoded in the GET response.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> ascii_str[20];</div>
<div class="line">    ..</div>
<div class="line">  strcpy (ascii_str, <span class="stringliteral">&quot;embedded&quot;</span>);</div>
<div class="line">    ..</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_struct" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO" title="SNMP-MIB Entry information.">NET_SNMP_MIB_INFO</a> snmp_mib[] = {</div>
<div class="line">    ..</div>
<div class="line">  <span class="comment">// Ascii String Entry</span></div>
<div class="line">  { <a class="code hl_define" href="rl__net_8h.html#a6e25c850163c27f9d1151943c1a52a72" title="MIB entry type OCTET_STRING (null-terminated)">NET_SNMP_MIB_OCTET_STR</a>,</div>
<div class="line">    6, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 3, 2, 0},</div>
<div class="line">    <a class="code hl_define" href="rl__net_8h.html#ab47bb233395f6f92e24dc4045c1b22af" title="SNMP-MIB macros.">NET_SNMP_MIB_STR</a>(ascii_str),</div>
<div class="line">    NULL },</div>
<div class="line">    ..</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <b>BYTE_STRING</b> is treated as a length-encoded binary string. The first byte in the string is the length of the string. The contents of the string are stored from the second byte onwards. When the byte string is written in the SET request, the <em>len</em> is updated. The <em>len</em> specifies the length of the data encoded in the GET response.</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t byte_str[20];</div>
<div class="line">    ..</div>
<div class="line">  <a class="code hl_struct" href="rl__net_8h.html#structNET__SNMP__BYTE__STR" title="SNMP-MIB byte-string.">NET_SNMP_BYTE_STR</a> *bp = (<a class="code hl_struct" href="rl__net_8h.html#structNET__SNMP__BYTE__STR" title="SNMP-MIB byte-string.">NET_SNMP_BYTE_STR</a> *)&amp;byte_str;</div>
<div class="line">  bp-&gt;<a class="code hl_variable" href="rl__net_8h.html#a5723e60ffd628510c699eddbce90be23" title="Length of a string.">len</a> = 4;</div>
<div class="line">  bp-&gt;<a class="code hl_variable" href="rl__net_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a" title="String content.">data</a>[0] = 0;</div>
<div class="line">  bp-&gt;<a class="code hl_variable" href="rl__net_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a" title="String content.">data</a>[1] = 2;</div>
<div class="line">  bp-&gt;<a class="code hl_variable" href="rl__net_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a" title="String content.">data</a>[2] = 0;</div>
<div class="line">  bp-&gt;<a class="code hl_variable" href="rl__net_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a" title="String content.">data</a>[3] = 0;</div>
<div class="line">    ..</div>
<div class="line"> </div>
<div class="line"><span class="keyword">const</span> <a class="code hl_struct" href="group__snmp__structs.html#structNET__SNMP__MIB__INFO" title="SNMP-MIB Entry information.">NET_SNMP_MIB_INFO</a> snmp_mib[] = {</div>
<div class="line">    ..</div>
<div class="line">  <span class="comment">// Byte String Entry</span></div>
<div class="line">  { <a class="code hl_define" href="rl__net_8h.html#aea702dc267c2518a301bb338e1023b8c" title="MIB entry type BYTE_STRING (length encoded)">NET_SNMP_MIB_BYTE_STR</a>,</div>
<div class="line">    6, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 3, 3, 0},</div>
<div class="line">    <a class="code hl_define" href="rl__net_8h.html#ab47bb233395f6f92e24dc4045c1b22af" title="SNMP-MIB macros.">NET_SNMP_MIB_STR</a>(byte_str),</div>
<div class="line">    NULL },</div>
<div class="line">    ..</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md74"></a>
Extended OID Encoding</h2>
<p>The value of OID address byte must be less than <b>128</b>. If it is not, an OID address must be encoded in extended format. This is because the high bit of an address byte is an address <b>extension bit</b>.</p>
<p>For example, the OID address 1.3.6.1.4.1.<b>311</b>.0 is encoded as: </p><div class="fragment"><div class="line">8, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 4, 1, 130, 55, 0},</div>
</div><!-- fragment --><p>The address value for the highlighted numbers is calculated as: </p><div class="fragment"><div class="line">(130-128) * 128 + 55 = 311</div>
</div><!-- fragment --><p>The OID address 1.3.6.1.4.1.<b>31036</b>.50.1.1.0 is encoded as: </p><div class="fragment"><div class="line">12, {<a class="code hl_define" href="rl__net_8h.html#aa4f513d3fe2e5edf191f3bdb498fa7d0">NET_SNMP_MIB_OID0</a>(1,3), 6, 1, 4, 1, 129, 242, 60, 50, 1, 1, 0},</div>
</div><!-- fragment --><p>where the value 31036 is calculated as: </p><div class="fragment"><div class="line">(129-128) * 128 * 128 + (242-128) * 128 + 60 = 31036</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
