<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: User API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__usbh__hidFunctions__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">User API<div class="ingroups"><a class="el" href="group__usbh.html">USB Host</a> &raquo; <a class="el" href="group__usbh__DevClassFunctions.html">Device Class</a> &raquo; <a class="el" href="group__usbh__hidFunctions.html">HID: Human Interface Device Class</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>User API reference of the Human Interface Device Class.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaeb3125192bb71b0b3feb8529ef641abf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#gaeb3125192bb71b0b3feb8529ef641abf">USBH_HID_Initialize</a> (uint8_t instance)</td></tr>
<tr class="memdesc:gaeb3125192bb71b0b3feb8529ef641abf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when Human Interface Device was enumerated and is ready.  <br /></td></tr>
<tr class="separator:gaeb3125192bb71b0b3feb8529ef641abf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0">USBH_HID_Uninitialize</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when Human Interface Device was disconnected.  <br /></td></tr>
<tr class="separator:ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad565d4443916b27d72dd1967106c712e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#gad565d4443916b27d72dd1967106c712e">USBH_HID_GetDevice</a> (uint8_t instance)</td></tr>
<tr class="memdesc:gad565d4443916b27d72dd1967106c712e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Device instance of Human Interface Device.  <br /></td></tr>
<tr class="separator:gad565d4443916b27d72dd1967106c712e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87af2b86ae68781e915cc887d9c6ac67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga87af2b86ae68781e915cc887d9c6ac67">USBH_HID_GetStatus</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga87af2b86ae68781e915cc887d9c6ac67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get status of Human Interface Device.  <br /></td></tr>
<tr class="separator:ga87af2b86ae68781e915cc887d9c6ac67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35bdd4f4d943a627050ab052474eeadd"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga35bdd4f4d943a627050ab052474eeadd">USBH_HID_Read</a> (uint8_t instance, uint8_t *buf, int32_t len)</td></tr>
<tr class="memdesc:ga35bdd4f4d943a627050ab052474eeadd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data received from Human Interface Device.  <br /></td></tr>
<tr class="separator:ga35bdd4f4d943a627050ab052474eeadd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a2fb083a4f3a0118d06d68a9c56976f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga3a2fb083a4f3a0118d06d68a9c56976f">USBH_HID_Write</a> (uint8_t instance, const uint8_t *buf, int32_t len)</td></tr>
<tr class="memdesc:ga3a2fb083a4f3a0118d06d68a9c56976f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write data to Human Interface Device.  <br /></td></tr>
<tr class="separator:ga3a2fb083a4f3a0118d06d68a9c56976f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26b69d81b39f1f13c1fa7e8fec33507e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga26b69d81b39f1f13c1fa7e8fec33507e">USBH_HID_GetKeyboardKey</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga26b69d81b39f1f13c1fa7e8fec33507e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve first pending pressed keyboard key on HID Keyboard.  <br /></td></tr>
<tr class="separator:ga26b69d81b39f1f13c1fa7e8fec33507e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98d19f9c877d3d4d7bdd1e4b97dbc96c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga98d19f9c877d3d4d7bdd1e4b97dbc96c">USBH_HID_GetMouseState</a> (uint8_t instance, <a class="el" href="group__usbh__data__types.html#structusbHID__MouseState">usbHID_MouseState</a> *state)</td></tr>
<tr class="memdesc:ga98d19f9c877d3d4d7bdd1e4b97dbc96c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve state change since last call of this function.  <br /></td></tr>
<tr class="separator:ga98d19f9c877d3d4d7bdd1e4b97dbc96c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f069828dc338fb8f3e1d839e28b8f5a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga6f069828dc338fb8f3e1d839e28b8f5a">USBH_HID_ParseReportDescriptor</a> (uint8_t instance, const uint8_t *ptr_hid_report_desc, uint32_t len)</td></tr>
<tr class="memdesc:ga6f069828dc338fb8f3e1d839e28b8f5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called for parsing of the Human Interface Device report descriptor.  <br /></td></tr>
<tr class="separator:ga6f069828dc338fb8f3e1d839e28b8f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1855b754edcc9307ddffad04db313ac4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hidFunctions__api.html#ga1855b754edcc9307ddffad04db313ac4">USBH_HID_DataReceived</a> (uint8_t instance, uint32_t len)</td></tr>
<tr class="memdesc:ga1855b754edcc9307ddffad04db313ac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when data is received from the Human Interface Device.  <br /></td></tr>
<tr class="separator:ga1855b754edcc9307ddffad04db313ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>User API reference of the Human Interface Device Class. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga1855b754edcc9307ddffad04db313ac4" name="ga1855b754edcc9307ddffad04db313ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1855b754edcc9307ddffad04db313ac4">&#9670;&#160;</a></span>USBH_HID_DataReceived()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBH_HID_DataReceived </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when data is received from the Human Interface Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance index. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of received data.</td></tr>
  </table>
  </dd>
</dl>
<p>The <b>USBH_HID_DataReceived</b> function enables programmers to analyze received data coming from an USB HID device. Implementing this function in user code overrides the USB Component function that handles boot protocol device data reception. This is useful if the default HID functionality needs to be changed to support special HID devices. </p>

</div>
</div>
<a id="gad565d4443916b27d72dd1967106c712e" name="gad565d4443916b27d72dd1967106c712e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad565d4443916b27d72dd1967106c712e">&#9670;&#160;</a></span>USBH_HID_GetDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t USBH_HID_GetDevice </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Device instance of Human Interface Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>instance of Device or non-existing Device instance :<ul>
<li>value &lt;= 127 : instance of Device</li>
<li>value 255 : non-existing Device instance</li>
</ul>
</dd></dl>
<p>The function <b>USBH_HID_GetDevice</b> is used to retrieve device instance that is used to handle human interface device instance.</p>
<p>The argument <em>instance</em> specifies the HID device instance. </p>

</div>
</div>
<a id="ga26b69d81b39f1f13c1fa7e8fec33507e" name="ga26b69d81b39f1f13c1fa7e8fec33507e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26b69d81b39f1f13c1fa7e8fec33507e">&#9670;&#160;</a></span>USBH_HID_GetKeyboardKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBH_HID_GetKeyboardKey </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve first pending pressed keyboard key on HID Keyboard. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>code of first pressed unread key or no key was pressed :<ul>
<li>value &gt;= 0 : code of first pressed unread key</li>
<li>value -1 : indicates no key was pressed since last time this function was called</li>
</ul>
</dd></dl>
<p>The function <b>USBH_HID_GetKeyboardKey</b> enables programmers to handle signals from a USB keyboard.</p>
<p>The argument <em>instance</em> specifies the HID device instance.</p>
<p>The function returns an integer value of the first pending keystroke. Characters that are directly mapped into ASCII are the HID codes starting from 4 (representing 'a') up to to 57 (representing '/'). All other HID codes are passed by this function using bit 16. set to '1' to notify the application about extended non-ASCII mapped HID codes. Modifier keys are encoded in bits 8..15 with following encoding: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Bit   </th><th class="markdownTableHeadNone">Modifier Key    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">Left Control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">Left Shift    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">Left Alt    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">11   </td><td class="markdownTableBodyNone">Left GUI    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">12   </td><td class="markdownTableBodyNone">Right Control    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">Right Shift    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">14   </td><td class="markdownTableBodyNone">Right Alt    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">15   </td><td class="markdownTableBodyNone">Right GUI   </td></tr>
</table>
<p>Consult the USB-IF's online documentation for information on <a href="https://usb.org/sites/default/files/hut1_4.pdf" target="_blank">HID Usage Tables</a> relevant usage page for this function is Keyboard/Keypad Page 0x07.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  <a class="code hl_enumeration" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f" title="Status code values returned by USB library functions.">usbStatus</a> usb_status;                 <span class="comment">// USB status</span></div>
<div class="line">  <span class="keywordtype">int</span>       status;                     <span class="comment">// Generic status</span></div>
<div class="line">  <span class="keywordtype">int</span>       ch;                         <span class="comment">// Character</span></div>
<div class="line">  uint8_t   con = 0U;                   <span class="comment">// Connection status of keyboard</span></div>
<div class="line"> </div>
<div class="line">  SystemCoreClockUpdate();              <span class="comment">// Update system clock</span></div>
<div class="line"> </div>
<div class="line">  status = stdout_init ();              <span class="comment">// Initialize retargeted stdout</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != 0) {</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {}                         <span class="comment">// Handle stdout init failure</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  usb_status = <a class="code hl_function" href="group__usbh__coreFunctions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5" title="Initialize USB Host stack and controller.">USBH_Initialize</a> (0U);    <span class="comment">// Initialize USB Host 0</span></div>
<div class="line">  <span class="keywordflow">if</span> (usb_status != <a class="code hl_enumvalue" href="rl__usb_8h.html#ga8196235c97e113f17993c7b4baff5f8facfe6cb72ed8e7b8e95a38cbf95418dbf" title="Function completed with no error.">usbOK</a>) {</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {}                         <span class="comment">// Handle USB Host 0 init failure</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (;;) {</div>
<div class="line">    usb_status= <a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga87af2b86ae68781e915cc887d9c6ac67" title="Get status of Human Interface Device.">USBH_HID_GetStatus</a>(0U); <span class="comment">// Get HID device status</span></div>
<div class="line">    <span class="keywordflow">if</span> (usb_status == <a class="code hl_enumvalue" href="rl__usb_8h.html#ga8196235c97e113f17993c7b4baff5f8facfe6cb72ed8e7b8e95a38cbf95418dbf" title="Function completed with no error.">usbOK</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (con == 0U) {                  <span class="comment">// If keyboard was not connected previously</span></div>
<div class="line">        con = 1U;                       <span class="comment">// Keyboard got connected</span></div>
<div class="line">        printf (<span class="stringliteral">&quot;Connect!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (con == 1U) {                  <span class="comment">// If keyboard was connected previously</span></div>
<div class="line">        con = 0U;                       <span class="comment">// Keyboard got disconnected</span></div>
<div class="line">        printf (<span class="stringliteral">&quot;\nDisconnect!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (con != 0U) {                    <span class="comment">// If keyboard is active</span></div>
<div class="line">      ch = <a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga26b69d81b39f1f13c1fa7e8fec33507e" title="Retrieve first pending pressed keyboard key on HID Keyboard.">USBH_HID_GetKeyboardKey</a> (0U);<span class="comment">// Get pressed key</span></div>
<div class="line">      <span class="keywordflow">if</span> (ch != -1) {                   <span class="comment">// If valid key value</span></div>
<div class="line">        <span class="keywordflow">if</span> ((ch &amp; 0x10000) != 0) {      <span class="comment">// Handle non-ASCII translated keys (Keypad 0 .. 9)</span></div>
<div class="line">                                        <span class="comment">// Bit  16:    non-ASCII bit (0 = ASCII, 1 = not ASCII)</span></div>
<div class="line">                                        <span class="comment">// Bits 15..8: modifiers (SHIFT, ALT, CTRL, GUI)</span></div>
<div class="line">                                        <span class="comment">// Bits  7..0: ASCII or HID key Usage ID if not ASCII</span></div>
<div class="line">          ch &amp;= 0xFF;                   <span class="comment">// Remove non-ASCII bit and modifiers</span></div>
<div class="line">          <span class="keywordflow">if</span> ((ch&gt;=0x59)&amp;&amp;(ch&lt;=0x61)) { <span class="comment">// Keypad 1 .. 9 key convert to</span></div>
<div class="line">            ch = (ch - 0x59) + <span class="charliteral">&#39;1&#39;</span>;     <span class="comment">// ASCII  1 .. 9</span></div>
<div class="line">          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch == 0x62) {      <span class="comment">// Keypad 0 key convert to</span></div>
<div class="line">            ch = <span class="charliteral">&#39;0&#39;</span>;                   <span class="comment">// ASCII  0</span></div>
<div class="line">          } <span class="keywordflow">else</span> {                      <span class="comment">// If not Keypad 0 .. 9</span></div>
<div class="line">            ch = -1;                    <span class="comment">// invalidate the key</span></div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> ((ch &gt; 0) &amp;&amp; (ch &lt; 128)) {   <span class="comment">// Output ASCII 0 .. 127 range</span></div>
<div class="line">          putchar(ch);</div>
<div class="line">          fflush(stdout);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    osDelay(10U);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga98d19f9c877d3d4d7bdd1e4b97dbc96c" name="ga98d19f9c877d3d4d7bdd1e4b97dbc96c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga98d19f9c877d3d4d7bdd1e4b97dbc96c">&#9670;&#160;</a></span>USBH_HID_GetMouseState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBH_HID_GetMouseState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__usbh__data__types.html#structusbHID__MouseState">usbHID_MouseState</a> *&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve state change since last call of this function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">state</td><td>pointer to mouse state <a class="el" href="group__usbh__data__types.html#structusbHID__MouseState">usbHID_MouseState</a> structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a>.</dd></dl>
<p>The function <b>USBH_HID_GetMouseState</b> enables programmers to handle signals from an USB mouse.</p>
<p>The argument <em>instance</em> specifies the HID device instance.</p>
<p>The argument <em>state</em> is a pointer to the mouse state structure (<a class="el" href="group__usbh__data__types.html#structusbHID__MouseState">usbHID_MouseState</a>).</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> getmouse (<span class="keywordtype">void</span>)  {</div>
<div class="line">  ..</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga98d19f9c877d3d4d7bdd1e4b97dbc96c" title="Retrieve state change since last call of this function.">USBH_HID_GetMouseState</a> (0, &amp;MouseState)) { <span class="comment">// If mouse move</span></div>
<div class="line">    ..</div>
<div class="line">  }</div>
<div class="line">)</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga87af2b86ae68781e915cc887d9c6ac67" name="ga87af2b86ae68781e915cc887d9c6ac67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87af2b86ae68781e915cc887d9c6ac67">&#9670;&#160;</a></span>USBH_HID_GetStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a> USBH_HID_GetStatus </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get status of Human Interface Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a>.</dd></dl>
<p>The function <b>USBH_HID_GetStatus</b> checks whether the human interface device is connected and initialized.</p>
<p>The argument <em>instance</em> specifies the HID device instance.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  <a class="code hl_enumeration" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f" title="Status code values returned by USB library functions.">usbStatus</a> usb_status;                 <span class="comment">// USB status</span></div>
<div class="line"> </div>
<div class="line">  usb_status = <a class="code hl_function" href="group__usbh__coreFunctions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5" title="Initialize USB Host stack and controller.">USBH_Initialize</a> (0U);    <span class="comment">// Initialize USB Host 0</span></div>
<div class="line">  <span class="keywordflow">if</span> (usb_status != <a class="code hl_enumvalue" href="rl__usb_8h.html#ga8196235c97e113f17993c7b4baff5f8facfe6cb72ed8e7b8e95a38cbf95418dbf" title="Function completed with no error.">usbOK</a>) {</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {}                         <span class="comment">// Handle USB Host 0 init failure</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    usb_status= <a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga87af2b86ae68781e915cc887d9c6ac67" title="Get status of Human Interface Device.">USBH_HID_GetStatus</a>(0U); <span class="comment">// Get HID device status</span></div>
<div class="line">    <span class="keywordflow">if</span> (usb_status == <a class="code hl_enumvalue" href="rl__usb_8h.html#ga8196235c97e113f17993c7b4baff5f8facfe6cb72ed8e7b8e95a38cbf95418dbf" title="Function completed with no error.">usbOK</a>) {</div>
<div class="line">      <span class="comment">//do something</span></div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gaeb3125192bb71b0b3feb8529ef641abf" name="gaeb3125192bb71b0b3feb8529ef641abf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeb3125192bb71b0b3feb8529ef641abf">&#9670;&#160;</a></span>USBH_HID_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBH_HID_Initialize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when Human Interface Device was enumerated and is ready. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device.</td></tr>
  </table>
  </dd>
</dl>
<p>The function <b>USBH_HID_Initialize</b> is called when a human interface device was connected and successfully enumerated and is ready for communication.</p>
<p>The argument <em>instance</em> specifies the HID device instance. </p>

</div>
</div>
<a id="ga6f069828dc338fb8f3e1d839e28b8f5a" name="ga6f069828dc338fb8f3e1d839e28b8f5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f069828dc338fb8f3e1d839e28b8f5a">&#9670;&#160;</a></span>USBH_HID_ParseReportDescriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBH_HID_ParseReportDescriptor </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ptr_hid_report_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called for parsing of the Human Interface Device report descriptor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance index. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr_hid_report_desc</td><td>pointer to HID report descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of HID report descriptor.</td></tr>
  </table>
  </dd>
</dl>
<p>The <b>USBH_HID_ParseReportDescriptor</b> function enables programmers to parse report descriptors of an USB HID device. This is useful if the default HID functionality needs to be changed to support special HID devices. </p>

</div>
</div>
<a id="ga35bdd4f4d943a627050ab052474eeadd" name="ga35bdd4f4d943a627050ab052474eeadd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35bdd4f4d943a627050ab052474eeadd">&#9670;&#160;</a></span>USBH_HID_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBH_HID_Read </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read data received from Human Interface Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>buffer that receives data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>maximum number of bytes to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read or execution status :<ul>
<li>value &gt;= 0 : number of bytes read</li>
<li>value &lt; 0 : error occurred, -value is execution status as defined with <a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a></li>
</ul>
</dd></dl>
<p>The function <b>USBH_HID_Read</b> retrieves the data sent by an USB HID device and stores it in a buffer.</p>
<p>The argument <em>instance</em> specifies the HID device instance.</p>
<p>The argument <em>buf</em> is pointing to the location where the data will be returned (stored). It is recommended that buffer is 4-byte aligned as some drivers might not support 1-byte alignment if DMA is used.</p>
<p>The argument <em>len</em> specifies the number of bytes to be read (must be multiple of HID device Interrupt In endpoint maximum packet size).</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> HID_start_data_reception (<span class="keywordtype">void</span>)  {</div>
<div class="line">  U8 data[16];</div>
<div class="line">  ..</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga35bdd4f4d943a627050ab052474eeadd" title="Read data received from Human Interface Device.">USBH_HID_Read</a> (0, &amp;data, 2)) {  <span class="comment">// If data received from HID device</span></div>
<div class="line">    ..</div>
<div class="line">  }</div>
<div class="line">)</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0" name="ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9b98d20c76bcfd8dd4cd1bd4bb00bcd0">&#9670;&#160;</a></span>USBH_HID_Uninitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBH_HID_Uninitialize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when Human Interface Device was disconnected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device.</td></tr>
  </table>
  </dd>
</dl>
<p>The function <b>USBH_HID_Unitialize</b> is called when a human interface device was disconnected form the USB Bus.</p>
<p>The argument <em>instance</em> specifies the HID device instance. </p>

</div>
</div>
<a id="ga3a2fb083a4f3a0118d06d68a9c56976f" name="ga3a2fb083a4f3a0118d06d68a9c56976f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a2fb083a4f3a0118d06d68a9c56976f">&#9670;&#160;</a></span>USBH_HID_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBH_HID_Write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write data to Human Interface Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>instance of HID Device. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>data buffer containing data to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>number of data bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes accepted for writing or execution status :<ul>
<li>value &gt;= 0 : number of bytes accepted for writing</li>
<li>value &lt; 0 : error occurred, -value is execution status as defined with <a class="el" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f">usbStatus</a></li>
</ul>
</dd></dl>
<p>The function <b>USBH_HID_Write</b> writes data from a buffer to an USB HID device.</p>
<p>The argument <em>instance</em> specifies the HID device instance.</p>
<p>The argument <em>buf</em> is pointing to the location where the data will be written. It is recommended that buffer is 4-byte aligned as some drivers might not support 1-byte alignment if DMA is used.</p>
<p>The argument <em>len</em> specifies the number of data bytes to be written.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__usb_8h.html">rl_usb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  <a class="code hl_enumeration" href="group__status__error__codes__usb.html#ga8196235c97e113f17993c7b4baff5f8f" title="Status code values returned by USB library functions.">usbStatus</a> usb_status;                 <span class="comment">// USB status</span></div>
<div class="line">  uint8_t   out;</div>
<div class="line"> </div>
<div class="line">  usb_status = <a class="code hl_function" href="group__usbh__coreFunctions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5" title="Initialize USB Host stack and controller.">USBH_Initialize</a> (0U);    <span class="comment">// Initialize USB Host 0</span></div>
<div class="line">  <span class="keywordflow">if</span> (usb_status != <a class="code hl_enumvalue" href="rl__usb_8h.html#ga8196235c97e113f17993c7b4baff5f8facfe6cb72ed8e7b8e95a38cbf95418dbf" title="Function completed with no error.">usbOK</a>) {</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {}                         <span class="comment">// Handle USB Host 0 init failure</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    usb_status= <a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga87af2b86ae68781e915cc887d9c6ac67" title="Get status of Human Interface Device.">USBH_HID_GetStatus</a>(0U); <span class="comment">// Get HID device status</span></div>
<div class="line">    <span class="keywordflow">if</span> (usb_status == <a class="code hl_enumvalue" href="rl__usb_8h.html#ga8196235c97e113f17993c7b4baff5f8facfe6cb72ed8e7b8e95a38cbf95418dbf" title="Function completed with no error.">usbOK</a>) {</div>
<div class="line">      <a class="code hl_function" href="group__usbh__hidFunctions__api.html#ga3a2fb083a4f3a0118d06d68a9c56976f" title="Write data to Human Interface Device.">USBH_HID_Write</a> (0,(uint8_t *)&amp;out,1);     <span class="comment">// Turn on NUM LED</span></div>
<div class="line">      :</div>
<div class="line">    }</div>
<div class="line">    osDelay(100);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
