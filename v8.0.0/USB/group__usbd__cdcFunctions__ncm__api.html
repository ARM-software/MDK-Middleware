<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>USB Component: User API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "USB Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__usbd__cdcFunctions__ncm__api.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">User API<div class="ingroups"><a class="el" href="group__usbd.html">USB Device</a> &raquo; <a class="el" href="group__usbd__DevClassFunctions.html">Device Class</a> &raquo; <a class="el" href="group__usbd__cdcFunctions__ncm.html">CDC: Communication Device Class (NCM)</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>User API reference of the Communication Device Class (NCM).  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae9c578e2dbb6b54b8963adee536aea11"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gae9c578e2dbb6b54b8963adee536aea11">USBD_CDC_NCM_NTB_IN_Initialize</a> (uint8_t instance)</td></tr>
<tr class="memdesc:gae9c578e2dbb6b54b8963adee536aea11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the active NTB (prepared for sending)  <br /></td></tr>
<tr class="separator:gae9c578e2dbb6b54b8963adee536aea11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9fa4907d191f9e78483d588eef7081f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gae9fa4907d191f9e78483d588eef7081f">USBD_CDC_NCM_NTB_IN_CreateNDP</a> (uint8_t instance, uint8_t num_datagrams)</td></tr>
<tr class="memdesc:gae9fa4907d191f9e78483d588eef7081f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new NDP in the NTB (datagrams can be added to it)  <br /></td></tr>
<tr class="separator:gae9fa4907d191f9e78483d588eef7081f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae55b3d343bccc5829fc5987a86cbe25d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gae55b3d343bccc5829fc5987a86cbe25d">USBD_CDC_NCM_NTB_IN_WriteDatagram</a> (uint8_t instance, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:gae55b3d343bccc5829fc5987a86cbe25d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a datagram into the active NDP of the NTB to be sent.  <br /></td></tr>
<tr class="separator:gae55b3d343bccc5829fc5987a86cbe25d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf2b9c281b2f5ba8d26ea598633d5c9ad"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gaf2b9c281b2f5ba8d26ea598633d5c9ad">USBD_CDC_NCM_NTB_IN_Send</a> (uint8_t instance)</td></tr>
<tr class="memdesc:gaf2b9c281b2f5ba8d26ea598633d5c9ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the active NTB.  <br /></td></tr>
<tr class="separator:gaf2b9c281b2f5ba8d26ea598633d5c9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga016eb06b7e450731db1d11a51069daeb"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga016eb06b7e450731db1d11a51069daeb">USBD_CDC_NCM_NTB_IN_IsSent</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga016eb06b7e450731db1d11a51069daeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if NTB was sent and new NTB can be prepared.  <br /></td></tr>
<tr class="separator:ga016eb06b7e450731db1d11a51069daeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae310e5ba48232095eca1713069581c78"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gae310e5ba48232095eca1713069581c78">USBD_CDC_NCM_NTB_OUT_IsReceived</a> (uint8_t instance)</td></tr>
<tr class="memdesc:gae310e5ba48232095eca1713069581c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if NTB was received and is available for processing.  <br /></td></tr>
<tr class="separator:gae310e5ba48232095eca1713069581c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ce93a9770eb6360bdd9d9c79be4f1b6"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga7ce93a9770eb6360bdd9d9c79be4f1b6">USBD_CDC_NCM_NTB_OUT_Release</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga7ce93a9770eb6360bdd9d9c79be4f1b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the received NTB and release memory for reception of a new NTB.  <br /></td></tr>
<tr class="separator:ga7ce93a9770eb6360bdd9d9c79be4f1b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a24001aff5d9af6e8b040dc0cde6445"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga0a24001aff5d9af6e8b040dc0cde6445">USBD_CDC_NCM_NTB_OUT_ProcessNDP</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga0a24001aff5d9af6e8b040dc0cde6445"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the next NDP in the received NTB.  <br /></td></tr>
<tr class="separator:ga0a24001aff5d9af6e8b040dc0cde6445"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07e08df67e7fbc5a81f8ae9efabfc486"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga07e08df67e7fbc5a81f8ae9efabfc486">USBD_CDC_NCM_NTB_OUT_GetDatagramSize</a> (uint8_t instance)</td></tr>
<tr class="memdesc:ga07e08df67e7fbc5a81f8ae9efabfc486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of a datagram from the active NDP of the received NTB.  <br /></td></tr>
<tr class="separator:ga07e08df67e7fbc5a81f8ae9efabfc486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74f401a77a548941e2c5ec998f4bf7f5"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga74f401a77a548941e2c5ec998f4bf7f5">USBD_CDC_NCM_NTB_OUT_ReadDatagram</a> (uint8_t instance, uint8_t *buf, uint32_t max_len)</td></tr>
<tr class="memdesc:ga74f401a77a548941e2c5ec998f4bf7f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a datagram from the active NDP of the received NTB.  <br /></td></tr>
<tr class="separator:ga74f401a77a548941e2c5ec998f4bf7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga673f6ef89c6268bf374014bb7d0422e4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga673f6ef89c6268bf374014bb7d0422e4">USBD_CDC_NCM_NTB_IN_RawSend</a> (uint8_t instance, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga673f6ef89c6268bf374014bb7d0422e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send already prepared NTB (for this option value of define in configuration USBD_CDCn_NCM_RAW_ENABLE has to be 1)  <br /></td></tr>
<tr class="separator:ga673f6ef89c6268bf374014bb7d0422e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa6476d3f5ed6f3ebe3e798b05007d22"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gaaa6476d3f5ed6f3ebe3e798b05007d22">USBD_CDC_NCM_NTB_OUT_RawGetSize</a> (uint8_t instance)</td></tr>
<tr class="memdesc:gaaa6476d3f5ed6f3ebe3e798b05007d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get size of the received NTB.  <br /></td></tr>
<tr class="separator:gaaa6476d3f5ed6f3ebe3e798b05007d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d5dfe5c0f836c33682af2112dd97eb1"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga7d5dfe5c0f836c33682af2112dd97eb1">USBD_CDC_NCM_NTB_OUT_RawReceive</a> (uint8_t instance, uint8_t *buf, uint32_t max_len)</td></tr>
<tr class="memdesc:ga7d5dfe5c0f836c33682af2112dd97eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive an NDP (for this option value of define in configuration USBD_CDCn_NCM_RAW_ENABLE has to be 1)  <br /></td></tr>
<tr class="separator:ga7d5dfe5c0f836c33682af2112dd97eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6966c46d11f2592edf7dde71f4220e3f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga6966c46d11f2592edf7dde71f4220e3f">USBD_CDC_NCM_Notify_NetworkConnection</a> (uint8_t instance, uint16_t status)</td></tr>
<tr class="memdesc:ga6966c46d11f2592edf7dde71f4220e3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report whether or not the physical layer (modem, Ethernet PHY, etc.) link is up to the USB Host.  <br /></td></tr>
<tr class="separator:ga6966c46d11f2592edf7dde71f4220e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5888e54f798b2bf2d20bdc41b1e8af55"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga5888e54f798b2bf2d20bdc41b1e8af55">USBD_CDC_NCM_Notify_ConnectionSpeedChange</a> (uint8_t instance, uint32_t us_bitrate, uint32_t ds_bitrate)</td></tr>
<tr class="memdesc:ga5888e54f798b2bf2d20bdc41b1e8af55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report a change in upstream or downstream speed of the networking connection to the USB Host.  <br /></td></tr>
<tr class="separator:ga5888e54f798b2bf2d20bdc41b1e8af55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fd4c61b058d7478855d2eea82c03dab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga5fd4c61b058d7478855d2eea82c03dab">USBD_CDCn_NCM_Initialize</a> (void)</td></tr>
<tr class="memdesc:ga5fd4c61b058d7478855d2eea82c03dab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called during USBD_Initialize to initialize the USB CDC class instance (NCM)  <br /></td></tr>
<tr class="separator:ga5fd4c61b058d7478855d2eea82c03dab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83368d843269eaee8e5852ce835291f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga83368d843269eaee8e5852ce835291f0">USBD_CDCn_NCM_Uninitialize</a> (void)</td></tr>
<tr class="memdesc:ga83368d843269eaee8e5852ce835291f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called during USBD_Uninitialize to de-initialize the USB CDC class instance (NCM)  <br /></td></tr>
<tr class="separator:ga83368d843269eaee8e5852ce835291f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa0eded69e4418f2d6b45948fee84c8ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gaa0eded69e4418f2d6b45948fee84c8ea">USBD_CDCn_NCM_Reset</a> (void)</td></tr>
<tr class="memdesc:gaa0eded69e4418f2d6b45948fee84c8ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Bus Reset signaling.  <br /></td></tr>
<tr class="separator:gaa0eded69e4418f2d6b45948fee84c8ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e3bccc42a3a46073533da3004481836"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga2e3bccc42a3a46073533da3004481836">USBD_CDCn_NCM_Start</a> (void)</td></tr>
<tr class="memdesc:ga2e3bccc42a3a46073533da3004481836"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when USB Host changes data interface from alternate 0 to alternate 1 (activates data interface)  <br /></td></tr>
<tr class="separator:ga2e3bccc42a3a46073533da3004481836"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0fb025fb3475315f54f5a76375006927"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga0fb025fb3475315f54f5a76375006927">USBD_CDCn_NCM_Stop</a> (void)</td></tr>
<tr class="memdesc:ga0fb025fb3475315f54f5a76375006927"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when USB Host changes data interface from alternate 1 to alternate 0 (de-activates data interface)  <br /></td></tr>
<tr class="separator:ga0fb025fb3475315f54f5a76375006927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac376452779a524fb8b74f9684afeacaf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gac376452779a524fb8b74f9684afeacaf">USBD_CDCn_NCM_SetEthernetMulticastFilters</a> (const uint8_t *addr_list, uint16_t num_of_filters)</td></tr>
<tr class="memdesc:gac376452779a524fb8b74f9684afeacaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to set the Ethernet device multicast filters.  <br /></td></tr>
<tr class="separator:gac376452779a524fb8b74f9684afeacaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacabf3368bcf30b530628d2f1c55aef8d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gacabf3368bcf30b530628d2f1c55aef8d">USBD_CDCn_NCM_SetEthernetPowerManagementPatternFilter</a> (uint16_t filter_number, const uint8_t *pattern_filter, uint16_t pattern_filter_size)</td></tr>
<tr class="memdesc:gacabf3368bcf30b530628d2f1c55aef8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to set up the specified Ethernet power management pattern filter.  <br /></td></tr>
<tr class="separator:gacabf3368bcf30b530628d2f1c55aef8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b33946e39974bbb3dbc76adb0f42b70"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga2b33946e39974bbb3dbc76adb0f42b70">USBD_CDCn_NCM_GetEthernetPowerManagementPatternFilter</a> (uint16_t filter_number, uint16_t *pattern_active)</td></tr>
<tr class="memdesc:ga2b33946e39974bbb3dbc76adb0f42b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to retrieve the status of the specified Ethernet power management pattern filter.  <br /></td></tr>
<tr class="separator:ga2b33946e39974bbb3dbc76adb0f42b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d8ff4045b0026c0be1ca7aa6cd58489"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga2d8ff4045b0026c0be1ca7aa6cd58489">USBD_CDCn_NCM_SetEthernetPacketFilter</a> (uint16_t packet_filter_bitmap)</td></tr>
<tr class="memdesc:ga2d8ff4045b0026c0be1ca7aa6cd58489"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to configure device Ethernet packet filter settings.  <br /></td></tr>
<tr class="separator:ga2d8ff4045b0026c0be1ca7aa6cd58489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1125c952881c080ad9041033f7b62506"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga1125c952881c080ad9041033f7b62506">USBD_CDCn_NCM_GetEthernetStatistic</a> (uint16_t feature_selector, uint32_t *data)</td></tr>
<tr class="memdesc:ga1125c952881c080ad9041033f7b62506"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to retrieve a statistic based on the feature selector.  <br /></td></tr>
<tr class="separator:ga1125c952881c080ad9041033f7b62506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14fedc32c362e3b12d446cbc2a8be189"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga14fedc32c362e3b12d446cbc2a8be189">USBD_CDCn_NCM_GetNtbParameters</a> (<a class="el" href="group__usbd__data__types.html#structCDC__NCM__NTB__PARAM">CDC_NCM_NTB_PARAM</a> *ntb_params)</td></tr>
<tr class="memdesc:ga14fedc32c362e3b12d446cbc2a8be189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to retrieve the parameters that describe NTBs for each direction.  <br /></td></tr>
<tr class="separator:ga14fedc32c362e3b12d446cbc2a8be189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae68496f58e710418dec862ca858cf6e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gae68496f58e710418dec862ca858cf6e6">USBD_CDCn_NCM_GetNetAddress</a> (uint8_t *net_addr)</td></tr>
<tr class="memdesc:gae68496f58e710418dec862ca858cf6e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to return the USB Device's current EUI-48 station address.  <br /></td></tr>
<tr class="separator:gae68496f58e710418dec862ca858cf6e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafdaf7e6ad871cae664e72d4b675de4ce"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gafdaf7e6ad871cae664e72d4b675de4ce">USBD_CDCn_NCM_SetNetAddress</a> (const uint8_t *net_addr)</td></tr>
<tr class="memdesc:gafdaf7e6ad871cae664e72d4b675de4ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to set the USB Device's current EUI-48 station address.  <br /></td></tr>
<tr class="separator:gafdaf7e6ad871cae664e72d4b675de4ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76fef9a918909a02d4b9b579fe1a9ff6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga76fef9a918909a02d4b9b579fe1a9ff6">USBD_CDCn_NCM_GetNtbFormat</a> (uint16_t *ntb_format)</td></tr>
<tr class="memdesc:ga76fef9a918909a02d4b9b579fe1a9ff6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to return the NTB data format currently being used.  <br /></td></tr>
<tr class="separator:ga76fef9a918909a02d4b9b579fe1a9ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dd16928bb606f3ce546759fa6f66438"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga9dd16928bb606f3ce546759fa6f66438">USBD_CDCn_NCM_SetNtbFormat</a> (uint16_t ntb_format)</td></tr>
<tr class="memdesc:ga9dd16928bb606f3ce546759fa6f66438"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to select the format of NTB to be used for NTBs transmitted to the USB Host.  <br /></td></tr>
<tr class="separator:ga9dd16928bb606f3ce546759fa6f66438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad93f53bc5f3e767f4afc1d36e130cb94"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gad93f53bc5f3e767f4afc1d36e130cb94">USBD_CDCn_NCM_GetNtbInputSize</a> (uint32_t *ntb_input_size)</td></tr>
<tr class="memdesc:gad93f53bc5f3e767f4afc1d36e130cb94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to return NTB input size currently being used.  <br /></td></tr>
<tr class="separator:gad93f53bc5f3e767f4afc1d36e130cb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8dae0db40ccc745c8221b92082aa145a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga8dae0db40ccc745c8221b92082aa145a">USBD_CDCn_NCM_SetNtbInputSize</a> (uint32_t ntb_input_size)</td></tr>
<tr class="memdesc:ga8dae0db40ccc745c8221b92082aa145a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to select the maximum size of NTB that is permitted to be sent to the USB Host.  <br /></td></tr>
<tr class="separator:ga8dae0db40ccc745c8221b92082aa145a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0150ca9d0e0d1cd5bcc50bf37773ad39"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga0150ca9d0e0d1cd5bcc50bf37773ad39">USBD_CDCn_NCM_GetMaxDatagramSize</a> (uint16_t *max_datagram_size)</td></tr>
<tr class="memdesc:ga0150ca9d0e0d1cd5bcc50bf37773ad39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to return the currently effective maximum datagram size.  <br /></td></tr>
<tr class="separator:ga0150ca9d0e0d1cd5bcc50bf37773ad39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe4f737f31184318f2ec060db9b526ca"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gafe4f737f31184318f2ec060db9b526ca">USBD_CDCn_NCM_SetMaxDatagramSize</a> (uint16_t max_datagram_size)</td></tr>
<tr class="memdesc:gafe4f737f31184318f2ec060db9b526ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to select the maximum datagram size that can be sent in an NTB.  <br /></td></tr>
<tr class="separator:gafe4f737f31184318f2ec060db9b526ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a495bcfef9ebab08d044b67b6f89e80"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga3a495bcfef9ebab08d044b67b6f89e80">USBD_CDCn_NCM_GetCrcMode</a> (uint16_t *crc_mode)</td></tr>
<tr class="memdesc:ga3a495bcfef9ebab08d044b67b6f89e80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to return the currently selected CRC mode.  <br /></td></tr>
<tr class="separator:ga3a495bcfef9ebab08d044b67b6f89e80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaae74ae77df4b1f33e0a96768299eb95"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gaaae74ae77df4b1f33e0a96768299eb95">USBD_CDCn_NCM_SetCrcMode</a> (uint16_t crc_mode)</td></tr>
<tr class="memdesc:gaaae74ae77df4b1f33e0a96768299eb95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called upon USB Host request to control CRC mode.  <br /></td></tr>
<tr class="separator:gaaae74ae77df4b1f33e0a96768299eb95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0731cb012344bc03b7132941e630a426"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga0731cb012344bc03b7132941e630a426">USBD_CDCn_NCM_NTB_IN_Sent</a> (void)</td></tr>
<tr class="memdesc:ga0731cb012344bc03b7132941e630a426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when NTB was successfully sent.  <br /></td></tr>
<tr class="separator:ga0731cb012344bc03b7132941e630a426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae000e324025458f142e5b1d6d2750060"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbd__cdcFunctions__ncm__api.html#gae000e324025458f142e5b1d6d2750060">USBD_CDCn_NCM_NTB_OUT_Received</a> (void)</td></tr>
<tr class="memdesc:gae000e324025458f142e5b1d6d2750060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function called when NTB was successfully received.  <br /></td></tr>
<tr class="separator:gae000e324025458f142e5b1d6d2750060"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>User API reference of the Communication Device Class (NCM). </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga5888e54f798b2bf2d20bdc41b1e8af55" name="ga5888e54f798b2bf2d20bdc41b1e8af55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5888e54f798b2bf2d20bdc41b1e8af55">&#9670;&#160;</a></span>USBD_CDC_NCM_Notify_ConnectionSpeedChange()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_Notify_ConnectionSpeedChange </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>us_bitrate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ds_bitrate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report a change in upstream or downstream speed of the networking connection to the USB Host. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">us_bitrate</td><td>Upstream bitrate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ds_bitrate</td><td>Downstream bitrate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_Notify_ConnectionSpeedChange</b> report to the USB Host any change in the upstream or downstream speed of the networking connection.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>us_bitrate</em> specifies the upstream bitrate.</p>
<p>The argument <em>ds_bitrate</em> specifies the downstream bitrate.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga6966c46d11f2592edf7dde71f4220e3f" name="ga6966c46d11f2592edf7dde71f4220e3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6966c46d11f2592edf7dde71f4220e3f">&#9670;&#160;</a></span>USBD_CDC_NCM_Notify_NetworkConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_Notify_NetworkConnection </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report whether or not the physical layer (modem, Ethernet PHY, etc.) link is up to the USB Host. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status</td><td>Connection status :<ul>
<li>value 0 : Disconnected</li>
<li>value 1 : Connected </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_Notify_NetworkConnection</b> reports to the USB Host whether the physical layer (modem, Ethernet PHY, etc.) link is up.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>status</em> specifies the connection status.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="gae9fa4907d191f9e78483d588eef7081f" name="gae9fa4907d191f9e78483d588eef7081f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9fa4907d191f9e78483d588eef7081f">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_IN_CreateNDP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_IN_CreateNDP </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_datagrams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new NDP in the NTB (datagrams can be added to it) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_datagrams</td><td>Maximum number of datagrams that NDP will contain. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_IN_CreateNDP</b> creates a new NDP in the NTB so that datagrams can be added to it.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>num_datagrams</em> specifies the maximum number of datagrams that the NDP will contain.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="gae9c578e2dbb6b54b8963adee536aea11" name="gae9c578e2dbb6b54b8963adee536aea11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9c578e2dbb6b54b8963adee536aea11">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_IN_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_IN_Initialize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the active NTB (prepared for sending) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_IN_Initialize</b> clears the active NTB and initializes it for adding of NDPs and datagrams.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga016eb06b7e450731db1d11a51069daeb" name="ga016eb06b7e450731db1d11a51069daeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga016eb06b7e450731db1d11a51069daeb">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_IN_IsSent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_IN_IsSent </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if NTB was sent and new NTB can be prepared. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NTB sent status or error code :<ul>
<li>value 1 : NTB was sent</li>
<li>value 0 : NTB sending is in progress</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_IN_IsSent</b> checks whether the NTB was sent and a new one can be prepared.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga673f6ef89c6268bf374014bb7d0422e4" name="ga673f6ef89c6268bf374014bb7d0422e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga673f6ef89c6268bf374014bb7d0422e4">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_IN_RawSend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_IN_RawSend </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send already prepared NTB (for this option value of define in configuration USBD_CDCn_NCM_RAW_ENABLE has to be 1) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer containing NTB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Size of NTB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_IN_RawSend</b> sends an already prepared NTB. For this option, the value of the <code>#define</code> <code>USBD_CDCn_NCM_RAW_ENABLE</code> in the configuration has to be '1'.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>buf</em> specifies the buffer containing the NTB.</p>
<p>The argument <em>len</em> specifies the size of the NTB.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="gaf2b9c281b2f5ba8d26ea598633d5c9ad" name="gaf2b9c281b2f5ba8d26ea598633d5c9ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf2b9c281b2f5ba8d26ea598633d5c9ad">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_IN_Send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_IN_Send </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the active NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_IN_Send</b> transmits the active NTB.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="gae55b3d343bccc5829fc5987a86cbe25d" name="gae55b3d343bccc5829fc5987a86cbe25d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae55b3d343bccc5829fc5987a86cbe25d">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_IN_WriteDatagram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_IN_WriteDatagram </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a datagram into the active NDP of the NTB to be sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Buffer containing data bytes to write. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of bytes to write. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_IN_WriteDatagram</b> adds a datagram into the active NDP of the NTB to be sent.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>buf</em> is a buffer containing the data to be written.</p>
<p>The argument <em>len</em> specifies the number of bytes to be written.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga07e08df67e7fbc5a81f8ae9efabfc486" name="ga07e08df67e7fbc5a81f8ae9efabfc486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07e08df67e7fbc5a81f8ae9efabfc486">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_GetDatagramSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBD_CDC_NCM_NTB_OUT_GetDatagramSize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get size of a datagram from the active NDP of the received NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes available in the datagram.</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_GetDatagramSize</b> returns the size of a datagram from the active NDP of the received NTB.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="gae310e5ba48232095eca1713069581c78" name="gae310e5ba48232095eca1713069581c78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae310e5ba48232095eca1713069581c78">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_IsReceived()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_OUT_IsReceived </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if NTB was received and is available for processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NTB available or error code :<ul>
<li>value 1 : received NTB is available</li>
<li>value 0 : no received NTB is available</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_IsReceived</b> checks whether the NTB was received and can be processed.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga0a24001aff5d9af6e8b040dc0cde6445" name="ga0a24001aff5d9af6e8b040dc0cde6445"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a24001aff5d9af6e8b040dc0cde6445">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_ProcessNDP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_OUT_ProcessNDP </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process the next NDP in the received NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_ProcessNDP</b> processes the next NDP in the received NTB.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="gaaa6476d3f5ed6f3ebe3e798b05007d22" name="gaaa6476d3f5ed6f3ebe3e798b05007d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa6476d3f5ed6f3ebe3e798b05007d22">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_RawGetSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBD_CDC_NCM_NTB_OUT_RawGetSize </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get size of the received NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes available in the NTB.</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_RawGetSize</b> returns the number of bytes available in the NTB.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga7d5dfe5c0f836c33682af2112dd97eb1" name="ga7d5dfe5c0f836c33682af2112dd97eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d5dfe5c0f836c33682af2112dd97eb1">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_RawReceive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_OUT_RawReceive </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive an NDP (for this option value of define in configuration USBD_CDCn_NCM_RAW_ENABLE has to be 1) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer that receives NTB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>Maximum number of bytes that buffer can accept. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_RawReceive</b> receives an NDP For this option, the value of the <code>#define</code> <code>USBD_CDCn_NCM_RAW_ENABLE</code> in the configuration has to be '1'.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>buf</em> specifies the buffer that receives the NTB.</p>
<p>The argument <em>max_len</em> specifies the maximum number of bytes that are accepted by the buffer (must be multiple of Bulk Out endpoint maximum packet size).</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga74f401a77a548941e2c5ec998f4bf7f5" name="ga74f401a77a548941e2c5ec998f4bf7f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga74f401a77a548941e2c5ec998f4bf7f5">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_ReadDatagram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_OUT_ReadDatagram </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a datagram from the active NDP of the received NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>Buffer that receives read data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>Maximum number of bytes to read. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes read from the datagram or error code :<ul>
<li>value &gt;= 0 : number of bytes read from the datagram</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_ReadDatagram</b> reads a datagram from the active NDP of the received NTB.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p>The argument <em>buf</em> specifies the buffer that receives the data that is read.</p>
<p>The argument <em>max_len</em> specifies the maximum number of bytes to be read.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga7ce93a9770eb6360bdd9d9c79be4f1b6" name="ga7ce93a9770eb6360bdd9d9c79be4f1b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ce93a9770eb6360bdd9d9c79be4f1b6">&#9670;&#160;</a></span>USBD_CDC_NCM_NTB_OUT_Release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_CDC_NCM_NTB_OUT_Release </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>instance</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush the received NTB and release memory for reception of a new NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>Instance of CDC class. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>function execution status :<ul>
<li>value 0 : success</li>
<li>value &lt; 0 : error code</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDC_NCM_NTB_OUT_Release</b> flushes the received NTB and releases the memory for the reception of a new NTB.</p>
<p>The argument <em>instance</em> specifies the instance of the CDC class.</p>
<p><b>Code</b> <b>Example</b> <br  />
Refer to the <a class="el" href="group__usbd__cdcFunctions__ncm.html#USBD_User_CDC_NCM_UCT">CDC (NCM) User Code Template</a> </p>

</div>
</div>
<a id="ga3a495bcfef9ebab08d044b67b6f89e80" name="ga3a495bcfef9ebab08d044b67b6f89e80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a495bcfef9ebab08d044b67b6f89e80">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetCrcMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetCrcMode </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>crc_mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to return the currently selected CRC mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">crc_mode</td><td>Pointer to current CRC mode. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetCrcMode</b> is called when the USB Host requests to return the currently selected CRC mode.</p>
<p>The argument <em>crc_mode</em> is a pointer to the current CRC mode.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga3a495bcfef9ebab08d044b67b6f89e80" title="Callback function called upon USB Host request to return the currently selected CRC mode.">USBD_CDCn_NCM_GetCrcMode</a> (uint16_t *crc_mode) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x10) != 0)</span></div>
<div class="line">  *crc_mode = NCM_State.crc_mode;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga2b33946e39974bbb3dbc76adb0f42b70" name="ga2b33946e39974bbb3dbc76adb0f42b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b33946e39974bbb3dbc76adb0f42b70">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetEthernetPowerManagementPatternFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetEthernetPowerManagementPatternFilter </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>filter_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>pattern_active</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to retrieve the status of the specified Ethernet power management pattern filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filter_number</td><td>Filter number. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pattern_active</td><td>Pointer to pattern active boolean. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetEthernetPowerManagementPatternFilter</b> is called when the USB Host retrieves the status of the USB Device's Ethernet power management pattern filter.</p>
<p>The argument <em>filter_number</em> specifies the filter number.</p>
<p>The argument <em>pattern_active</em> is a pointer to the pattern active boolean.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga2b33946e39974bbb3dbc76adb0f42b70" title="Callback function called upon USB Host request to retrieve the status of the specified Ethernet power...">USBD_CDCn_NCM_GetEthernetPowerManagementPatternFilter</a> (uint16_t filter_number, uint16_t *pattern_active) {</div>
<div class="line"><span class="preprocessor">#if (USBD_CDCn_NCM_B_NUMBER_POWER_FILTERS != 0)</span></div>
<div class="line">  *pattern_active = (NCM_State.power_filter_active[filter_number / 8] &amp; (1U &lt;&lt; (filter_number % 8))) ? 1 : 0;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga1125c952881c080ad9041033f7b62506" name="ga1125c952881c080ad9041033f7b62506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1125c952881c080ad9041033f7b62506">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetEthernetStatistic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetEthernetStatistic </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>feature_selector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to retrieve a statistic based on the feature selector. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">feature_selector</td><td>Feature Selector. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to Statistics Value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetEthernetStatistic</b> is called when the USB Host tries to retrieve an Ethernet statistic based on the feature selector.</p>
<p>The argument <em>feature_selector</em> specifies the feature selector.</p>
<p>The argument <em>data</em> is a pointer to the statistic's value.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga1125c952881c080ad9041033f7b62506" title="Callback function called upon USB Host request to retrieve a statistic based on the feature selector.">USBD_CDCn_NCM_GetEthernetStatistic</a> (uint16_t feature_selector, uint32_t *data) {</div>
<div class="line"><span class="preprocessor">#if (USBD_CDCn_NCM_BM_ETHERNET_STATISTICS != 0)</span></div>
<div class="line">  <span class="keywordflow">if</span> (feature_selector == 0x00U) { <span class="keywordflow">return</span> <span class="keyword">true</span>;  }</div>
<div class="line">  <span class="keywordflow">if</span> (feature_selector &gt;  0x1DU) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line">  *data = NCM_State.eth_statistics[feature_selector - 1];</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga0150ca9d0e0d1cd5bcc50bf37773ad39" name="ga0150ca9d0e0d1cd5bcc50bf37773ad39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0150ca9d0e0d1cd5bcc50bf37773ad39">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetMaxDatagramSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetMaxDatagramSize </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>max_datagram_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to return the currently effective maximum datagram size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">max_datagram_size</td><td>Pointer to current maximum datagram size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetMaxDatagramSize</b> is called when the USB Host requests to return the currently effective maximum datagram size used by the USB Device.</p>
<p>The argument <em>max_datagram_size</em> is a pointer to current maximum datagram size.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga0150ca9d0e0d1cd5bcc50bf37773ad39" title="Callback function called upon USB Host request to return the currently effective maximum datagram siz...">USBD_CDCn_NCM_GetMaxDatagramSize</a> (uint16_t *max_datagram_size) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x08) != 0)</span></div>
<div class="line">  *max_datagram_size = NCM_State.max_datagram_size;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gae68496f58e710418dec862ca858cf6e6" name="gae68496f58e710418dec862ca858cf6e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae68496f58e710418dec862ca858cf6e6">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetNetAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetNetAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>net_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to return the USB Device's current EUI-48 station address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">net_addr</td><td>Pointer to EUI-48 current address, in network byte order. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetNetAddress</b> is called when the USB Host requests to return the USB Device's current EUI-48 station address.</p>
<p>The argument <em>net_addr</em> is a pointer to the current EUI-48 network address.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gae68496f58e710418dec862ca858cf6e6" title="Callback function called upon USB Host request to return the USB Device&#39;s current EUI-48 station addr...">USBD_CDCn_NCM_GetNetAddress</a> (uint8_t *net_addr) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x02) != 0)</span></div>
<div class="line">  memcpy(net_addr, NCM_State.net_address, 6);</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga76fef9a918909a02d4b9b579fe1a9ff6" name="ga76fef9a918909a02d4b9b579fe1a9ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76fef9a918909a02d4b9b579fe1a9ff6">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetNtbFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetNtbFormat </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>ntb_format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to return the NTB data format currently being used. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ntb_format</td><td>Pointer to NTB format code. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetNtbFormat</b> is called when the USB Host requests to return the NCM Transfer Block (NTBs) data format that is currently being used by the USB Device.</p>
<p>The argument <em>ntb_format</em> is a pointer to the NTB format code.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga76fef9a918909a02d4b9b579fe1a9ff6" title="Callback function called upon USB Host request to return the NTB data format currently being used.">USBD_CDCn_NCM_GetNtbFormat</a> (uint16_t *ntb_format) {</div>
<div class="line">  *ntb_format = NCM_State.ntb_format;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gad93f53bc5f3e767f4afc1d36e130cb94" name="gad93f53bc5f3e767f4afc1d36e130cb94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad93f53bc5f3e767f4afc1d36e130cb94">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetNtbInputSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetNtbInputSize </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>ntb_input_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to return NTB input size currently being used. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ntb_input_size</td><td>Pointer to NTB input size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetNtbInputSize</b> is called when the USB Host requests to return the NCM Transfer Block (NTBs) input size that is currently being used by the USB Device.</p>
<p>The argument <em>ntb_input_size</em> is a pointer to the NTB input size.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gad93f53bc5f3e767f4afc1d36e130cb94" title="Callback function called upon USB Host request to return NTB input size currently being used.">USBD_CDCn_NCM_GetNtbInputSize</a> (uint32_t *ntb_input_size) {</div>
<div class="line">  *ntb_input_size = NCM_State.ntb_input_size;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga14fedc32c362e3b12d446cbc2a8be189" name="ga14fedc32c362e3b12d446cbc2a8be189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14fedc32c362e3b12d446cbc2a8be189">&#9670;&#160;</a></span>USBD_CDCn_NCM_GetNtbParameters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_GetNtbParameters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__usbd__data__types.html#structCDC__NCM__NTB__PARAM">CDC_NCM_NTB_PARAM</a> *&#160;</td>
          <td class="paramname"><em>ntb_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to retrieve the parameters that describe NTBs for each direction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">ntb_params</td><td>Pointer to NTB Parameter Structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_GetNtbParameters</b> is called when the USB Host requests to return the parameters that describe the NCM Transfer Blocks (NTBs) for each direction.</p>
<p>The argument <em>ntb_params</em> is a pointer to the NTB parameter structure.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga14fedc32c362e3b12d446cbc2a8be189" title="Callback function called upon USB Host request to retrieve the parameters that describe NTBs for each...">USBD_CDCn_NCM_GetNtbParameters</a> (<a class="code hl_struct" href="group__usbd__data__types.html#structCDC__NCM__NTB__PARAM" title="CDC NCM NTB Parameters structure.">CDC_NCM_NTB_PARAM</a> *ntb_params) {</div>
<div class="line"> </div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a496c03443b177fd2e6c93616064d2934" title="Size of this structure, in bytes = 1Ch.">wLength</a>                 = <span class="keyword">sizeof</span>(<a class="code hl_struct" href="group__usbd__data__types.html#structCDC__NCM__NTB__PARAM" title="CDC NCM NTB Parameters structure.">CDC_NCM_NTB_PARAM</a>);</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a1ce4a9cf3b4f51a4fd8b7de2bb1f9a5e" title="Bit 0: 16-bit NTB supported (set to 1), Bit 1: 32-bit NTB supported, Bits 2 .. 15: reserved.">bmNtbFormatsSupported</a>   = USBD_CDCn_NCM_BM_NTB_FORMATS_SUPPORTED;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#abc0be89264a968b7b4bb6c1a993b2779" title="IN NTB Maximum Size in bytes.">dwNtbInMaxSize</a>          = USBD_CDCn_NCM_DW_NTB_IN_MAX_SIZE;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a0348c36e85e6f15ee36f30ddd8ff54b4" title="Divisor used for IN NTB Datagram payload alignment.">wNdpInDivisor</a>           = USBD_CDCn_NCM_W_NDP_IN_DIVISOR;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a96076135198c47285864480592a5a880" title="Remainder used to align input datagram payload within the NTB.">wNdpInPayloadRemainder</a>  = USBD_CDCn_NCM_W_NDP_IN_PAYLOAD_REMINDER;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a97c11096da5456a5237b50259ceeb076" title="NDP alignment modulus for NTBs on the IN pipe. Shall be a power of 2, and shall be at least 4.">wNdpInAlignment</a>         = USBD_CDCn_NCM_W_NDP_IN_ALIGNMENT;</div>
<div class="line">  ntb_params-&gt;Reserved0               = 0U;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a1b181550906a4c767bdf49fffbffd658" title="OUT NTB Maximum Size.">dwNtbOutMaxSize</a>         = USBD_CDCn_NCM_DW_NTB_OUT_MAX_SIZE;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#a31fa5ac48896ae0b9ca2bef90f8518cf" title="OUT NTB Datagram alignment modulus.">wNdpOutDivisor</a>          = USBD_CDCn_NCM_W_NDP_OUT_DIVISOR;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#aa51d53d073e3dc1c07b990978fe53e3e" title="Remainder used to align output datagram payload offsets within the NTB.">wNdpOutPayloadRemainder</a> = USBD_CDCn_NCM_W_NDP_OUT_PAYLOAD_REMINDER;</div>
<div class="line">  ntb_params-&gt;<a class="code hl_variable" href="group__usbd__data__types.html#ac2a2b6d7af310f000747a88f6b4b697f" title="NDP alignment modulus for use in NTBs on the OUT pipe. Shall be a power of 2, and shall be at least 4...">wNdpOutAlignment</a>        = USBD_CDCn_NCM_W_NDP_OUT_ALIGNMENT;</div>
<div class="line">  ntb_params-&gt;Reserved1               = 0U;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga5fd4c61b058d7478855d2eea82c03dab" name="ga5fd4c61b058d7478855d2eea82c03dab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5fd4c61b058d7478855d2eea82c03dab">&#9670;&#160;</a></span>USBD_CDCn_NCM_Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_Initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called during USBD_Initialize to initialize the USB CDC class instance (NCM) </p>
<p>The function <b>USBD_CDCn_NCM_Initialize</b> initializes the hardware resources of the network device. It is called during <a class="el" href="group__usbd__coreFunctions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca">USBD_Initialize</a>. The function may be used to allocate resources and initialize peripherals.</p>
<p>Modify this function to the application needs.</p>
<dl class="section note"><dt>Note</dt><dd>Remember to release used resources and de-initialize peripherals using <a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga83368d843269eaee8e5852ce835291f0">USBD_CDCn_NCM_Uninitialize</a>.</dd></dl>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga5fd4c61b058d7478855d2eea82c03dab" title="Callback function called during USBD_Initialize to initialize the USB CDC class instance (NCM)">USBD_CDCn_NCM_Initialize</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Add code for initialization</span></div>
<div class="line">  ARM_ETH_MAC_CAPABILITIES capabilities;</div>
<div class="line">  int32_t                  status;</div>
<div class="line"> </div>
<div class="line">  MAC_wstr_to_addr(wsMacAddress, (uint8_t *)&amp;MacAddress);</div>
<div class="line"> </div>
<div class="line">  memset(&amp;NCM_State, 0, <span class="keyword">sizeof</span>(NCM_State));</div>
<div class="line">  NCM_State.ntb_input_size = USBD_CDCn_NCM_DW_NTB_IN_MAX_SIZE;</div>
<div class="line">  NCM_State.max_datagram_size = USBD_CDCn_NCM_W_MAX_SEGMENT_SIZE;</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x02) != 0)</span></div>
<div class="line">  memcpy(NCM_State.net_address, &amp;MacAddress, 6);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  NCM_State.packet_filter_bitmap = 0x0CU;</div>
<div class="line"> </div>
<div class="line">  LinkState = ARM_ETH_LINK_DOWN;</div>
<div class="line">  LinkInfo.speed  = 0U;</div>
<div class="line">  LinkInfo.duplex = 0U;</div>
<div class="line">  LinkSpeed = 0U;</div>
<div class="line"> </div>
<div class="line">  PacketFilter = ARM_ETH_MAC_ADDRESS_BROADCAST;</div>
<div class="line"> </div>
<div class="line">  FrameIN_Size = 0U;</div>
<div class="line">  memset(FrameIN, 0, <span class="keyword">sizeof</span>(FrameIN));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Initialize Media Access Controller</span></div>
<div class="line">  capabilities = EthMac-&gt;GetCapabilities();</div>
<div class="line"> </div>
<div class="line">  status = EthMac-&gt;Initialize(EthMac_Notify);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line">  status = EthMac-&gt;PowerControl(ARM_POWER_FULL);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line"> </div>
<div class="line">  status = EthMac-&gt;SetMacAddress(&amp;MacAddress);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Initialize Physical Media Interface</span></div>
<div class="line">  status = EthPhy-&gt;Initialize(EthMac-&gt;PHY_Read, EthMac-&gt;PHY_Write);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line">  status = EthPhy-&gt;PowerControl(ARM_POWER_FULL);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line">  status = EthPhy-&gt;SetInterface(capabilities.media_interface);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line">  status = EthPhy-&gt;SetMode(ARM_ETH_PHY_AUTO_NEGOTIATE);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span>; }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Create Threads</span></div>
<div class="line">  Connection_ThreadId = osThreadNew(Connection_Thread, NULL, &amp;connection_thread_attr);</div>
<div class="line">  DataIN_ThreadId     = osThreadNew(DataIN_Thread,     NULL, &amp;data_in_thread_attr);</div>
<div class="line">  DataOUT_ThreadId    = osThreadNew(DataOUT_Thread,    NULL, &amp;data_out_thread_attr);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga0731cb012344bc03b7132941e630a426" name="ga0731cb012344bc03b7132941e630a426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0731cb012344bc03b7132941e630a426">&#9670;&#160;</a></span>USBD_CDCn_NCM_NTB_IN_Sent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_NTB_IN_Sent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when NTB was successfully sent. </p>
<p>The function <b>USBD_CDCn_NCM_NTB_IN_Sent</b> is called when an NCM Transfer Block (NTBs) has been sent successfully.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga0731cb012344bc03b7132941e630a426" title="Callback function called when NTB was successfully sent.">USBD_CDCn_NCM_NTB_IN_Sent</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Add code for handling request</span></div>
<div class="line">  osSignalSet(DataIN_ThreadId, 1U);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gae000e324025458f142e5b1d6d2750060" name="gae000e324025458f142e5b1d6d2750060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae000e324025458f142e5b1d6d2750060">&#9670;&#160;</a></span>USBD_CDCn_NCM_NTB_OUT_Received()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_NTB_OUT_Received </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when NTB was successfully received. </p>
<p>The function <b>USBD_CDCn_NCM_NTB_OUT_Received</b> is called when an NCM Transfer Block (NTBs) has been received successfully.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gae000e324025458f142e5b1d6d2750060" title="Callback function called when NTB was successfully received.">USBD_CDCn_NCM_NTB_OUT_Received</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Add code for handling request</span></div>
<div class="line">  osSignalSet(DataOUT_ThreadId, 1U);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gaa0eded69e4418f2d6b45948fee84c8ea" name="gaa0eded69e4418f2d6b45948fee84c8ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa0eded69e4418f2d6b45948fee84c8ea">&#9670;&#160;</a></span>USBD_CDCn_NCM_Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_Reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Bus Reset signaling. </p>
<p>The function <b>USBD_CDCn_NCM_Reset</b> resets the network device.</p>
<p>Modify this function to the application's needs. </p>

</div>
</div>
<a id="gaaae74ae77df4b1f33e0a96768299eb95" name="gaaae74ae77df4b1f33e0a96768299eb95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaae74ae77df4b1f33e0a96768299eb95">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetCrcMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetCrcMode </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>crc_mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to control CRC mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">crc_mode</td><td>CRC mode :<ul>
<li>value 0 : CRCs shall not be appended</li>
<li>value 1 : CRCs shall be appended </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetCrcMode</b> is called when the USB Host requests to set the CRC mode to be used for data transmissions.</p>
<p>The argument <em>crc_mode</em> is a value of the current CRC mode.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gaaae74ae77df4b1f33e0a96768299eb95" title="Callback function called upon USB Host request to control CRC mode.">USBD_CDCn_NCM_SetCrcMode</a> (uint16_t crc_mode) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x10) != 0)</span></div>
<div class="line">  <span class="keywordflow">if</span> (crc_mode &gt; 1) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line">  NCM_State.crc_mode = crc_mode;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gac376452779a524fb8b74f9684afeacaf" name="gac376452779a524fb8b74f9684afeacaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac376452779a524fb8b74f9684afeacaf">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetEthernetMulticastFilters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetEthernetMulticastFilters </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>addr_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>num_of_filters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to set the Ethernet device multicast filters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr_list</td><td>Pointer to list of 48-bit Multicast addresses. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_of_filters</td><td>Number of filters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetEthernetMulticastFilters</b> is called when the USB Host requests to set the USB Device's Ethernet multicast filters.</p>
<p>The argument <em>addr_list</em> is a pointer to the list of 48-bit Multicast addresses.</p>
<p>The argument <em>num_of_filters</em> specifies the number of filters to be used.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gac376452779a524fb8b74f9684afeacaf" title="Callback function called upon USB Host request to set the Ethernet device multicast filters.">USBD_CDCn_NCM_SetEthernetMulticastFilters</a> (<span class="keyword">const</span> uint8_t *addr_list, uint16_t num_of_filters) {</div>
<div class="line"><span class="preprocessor">#if (USBD_CDCn_NCM_W_NUMBER_MC_FILTERS != 0)</span></div>
<div class="line">  int32_t status;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (num_of_filters &gt; (USBD_CDCn_NCM_W_NUMBER_MC_FILTERS &amp; 0x7FFF)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add code for handling request</span></div>
<div class="line">  status = EthMac-&gt;SetAddressFilter((ARM_ETH_MAC_ADDR *)addr_list, num_of_filters);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"> </div>
<div class="line">  memcpy(&amp;NCM_State.mc_filters, addr_list, num_of_filters * 6);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga2d8ff4045b0026c0be1ca7aa6cd58489" name="ga2d8ff4045b0026c0be1ca7aa6cd58489"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2d8ff4045b0026c0be1ca7aa6cd58489">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetEthernetPacketFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetEthernetPacketFilter </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>packet_filter_bitmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to configure device Ethernet packet filter settings. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">packet_filter_bitmap</td><td>Packet Filter Bitmap. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetEthernetPacketFilter</b> is called when the USB Host requests to configure the USB Device's Ethernet packet filter settings.</p>
<p>The argument <em>packet_filter_bitmap</em> is the packet filter's bitmap.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga2d8ff4045b0026c0be1ca7aa6cd58489" title="Callback function called upon USB Host request to configure device Ethernet packet filter settings.">USBD_CDCn_NCM_SetEthernetPacketFilter</a> (uint16_t packet_filter_bitmap) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x01) != 0)</span></div>
<div class="line">  int32_t status;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add code for handling request</span></div>
<div class="line">  PacketFilter = ((packet_filter_bitmap &amp; 0x01U) ? ARM_ETH_MAC_ADDRESS_ALL       : 0) |</div>
<div class="line">                 ((packet_filter_bitmap &amp; 0x02U) ? ARM_ETH_MAC_ADDRESS_MULTICAST : 0) |</div>
<div class="line">                 ((packet_filter_bitmap &amp; 0x08U) ? ARM_ETH_MAC_ADDRESS_BROADCAST : 0);</div>
<div class="line"> </div>
<div class="line">  status = EthMac-&gt;Control(ARM_ETH_MAC_CONFIGURE,</div>
<div class="line">                           LinkInfo.speed  &lt;&lt; ARM_ETH_MAC_SPEED_Pos  |</div>
<div class="line">                           LinkInfo.duplex &lt;&lt; ARM_ETH_MAC_DUPLEX_Pos |</div>
<div class="line">                           PacketFilter);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"> </div>
<div class="line">  NCM_State.packet_filter_bitmap = packet_filter_bitmap;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gacabf3368bcf30b530628d2f1c55aef8d" name="gacabf3368bcf30b530628d2f1c55aef8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacabf3368bcf30b530628d2f1c55aef8d">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetEthernetPowerManagementPatternFilter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetEthernetPowerManagementPatternFilter </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>filter_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>pattern_filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pattern_filter_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to set up the specified Ethernet power management pattern filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filter_number</td><td>Filter number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pattern_filter</td><td>Power management pattern filter structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pattern_filter_size</td><td>Size of pattern filter structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetEthernetPowerManagementPatternFilter</b> is called when the USB Host requests to set up the USB Device's Ethernet power management pattern filter.</p>
<p>The argument <em>filter_number</em> specifies the filter number.</p>
<p>The argument <em>pattern_filter</em> is a pointer to the pattern filter structure.</p>
<p>The argument <em>pattern_filter_size</em> specifies the size of the pattern filter structure.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gacabf3368bcf30b530628d2f1c55aef8d" title="Callback function called upon USB Host request to set up the specified Ethernet power management patt...">USBD_CDCn_NCM_SetEthernetPowerManagementPatternFilter</a> (uint16_t filter_number, <span class="keyword">const</span> uint8_t *pattern_filter, uint16_t pattern_filter_size) {</div>
<div class="line"><span class="preprocessor">#if (USBD_CDCn_NCM_B_NUMBER_POWER_FILTERS != 0)</span></div>
<div class="line">  <span class="keywordflow">if</span> (filter_number &gt;= USBD_CDCn_NCM_B_NUMBER_POWER_FILTERS) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add code for handling request</span></div>
<div class="line"> </div>
<div class="line">  NCM_State.power_filter_active[filter_number / 8] |= 1U &lt;&lt; (filter_number % 8);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gafe4f737f31184318f2ec060db9b526ca" name="gafe4f737f31184318f2ec060db9b526ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe4f737f31184318f2ec060db9b526ca">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetMaxDatagramSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetMaxDatagramSize </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>max_datagram_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to select the maximum datagram size that can be sent in an NTB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">max_datagram_size</td><td>Maximum datagram size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetMaxDatagramSize</b> is called when the USB Host requests to set the maximum datagram size that can be sent in an NCM Transfer Block (NTBs).</p>
<p>The argument <em>max_datagram_size</em> is a pointer to current maximum datagram size.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gafe4f737f31184318f2ec060db9b526ca" title="Callback function called upon USB Host request to select the maximum datagram size that can be sent i...">USBD_CDCn_NCM_SetMaxDatagramSize</a> (uint16_t max_datagram_size) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x08) != 0)</span></div>
<div class="line">  <span class="keywordflow">if</span> (max_datagram_size &gt; USBD_CDCn_NCM_W_MAX_SEGMENT_SIZE) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line">  NCM_State.max_datagram_size = max_datagram_size;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gafdaf7e6ad871cae664e72d4b675de4ce" name="gafdaf7e6ad871cae664e72d4b675de4ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafdaf7e6ad871cae664e72d4b675de4ce">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetNetAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetNetAddress </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>net_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to set the USB Device's current EUI-48 station address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">net_addr</td><td>Pointer to EUI-48 address, in network byte order. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetNetAddress</b> is called when the USB Host requests to set the USB Device's current EUI-48 station address.</p>
<p>The argument <em>net_addr</em> is a pointer to the EUI-48 network address.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#gafdaf7e6ad871cae664e72d4b675de4ce" title="Callback function called upon USB Host request to set the USB Device&#39;s current EUI-48 station address...">USBD_CDCn_NCM_SetNetAddress</a> (<span class="keyword">const</span> uint8_t *net_addr) {</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x02) != 0)</span></div>
<div class="line">  int32_t status;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Add code for handling request</span></div>
<div class="line">  status = EthMac-&gt;SetMacAddress((ARM_ETH_MAC_ADDR *)net_addr);</div>
<div class="line">  <span class="keywordflow">if</span> (status != ARM_DRIVER_OK) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"> </div>
<div class="line">  memcpy(NCM_State.net_address, net_addr, 6);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga9dd16928bb606f3ce546759fa6f66438" name="ga9dd16928bb606f3ce546759fa6f66438"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9dd16928bb606f3ce546759fa6f66438">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetNtbFormat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetNtbFormat </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ntb_format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to select the format of NTB to be used for NTBs transmitted to the USB Host. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ntb_format</td><td>NTB format selection :<ul>
<li>value 0 : NTB-16</li>
<li>value 1 : NTB-32 </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetNtbFormat</b> is called when the USB Host requests to set the NCM Transfer Block (NTBs) data format to be used by the USB Device for transfers to the host.</p>
<p>The argument <em>ntb_format</em> is a pointer to the NTB format code.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga9dd16928bb606f3ce546759fa6f66438" title="Callback function called upon USB Host request to select the format of NTB to be used for NTBs transm...">USBD_CDCn_NCM_SetNtbFormat</a> (uint16_t ntb_format) {</div>
<div class="line"><span class="preprocessor">#if (USBD_CDCn_NCM_BM_NTB_FORMATS_SUPPORTED &gt; 1)</span></div>
<div class="line">  <span class="keywordflow">if</span> (ntb_format &gt; 1) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">  <span class="keywordflow">if</span> (ntb_format &gt; 0) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  NCM_State.ntb_format = ntb_format;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga8dae0db40ccc745c8221b92082aa145a" name="ga8dae0db40ccc745c8221b92082aa145a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8dae0db40ccc745c8221b92082aa145a">&#9670;&#160;</a></span>USBD_CDCn_NCM_SetNtbInputSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool USBD_CDCn_NCM_SetNtbInputSize </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ntb_input_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called upon USB Host request to select the maximum size of NTB that is permitted to be sent to the USB Host. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ntb_input_size</td><td>Maximum NTB size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>request handled status :<ul>
<li>value true : request was handled</li>
<li>value false : request was not handled</li>
</ul>
</dd></dl>
<p>The function <b>USBD_CDCn_NCM_SetNtbInputSize</b> is called when the USB Host requests to set the maximum size of NCM Transfer Block (NTBs) that USB Device can send to the USB Host.</p>
<p>The argument <em>ntb_input_size</em> is a pointer to the NTB input size.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga8dae0db40ccc745c8221b92082aa145a" title="Callback function called upon USB Host request to select the maximum size of NTB that is permitted to...">USBD_CDCn_NCM_SetNtbInputSize</a> (uint32_t ntb_input_size) {</div>
<div class="line">  <span class="keywordflow">if</span> (ntb_input_size &gt; USBD_CDCn_NCM_DW_NTB_IN_MAX_SIZE) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line">  NCM_State.ntb_input_size = ntb_input_size;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga2e3bccc42a3a46073533da3004481836" name="ga2e3bccc42a3a46073533da3004481836"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2e3bccc42a3a46073533da3004481836">&#9670;&#160;</a></span>USBD_CDCn_NCM_Start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_Start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when USB Host changes data interface from alternate 0 to alternate 1 (activates data interface) </p>
<p>The function <b>USBD_CDCn_NCM_Start</b> is called when the USB Host activates the data interface.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga2e3bccc42a3a46073533da3004481836" title="Callback function called when USB Host changes data interface from alternate 0 to alternate 1 (activa...">USBD_CDCn_NCM_Start</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Add code for data interface activation</span></div>
<div class="line">  osSignalSet(Connection_ThreadId, 1U);</div>
<div class="line">  osSignalSet(DataIN_ThreadId, 1U);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga0fb025fb3475315f54f5a76375006927" name="ga0fb025fb3475315f54f5a76375006927"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0fb025fb3475315f54f5a76375006927">&#9670;&#160;</a></span>USBD_CDCn_NCM_Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_Stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called when USB Host changes data interface from alternate 1 to alternate 0 (de-activates data interface) </p>
<p>The function <b>USBD_CDCn_NCM_Stop</b> is called when the USB Host de-activates the data interface.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga0fb025fb3475315f54f5a76375006927" title="Callback function called when USB Host changes data interface from alternate 1 to alternate 0 (de-act...">USBD_CDCn_NCM_Stop</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Add code for data interface de-activation</span></div>
<div class="line">  <span class="comment">// Explained in ncm10.pdf document from www.usb.org in paragraph 7.2</span></div>
<div class="line"> </div>
<div class="line">  FrameIN_Size = 0U;</div>
<div class="line"> </div>
<div class="line">  memset(&amp;NCM_State, 0, <span class="keyword">sizeof</span>(NCM_State));</div>
<div class="line">  NCM_State.ntb_input_size = USBD_CDCn_NCM_DW_NTB_IN_MAX_SIZE;</div>
<div class="line">  NCM_State.max_datagram_size = USBD_CDCn_NCM_W_MAX_SEGMENT_SIZE;</div>
<div class="line"><span class="preprocessor">#if ((USBD_CDCn_NCM_BM_NETWORK_CAPABILITIES &amp; 0x02) != 0)</span></div>
<div class="line">  memcpy(NCM_State.net_address, &amp;MacAddress, 6);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">  NCM_State.packet_filter_bitmap = 0x0CU;</div>
<div class="line"> </div>
<div class="line">  PacketFilter = ARM_ETH_MAC_ADDRESS_BROADCAST;</div>
<div class="line"> </div>
<div class="line">  (void)EthMac-&gt;SetMacAddress(&amp;MacAddress);</div>
<div class="line">  (void)EthMac-&gt;SetAddressFilter(NULL, 0);</div>
<div class="line">  (void)EthMac-&gt;Control(ARM_ETH_MAC_CONFIGURE,</div>
<div class="line">                       (uint32_t)(LinkInfo.speed                           ) |</div>
<div class="line">                       (uint32_t)(LinkInfo.duplex &lt;&lt; ARM_ETH_MAC_DUPLEX_Pos) |</div>
<div class="line">                        PacketFilter);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga83368d843269eaee8e5852ce835291f0" name="ga83368d843269eaee8e5852ce835291f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga83368d843269eaee8e5852ce835291f0">&#9670;&#160;</a></span>USBD_CDCn_NCM_Uninitialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_CDCn_NCM_Uninitialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function called during USBD_Uninitialize to de-initialize the USB CDC class instance (NCM) </p>
<p>The function <b>USBD_CDCn_NCM_Uninitialize</b> de-initializes/releases the hardware resources of the network device. It is called during <a class="el" href="group__usbd__coreFunctions__api.html#gabefe6dae72a49806a96b981c286d0aeb">USBD_Uninitialize</a>. If <a class="el" href="group__usbd__cdcFunctions__ncm__api.html#ga5fd4c61b058d7478855d2eea82c03dab">USBD_CDCn_NCM_Initialize</a> has been adapted to the application, <b>USBD_CDCn_NCM_Uninitialize</b> should release resources and should de-initialize peripherals.</p>
<p><b>Code Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="group__usbd__cdcFunctions__ncm__api.html#ga83368d843269eaee8e5852ce835291f0" title="Callback function called during USBD_Uninitialize to de-initialize the USB CDC class instance (NCM)">USBD_CDCn_NCM_Uninitialize</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="comment">// Add code for de-initialization</span></div>
<div class="line">  osThreadTerminate(Connection_ThreadId);</div>
<div class="line">  osThreadTerminate(DataIN_ThreadId);</div>
<div class="line">  osThreadTerminate(DataOUT_ThreadId);</div>
<div class="line"> </div>
<div class="line">  EthPhy-&gt;PowerControl(ARM_POWER_OFF);</div>
<div class="line">  EthPhy-&gt;Uninitialize();</div>
<div class="line"> </div>
<div class="line">  EthMac-&gt;PowerControl(ARM_POWER_OFF);</div>
<div class="line">  EthMac-&gt;Uninitialize();</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
