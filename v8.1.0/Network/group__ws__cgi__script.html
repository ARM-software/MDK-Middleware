<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Network Component: Common Gateway Interface (CGI)</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="armkeil_white_h.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "Network Component");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<script type="text/javascript">
  writeSubComponentTabs.call(this);
</script>
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__ws__cgi__script.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Common Gateway Interface (CGI)<div class="ingroups"><a class="el" href="group__netServices.html">Services</a> &raquo; <a class="el" href="group__netHTTP__Func.html">HTTP Server</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Functions reacting on CGI requests to the HTTP server.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7d01432d1adc6a5a0e21eacd82d55910" id="r_ga7d01432d1adc6a5a0e21eacd82d55910"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga7d01432d1adc6a5a0e21eacd82d55910">netCGI_ProcessQuery</a> (const char *qstr)</td></tr>
<tr class="memdesc:ga7d01432d1adc6a5a0e21eacd82d55910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process query string received by GET or POST request. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:ga7d01432d1adc6a5a0e21eacd82d55910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa3ddab948908d6fd4926fe3a3da06e9" id="r_gafa3ddab948908d6fd4926fe3a3da06e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafa3ddab948908d6fd4926fe3a3da06e9">netCGI_ProcessData</a> (uint8_t code, const char *data, uint32_t len)</td></tr>
<tr class="memdesc:gafa3ddab948908d6fd4926fe3a3da06e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process data received by POST request. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:gafa3ddab948908d6fd4926fe3a3da06e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5203e3a1a0f95a8b76fb83bec73e4be8" id="r_ga5203e3a1a0f95a8b76fb83bec73e4be8"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5203e3a1a0f95a8b76fb83bec73e4be8">netCGI_Script</a> (const char *env, char *buf, uint32_t buf_len, uint32_t *pcgi)</td></tr>
<tr class="memdesc:ga5203e3a1a0f95a8b76fb83bec73e4be8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate dynamic web data based on a CGI script. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:ga5203e3a1a0f95a8b76fb83bec73e4be8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb9935d40a5c109bf7a6713607c0cba5" id="r_gafb9935d40a5c109bf7a6713607c0cba5"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafb9935d40a5c109bf7a6713607c0cba5">netCGI_GetEnvVar</a> (const char *env, char *ansi, uint32_t max_len)</td></tr>
<tr class="memdesc:gafb9935d40a5c109bf7a6713607c0cba5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process environment variables and convert to ANSI format. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:gafb9935d40a5c109bf7a6713607c0cba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca2c1f80c78009bacb5e0339aa8071c5" id="r_gaca2c1f80c78009bacb5e0339aa8071c5"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaca2c1f80c78009bacb5e0339aa8071c5">netCGI_Charset</a> (void)</td></tr>
<tr class="memdesc:gaca2c1f80c78009bacb5e0339aa8071c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override default character encoding in HTML documents. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:gaca2c1f80c78009bacb5e0339aa8071c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacab375c8f4d2516a1774c2dc37207eaa" id="r_gacab375c8f4d2516a1774c2dc37207eaa"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gacab375c8f4d2516a1774c2dc37207eaa">netCGI_ContentType</a> (const char *file_ext)</td></tr>
<tr class="memdesc:gacab375c8f4d2516a1774c2dc37207eaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add custom MIME type for unsupported file types. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:gacab375c8f4d2516a1774c2dc37207eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafb9307f1dd4b12d983f16d625398e947" id="r_gafb9307f1dd4b12d983f16d625398e947"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafb9307f1dd4b12d983f16d625398e947">netCGI_CustomHeader</a> (void)</td></tr>
<tr class="memdesc:gafb9307f1dd4b12d983f16d625398e947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add custom HTTP response header. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:gafb9307f1dd4b12d983f16d625398e947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace265307f1623ce6dab87b051d2add0e" id="r_gace265307f1623ce6dab87b051d2add0e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gace265307f1623ce6dab87b051d2add0e">netCGI_Redirect</a> (const char *file_name)</td></tr>
<tr class="memdesc:gace265307f1623ce6dab87b051d2add0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redirect resource URL address to a new location. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:gace265307f1623ce6dab87b051d2add0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2b39f1422582b2299888ae59a9f921d" id="r_gac2b39f1422582b2299888ae59a9f921d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac2b39f1422582b2299888ae59a9f921d">netCGI_ProcessRequest</a> (const char *method, const char *uri, const char *header, uint32_t header_len)</td></tr>
<tr class="memdesc:gac2b39f1422582b2299888ae59a9f921d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process HTTP request. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:gac2b39f1422582b2299888ae59a9f921d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga268f450867fc795e89a977a0693f5f47" id="r_ga268f450867fc795e89a977a0693f5f47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga268f450867fc795e89a977a0693f5f47">netCGI_ProcessCookie</a> (const char *method, const char *uri, const char *cookie, uint32_t cookie_len)</td></tr>
<tr class="memdesc:ga268f450867fc795e89a977a0693f5f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process HTTP cookie. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:ga268f450867fc795e89a977a0693f5f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13852252f460a0b6c28def972849ce2e" id="r_ga13852252f460a0b6c28def972849ce2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga13852252f460a0b6c28def972849ce2e">netCGI_SetCookie</a> (const char *cookie)</td></tr>
<tr class="memdesc:ga13852252f460a0b6c28def972849ce2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set HTTP cookie to send to the client. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <br /></td></tr>
<tr class="separator:ga13852252f460a0b6c28def972849ce2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a0d3e003286f2a90cd661a767e998c9" id="r_ga6a0d3e003286f2a90cd661a767e998c9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6a0d3e003286f2a90cd661a767e998c9">netCGX_ContentType</a> (void)</td></tr>
<tr class="memdesc:ga6a0d3e003286f2a90cd661a767e998c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override default Content-Type for CGX script files. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>].  <br /></td></tr>
<tr class="separator:ga6a0d3e003286f2a90cd661a767e998c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Functions reacting on CGI requests to the HTTP server. </p>
<p>To process a query string that was received by a <b>GET</b> request, the function <a class="el" href="#ga7d01432d1adc6a5a0e21eacd82d55910">netCGI_ProcessQuery</a> is used while serving a <b>POST</b> request is done with <a class="el" href="#gafa3ddab948908d6fd4926fe3a3da06e9">netCGI_ProcessData</a>. The function <a class="el" href="#ga5203e3a1a0f95a8b76fb83bec73e4be8">netCGI_Script</a> generates a HTML web page based on CGI scripting. Processing and conversion of environment variables is done using <a class="el" href="#gafb9935d40a5c109bf7a6713607c0cba5">netCGI_GetEnvVar</a>, while the preferred character set (language) of a browser can be retrieved with <a class="el" href="#gaca2c1f80c78009bacb5e0339aa8071c5">netCGI_Charset</a>.</p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaca2c1f80c78009bacb5e0339aa8071c5" name="gaca2c1f80c78009bacb5e0339aa8071c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca2c1f80c78009bacb5e0339aa8071c5">&#9670;&#160;</a></span>netCGI_Charset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * netCGI_Charset </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Override default character encoding in HTML documents. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to user defined character set type.</dd></dl>
<p>The function <b>netCGI_Charset</b> overrides the default character encoding in a web browser. If this function is implemented and returns a non-<span class="XML-Token">NULL</span> pointer, the web server adds a character encoding HTTP header. The browser then uses this information to correctly decode the character set.</p>
<p>If this function is not existing (or returns <span class="XML-Token">NULL</span>), then the 'charset' parameter is not generated in web server's response. The browser then uses the default character encoding. This might cause troubles in displaying web pages that are encoded in different character sets. Example: an English user might not see the umlaut characters on German web pages.</p>
<p>The <b>netCGI_Charset</b> function is in the <b>HTTP_Server_CGI.c</b> module. The prototype is defined in <a class="el" href="rl__net_8h.html">rl_net.h</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="#gaca2c1f80c78009bacb5e0339aa8071c5" title="Override default character encoding in HTML documents. [user-provided].">netCGI_Charset</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> (<span class="stringliteral">&quot;utf-8&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gacab375c8f4d2516a1774c2dc37207eaa" name="gacab375c8f4d2516a1774c2dc37207eaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacab375c8f4d2516a1774c2dc37207eaa">&#9670;&#160;</a></span>netCGI_ContentType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * netCGI_ContentType </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>file_ext</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add custom MIME type for unsupported file types. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file_ext</td><td>filename extension, a null-terminated string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MIME type information:<ul>
<li>pointer to user defined Content-Type.</li>
<li>NULL for unknown type.</li>
</ul>
</dd></dl>
<p>The function <b>netCGI_ContentType</b> allows you to add new MIME types for the Content-Type HTTP header in the response to the web service application requests. The function returns a pointer to the Content-Type HTTP header. You can use this function to add new file types to the Network Component library.</p>
<p>The argument <em class="arg">file_ext</em> specifies the file extension of a requested file, which is not supported in Network Component library.</p>
<p>The default content type for unsupported file types is: </p><div class="fragment"><div class="line">Content-Type: application/octet-stream\r\n</div>
</div><!-- fragment --><p> This header is used if the file type is not supported in Web server and <b>netCGI_ContentType</b> function does not exist in the project or if it returns a <span class="XML-Token">NULL</span> pointer.</p>
<p>The <b>netCGI_ContentType</b> function is in the <b>HTTP_Server_CGI.c</b> module. The prototype is defined in <a class="el" href="rl__net_8h.html">rl_net.h</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional. If missing, or returning <span class="XML-Token">NULL</span>, a default content type is used for unsupported file types.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="#gacab375c8f4d2516a1774c2dc37207eaa" title="Add custom MIME type for unsupported file types. [user-provided].">netCGI_ContentType</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *file_ext) {</div>
<div class="line">  <span class="comment">// Example</span></div>
<div class="line">  <span class="keywordflow">if</span> (strcmp (file_ext, <span class="stringliteral">&quot;wav&quot;</span>) == 0) {</div>
<div class="line">    <span class="keywordflow">return</span> (<span class="stringliteral">&quot;audio/wav&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (NULL);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gafb9307f1dd4b12d983f16d625398e947" name="gafb9307f1dd4b12d983f16d625398e947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb9307f1dd4b12d983f16d625398e947">&#9670;&#160;</a></span>netCGI_CustomHeader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * netCGI_CustomHeader </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add custom HTTP response header. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to user defined HTTP header.</dd></dl>
<p>The function <b>netCGI_CustomHeader</b> allows you to add custom HTTP headers to web server response. If this function is implemented and returns a non-<span class="XML-Token">NULL</span> pointer, the web server adds custom HTTP headers. The function returns a pointer to one or more custom HTTP headers. Each header must be terminated with the "\r\n".</p>
<p>With this function you can implement HTTP security headers to prevent web server vulnerabilities.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional. If missing, or returning <span class="XML-Token">NULL</span>, no custom HTTP header is added.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="#gafb9307f1dd4b12d983f16d625398e947" title="Add custom HTTP response header. [user-provided].">netCGI_CustomHeader</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> (<span class="stringliteral">&quot;Strict-Transport-Security: max-age=31536000; includeSubDomains\r\n&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gafb9935d40a5c109bf7a6713607c0cba5" name="gafb9935d40a5c109bf7a6713607c0cba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafb9935d40a5c109bf7a6713607c0cba5">&#9670;&#160;</a></span>netCGI_GetEnvVar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * netCGI_GetEnvVar </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>ansi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>max_len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process environment variables and convert to ANSI format. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>pointer to environment variables. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ansi</td><td>output buffer to write converted variable to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>maximum length of environment variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status information:<ul>
<li>pointer to the remaining environment variables to process.</li>
<li>NULL if there are no more environment variables to process.</li>
</ul>
</dd></dl>
<p>The function <b>netCGI_GetEnvVar</b> processes the string <em class="arg">env</em>, which contains the environment variables, and identifies where the first variable ends. The function obtains and stores the first variable and its value in the buffer pointed by <em class="arg">ansi</em>, in ANSI format.</p>
<p>The argument <em class="arg">max_len</em> specifies the maximum length that can be stored in the <em class="arg">ansi</em> buffer. If the decoded environment variable value is longer than this limit, then the function truncates it to <em class="arg">max_len</em> to fit it into the buffer.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The function can process environment variables from the GET and POST methods.</li>
<li>You can call this function from the <b>HTTP_Server_CGI.c</b> module.</li>
<li>The web browser uses environment variables to return user-entered information that is requested in the HTTP input form.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> (see <a class="el" href="#ga7d01432d1adc6a5a0e21eacd82d55910">netCGI_ProcessQuery</a>) </p>

</div>
</div>
<a id="ga268f450867fc795e89a977a0693f5f47" name="ga268f450867fc795e89a977a0693f5f47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga268f450867fc795e89a977a0693f5f47">&#9670;&#160;</a></span>netCGI_ProcessCookie()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void netCGI_ProcessCookie </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>uri</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>cookie</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>cookie_len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process HTTP cookie. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>requested http method, a null-terminated string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uri</td><td>resource identifier, a null-terminated string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cookie</td><td>http request cookie. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cookie_len</td><td>length of http request cookie.</td></tr>
  </table>
  </dd>
</dl>
<p>The function <b>netCGI_ProcessCookie</b> allows you to access HTTP cookies received in an HTTP request. The function is called when received an HTTP request and before opening the resource file. You can use this function to process session cookies provided by a the WEB browser.</p>
<p>The argument <em class="arg">method</em> specifies the HTTP request method used in the request, such as: GET, POST, HEADER, and so on. The <em class="arg">method</em> is a pointer to the <span class="XML-Token">null</span>-terminated string.</p>
<p>The argument <em class="arg">uri</em> specifies the HTTP request path, which is a pointer to a <span class="XML-Token">null</span>-terminated string. Arguments are not included. The path is pre-processed and all percent encoded characters are already decoded before the function is called.</p>
<p>The argument <em class="arg">cookie</em> is a pointer to HTTP cookie header contained in the request. The cookie header may contain more than one cookie. Cookies are separated by a semicolon.</p>
<p>The argument <em class="arg">cookie_len</em> specifies the length of the HTTP cookie header.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="#ga268f450867fc795e89a977a0693f5f47" title="Process HTTP cookie. [user-provided].">netCGI_ProcessCookie</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *method, <span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <span class="keyword">const</span> <span class="keywordtype">char</span> *cookie, uint32_t cookie_len) {</div>
<div class="line">  <span class="keywordflow">if</span> (strcmp(cookie, <span class="stringliteral">&quot;sessionid=x4aPh6w35t&quot;</span>) == 0) {</div>
<div class="line">    <span class="comment">// Cookie name:  sessionid</span></div>
<div class="line">    <span class="comment">// Cookie value: x4aPh6w35t</span></div>
<div class="line">    cookie_valid = 1;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (strcmp(uri, <span class="stringliteral">&quot;network.cgi&quot;</span>) == 0) {</div>
<div class="line">    <span class="comment">// Name of resource requested</span></div>
<div class="line">  }</div>
<div class="line">   ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gafa3ddab948908d6fd4926fe3a3da06e9" name="gafa3ddab948908d6fd4926fe3a3da06e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa3ddab948908d6fd4926fe3a3da06e9">&#9670;&#160;</a></span>netCGI_ProcessData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void netCGI_ProcessData </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>code</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process data received by POST request. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>callback context:<ul>
<li>0 = www-url-encoded form data.</li>
<li>1 = filename for file upload (null-terminated string).</li>
<li>2 = file upload raw data.</li>
<li>3 = end of file upload (file close requested).</li>
<li>4 = any other type of POST data (single or last stream).</li>
<li>5 = the same as 4, but with more data to follow. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>pointer to POST data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of POST data.</td></tr>
  </table>
  </dd>
</dl>
<p>The function <b>netCGI_ProcessData</b> processes the data returned from the POST method of the <a class="el" href="group__ws__script__langugage.html">CGI</a> form. The HTTP server calls this function when a user clicks the SUBMIT button of an input form.</p>
<p>The argument <em class="arg">code</em> can have the following types:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Code   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Meaning of *data   </th><th class="markdownTableHeadNone">Meaning of len    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">Form data   </td><td class="markdownTableBodyNone">Pointer to data string returned from the POST method   </td><td class="markdownTableBodyNone">Length of data string    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">Filename   </td><td class="markdownTableBodyNone">Pointer to a Filename for the HTTP file upload. Filename is a <span class="XML-Token">null</span>-terminated string.   </td><td class="markdownTableBodyNone">Length of a filename    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">File data   </td><td class="markdownTableBodyNone">Pointer to data packet received from the host   </td><td class="markdownTableBodyNone">Length of data packet    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">End of file   </td><td class="markdownTableBodyNone"><span class="XML-Token">NULL</span>   </td><td class="markdownTableBodyNone">Don't care    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">Other data   </td><td class="markdownTableBodyNone">Pointer to data string returned from the POST method. A single packet or last packet in data stream   </td><td class="markdownTableBodyNone">Length of data string    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">Other data   </td><td class="markdownTableBodyNone">Pointer to data string returned from the POST method. The same as under 4, but with more data to follow   </td><td class="markdownTableBodyNone">Length of data string   </td></tr>
</table>
<p>The argument <em class="arg">data</em> point to the data that get processed.</p>
<p>The argument <em class="arg">len</em> is the data length in bytes.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The HTTP server calls the function only if the input form (HTML source) is created with the attribute METHOD=POST. For example: <div class="fragment"><div class="line">&lt;FORM ACTION=index.htm METHOD=POST NAME=CGI&gt;</div>
<div class="line">..</div>
<div class="line">&lt;/FORM&gt;</div>
</div><!-- fragment --></li>
<li>Web browsers provide a filename for HTTP file upload with a path included. It is the user's responsibility to remove the path information from the filename.</li>
<li>For large files, file data is received in several small packets. The size of data packet depends on the TCP Maximum Segment Size (MSS). This value is typically <span class="XML-Token">1440</span> bytes.</li>
<li>The XML-POST is generated from the web service application.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> </p>
<p>The following example is available in the user code template file <b>HTTP_Server_CGI.c</b>. Customize it to the application's needs.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="#gafa3ddab948908d6fd4926fe3a3da06e9" title="Process data received by POST request. [user-provided].">netCGI_ProcessData</a> (uint8_t code, <span class="keyword">const</span> <span class="keywordtype">char</span> *data, uint32_t len) {</div>
<div class="line">  <span class="keywordtype">char</span> var[40];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (code) {</div>
<div class="line">    <span class="keywordflow">case</span> 0:</div>
<div class="line">      <span class="comment">// Url encoded form data received</span></div>
<div class="line">      <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">// Parse all parameters</span></div>
<div class="line">        data = <a class="code hl_function" href="#gafb9935d40a5c109bf7a6713607c0cba5" title="Process environment variables and convert to ANSI format. [thread-safe].">netCGI_GetEnvVar</a> (data, var, <span class="keyword">sizeof</span> (var));</div>
<div class="line">        <span class="keywordflow">if</span> (var[0] != 0) {</div>
<div class="line">          <span class="comment">// First character is non-null, string exists</span></div>
<div class="line">          <span class="keywordflow">if</span> (strcmp (var, <span class="stringliteral">&quot;led0=on&quot;</span>) == 0) {</div>
<div class="line">            <span class="comment">// ... Switch LED 0 on</span></div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      } <span class="keywordflow">while</span> (data);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> 1:</div>
<div class="line">      <span class="comment">// Filename for file upload received</span></div>
<div class="line">      <span class="keywordflow">if</span> (data[0] != 0) {</div>
<div class="line">        <span class="comment">// Open a file for writing</span></div>
<div class="line">        file = fopen (var, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> 2:</div>
<div class="line">      <span class="comment">// File content data received</span></div>
<div class="line">      <span class="keywordflow">if</span> (file != NULL) {</div>
<div class="line">        <span class="comment">// Write data to a file</span></div>
<div class="line">        fwrite (data, 1, len, file);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> 3:</div>
<div class="line">      <span class="comment">// File upload finished</span></div>
<div class="line">      <span class="keywordflow">if</span> (file != NULL) {</div>
<div class="line">        <span class="comment">// Close a file</span></div>
<div class="line">        fclose (file);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> 4:</div>
<div class="line">      <span class="comment">// Other content type data, last packet</span></div>
<div class="line">      <span class="keywordflow">if</span> (strcmp (<a class="code hl_function" href="group__ws__user__api.html#ga1fcc3ecb0e9e7338056171b2ecb03058" title="Get Content-Type HTML header, received in XML post request. [thread-safe].">netHTTPs_GetContentType</a>(), <span class="stringliteral">&quot;text/xml; charset=utf-8&quot;</span>) == 0) {</div>
<div class="line">        <span class="comment">// Content type xml, utf-8 encoding</span></div>
<div class="line">         ...</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> 5:</div>
<div class="line">      <span class="comment">// Other content type data, more to follow</span></div>
<div class="line">      <span class="comment">// ... Process data</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="comment">// Ignore all other codes</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga7d01432d1adc6a5a0e21eacd82d55910" name="ga7d01432d1adc6a5a0e21eacd82d55910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d01432d1adc6a5a0e21eacd82d55910">&#9670;&#160;</a></span>netCGI_ProcessQuery()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void netCGI_ProcessQuery </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>qstr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process query string received by GET or POST request. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">qstr</td><td>pointer to the query string.</td></tr>
  </table>
  </dd>
</dl>
<p>The function <b>netCGI_ProcessQuery</b> processes the environment variable QUERY_STRING returned by the method GET or by the method POST of the <a class="el" href="group__ws__script__langugage.html">CGI</a> form. The HTTP server calls this function when a user clicks the SUBMIT button on the input form. The function is not called if no URL query string arguments are specified.</p>
<p>The argument <em class="arg">qstr</em> points to the QUERY_STRING that is encoded in the URL of the request. The query string is terminated by a space character.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The function is called by the HTTP server if the input form (HTML source) is created with the METHOD=GET attribute. For example: <div class="fragment"><div class="line">&lt;FORM ACTION=index.htm METHOD=GET NAME=CGI&gt;</div>
<div class="line">..</div>
<div class="line">&lt;/FORM&gt;</div>
</div><!-- fragment --></li>
<li>The function is also called if the input form is created with the METHOD=POST attribute and a query string argument is specified in the form's ACTION. For example: <div class="fragment"><div class="line">&lt;FORM ACTION=service.htm?cmd=frw METHOD=POST NAME=CGI&gt;</div>
<div class="line">..</div>
<div class="line">&lt;/FORM&gt;</div>
</div><!-- fragment --></li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> </p>
<p>The following example is available in the user code template file <b>HTTP_Server_CGI.c</b>. Customize it to the application's needs.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="#ga7d01432d1adc6a5a0e21eacd82d55910" title="Process query string received by GET or POST request. [user-provided].">netCGI_ProcessQuery</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *qstr) {</div>
<div class="line">  <span class="keywordtype">char</span> var[40];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">do</span> {</div>
<div class="line">    <span class="comment">// Loop through all the parameters</span></div>
<div class="line">    qstr = <a class="code hl_function" href="#gafb9935d40a5c109bf7a6713607c0cba5" title="Process environment variables and convert to ANSI format. [thread-safe].">netCGI_GetEnvVar</a> (qstr, var, <span class="keyword">sizeof</span> (var));</div>
<div class="line">    <span class="comment">// Check return string, &#39;qstr&#39; now points to the next parameter</span></div>
<div class="line">    <span class="keywordflow">if</span> (var[0] != 0) {</div>
<div class="line">      <span class="comment">// First character is non-null, string exists</span></div>
<div class="line">      <span class="comment">// Example of a parameter &quot;ip=fe80::1c30:6cff:fea2:455e&quot;</span></div>
<div class="line">      <span class="keywordflow">if</span> (strncmp (var, <span class="stringliteral">&quot;ip=&quot;</span>, 3) == 0) {</div>
<div class="line">        uint8_t ip_addr[<a class="code hl_define" href="rl__net_8h.html#afc2dd6f6b5b737eae868a756d38ed846" title="IPv6 Address Length in bytes.">NET_ADDR_IP6_LEN</a>];</div>
<div class="line">        <span class="comment">// Read parameter IP address submitted by the browser</span></div>
<div class="line">        <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga39518491393bd2b4c6f32df03768b6b8" title="Convert IP address from text to binary form. [thread-safe].">netIP_aton</a> (&amp;var[3], <a class="code hl_define" href="rl__net_8h.html#a5af8b5fa13b653a73d397cabe75ca4bb" title="IPv6 Address.">NET_ADDR_IP6</a>, ip_addr);</div>
<div class="line">         ...</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">while</span> (qstr);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gac2b39f1422582b2299888ae59a9f921d" name="gac2b39f1422582b2299888ae59a9f921d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2b39f1422582b2299888ae59a9f921d">&#9670;&#160;</a></span>netCGI_ProcessRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void netCGI_ProcessRequest </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>method</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>uri</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>header</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>header_len</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process HTTP request. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">method</td><td>requested http method, a null-terminated string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uri</td><td>resource identifier, a null-terminated string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">header</td><td>http request header. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">header_len</td><td>length of http request header.</td></tr>
  </table>
  </dd>
</dl>
<p>The function <b>netCGI_ProcessRequest</b> allows you to access HTTP request parameters. The function is called when an HTTP request is received and before the resource file is opened. You can use this function to extend the existing functionality of the HTTP server with additional options.</p>
<p>The argument <em class="arg">method</em> specifies the HTTP request method used in the request, such as: GET, POST, HEADER, and so on. The <em class="arg">method</em> is a pointer to the <span class="XML-Token">null</span>-terminated string.</p>
<p>The argument <em class="arg">uri</em> specifies the HTTP request path, which is a pointer to a <span class="XML-Token">null</span>-terminated string. Arguments are not included. The path is pre-processed and all percent encoded characters are already decoded before the function is called.</p>
<p>The argument <em class="arg">header</em> is a pointer to HTTP headers contained in the request.</p>
<p>The argument <em class="arg">header_len</em> specifies the length of the HTTP request headers.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="#gac2b39f1422582b2299888ae59a9f921d" title="Process HTTP request. [user-provided].">netCGI_ProcessRequest</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *method, <span class="keyword">const</span> <span class="keywordtype">char</span> *uri, <span class="keyword">const</span> <span class="keywordtype">char</span> *header, uint32_t header_len) {</div>
<div class="line">  <span class="keywordflow">if</span> (strcmp(method, <span class="stringliteral">&quot;GET&quot;</span>) == 0) {</div>
<div class="line">    <span class="comment">// GET method is used</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (strcmp(uri, <span class="stringliteral">&quot;network.cgi&quot;</span>) == 0) {</div>
<div class="line">    <span class="comment">// Name of resource requested</span></div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Further process HTTP headers, terminated with &quot;\r\n&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="gace265307f1623ce6dab87b051d2add0e" name="gace265307f1623ce6dab87b051d2add0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace265307f1623ce6dab87b051d2add0e">&#9670;&#160;</a></span>netCGI_Redirect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * netCGI_Redirect </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>file_name</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Redirect resource URL address to a new location. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">file_name</td><td>resource filename, a null-terminated string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>URL redirection information:<ul>
<li>pointer to user defined Location.</li>
<li>NULL for no URL address redirection.</li>
</ul>
</dd></dl>
<p>The function <b>netCGI_Redirect</b> allows you to redirect URL address of a missing resource to a new location. The function returns a pointer to the Location HTML header. Web server calls this function, if the requested resource is not found on the server.</p>
<p>When <b>netCGI_Redirect</b> function returns valid URL location, Web server returns <b>301 Moved Permanently</b> error code with HTML header containing a new location in the response to the web service application request.</p>
<p>The argument <em class="arg">file_name</em> specifies the full path name of a requested resource.</p>
<p>The <b>netCGI_ContentType</b> function is in the <b>HTTP_Server_CGI.c</b> module. The prototype is defined in <a class="el" href="rl__net_8h.html">rl_net.h</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional. If missing, or returning <span class="XML-Token">NULL</span>, server returns <b>404 Not Found</b> to the client on file not found error.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="#gace265307f1623ce6dab87b051d2add0e" title="Redirect resource URL address to a new location. [user-provided].">netCGI_Redirect</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *file_name) {</div>
<div class="line">  <span class="keywordflow">if</span> (strcmp (file_name, <span class="stringliteral">&quot;lxi/identification&quot;</span>) == 0) {</div>
<div class="line">    <span class="keywordflow">return</span> (<span class="stringliteral">&quot;/lxi_identification.cgx&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (NULL);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga5203e3a1a0f95a8b76fb83bec73e4be8" name="ga5203e3a1a0f95a8b76fb83bec73e4be8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5203e3a1a0f95a8b76fb83bec73e4be8">&#9670;&#160;</a></span>netCGI_Script()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t netCGI_Script </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>env</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>buf_len</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>pcgi</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate dynamic web data based on a CGI script. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">env</td><td>environment string. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>output data buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf_len</td><td>size of output buffer (from 536 to 1440 bytes). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pcgi</td><td>pointer to a session's local buffer of 4 bytes.<ul>
<li>1st call = cleared to 0.</li>
<li>2nd call = not altered by the system.</li>
<li>3rd call = not altered by the system, etc. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes written to output buffer.<ul>
<li>return len | (1U&lt;&lt;31) = repeat flag, the system calls this function again for the same script line.</li>
<li>return len | (1U&lt;&lt;30) = force transmit flag, the system transmits current packet immediately.</li>
</ul>
</dd></dl>
<p>The function <b>netCGI_Script</b> is what the <a class="el" href="group__ws__script__langugage.html">script interpreter</a> calls when interpreting the script to output the dynamic part of the HTTP response. The script interpreter calls <b>netCGI_Script</b> for each line in the script that begins with the command c. You must customize the <b>netCGI_Script</b> function so that it can understand and use the input string from the script.</p>
<p>The argument <em class="arg">env</em> is a pointer to the input string to create the dynamic response. It is the same string of bytes that is specified in the CGI script code using the c command.</p>
<p>The argument <em class="arg">buf</em> is a pointer to the output buffer where the <b>netCGI_Script</b> function must write the HTTP response.</p>
<p>The argument <em class="arg">buf_len</em> specifies the length of the output buffer in bytes.</p>
<p>The argument <em class="arg">pcgi</em> is a pointer to a variable that never gets altered by the HTTP Server. Hence, you can use it to store parameters for successive calls of the <b>netCGI_Script</b> function. You might use this to store:</p><ul>
<li>loop counters</li>
<li>number of sent bytes</li>
<li>pointer to a local status buffer.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The contents written into the output buffer by the <b>netCGI_Script</b> function must be HTML code.</li>
<li><em class="arg">c</em> is a command that is available in the scripting language of the Network Component.</li>
<li>The length of the output buffer (<em class="arg">buf_len</em>) might vary, because the length is determined by the TCP socket Maximum Segment Size (MSS) negotiation. The buffer length is normally around 1400 bytes for local LAN. But this can be reduced to 500 bytes or less. It also varies because the HTTP Server tries to optimize the number of generated TCP packets. It calls this function again to use the complete available buffer. It stops when there are only 240 or less bytes free in the buffer. This causes the packet to be generated and transmitted. If you want to force the HTTP Server to transmit the packet, you need to <code>or</code> the return value from this function with 1U&lt;&lt;30.</li>
<li>If <b>netCGI_Script</b> writes more bytes than <em class="arg">buf_len</em> into the output buffer, a system crash from a corruption of the memory link pointers is highly likely.</li>
<li>The input string <em class="arg">env</em> might contain single-character subcommands to tell the <b>netCGI_Script</b> function how to process the script line correctly. There are no rules for these subcommands, so you can create and use your own commands.</li>
<li>The argument <em class="arg">pcgi</em> is private to each HTTP Session. The HTTP Server clears the data in the pcgi pointer to 0, before <b>netCGI_Script</b> is called for the first time in each session.</li>
<li><b>netCGI_Script</b> must update the contents in <em class="arg">pcgi</em> for each call. You can use the 4 bytes in <em class="arg">pcgi</em> to store data in any format.</li>
</ul>
</dd></dl>
<p><b>Code</b> <b>Example</b> </p>
<p>The following example is available in the user code template file <b>HTTP_Server_CGI.c</b>. Customize it to the application's needs.</p>
<div class="fragment"><div class="line">uint32_t <a class="code hl_function" href="#ga5203e3a1a0f95a8b76fb83bec73e4be8" title="Generate dynamic web data based on a CGI script. [user-provided].">netCGI_Script</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> *env, <span class="keywordtype">char</span> *buf, uint32_t buf_len, uint32_t *pcgi) {</div>
<div class="line">  uint32_t len = 0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Analyze a &#39;c&#39; script line starting position 2</span></div>
<div class="line">  <span class="comment">// c a i &lt;td&gt;&lt;input type=text name=ip value=&quot;%s&quot; size=40 maxlength=40&gt;&lt;/td&gt;</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">char</span> ip_ascii[40];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (env[0]) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span> :</div>
<div class="line">      <span class="keywordflow">switch</span> (env[2]) {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:</div>
<div class="line">          <span class="comment">// Write the local IP address</span></div>
<div class="line">          <a class="code hl_function" href="group__netGen__AddrConvFunc.html#ga546c7611025489af14f2b37dbda445c2" title="Convert IP address from binary to text form. [thread-safe].">netIP_ntoa</a> (<a class="code hl_define" href="rl__net_8h.html#a5af8b5fa13b653a73d397cabe75ca4bb" title="IPv6 Address.">NET_ADDR_IP6</a>, IpAddr, ip_ascii, <span class="keyword">sizeof</span>(ip_ascii));</div>
<div class="line">          len = sprintf (buf, &amp;env[4], ip_ascii);</div>
<div class="line">          <span class="keywordflow">break</span>;</div>
<div class="line">           ..</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (len);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga13852252f460a0b6c28def972849ce2e" name="ga13852252f460a0b6c28def972849ce2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13852252f460a0b6c28def972849ce2e">&#9670;&#160;</a></span>netCGI_SetCookie()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netCGI_SetCookie </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>cookie</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set HTTP cookie to send to the client. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cookie</td><td>cookie definition, a null-terminated string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netCGI_SetCookie</b> sets the cookie that shall be returned to the client. The cookie is composed of the <b>cookie_name</b> and <b>cookie_value</b>.</p>
<p>The argument <em class="arg">cookie</em> is a pointer to a cookie that needs to be set, which is a <span class="XML-Token">null</span>-terminated string. The function copies the contents of the <em class="arg">cookie</em> to the internal memory. If more than one cookie needs to be set, you can call the function several times to set all the required cookies.</p>
<p>You enable the processing of cookies by specifying the <a class="el" href="#ga268f450867fc795e89a977a0693f5f47">netCGI_ProcessCookie</a> function in the code. If the function is not available, cookies are automatically disabled on the web server.</p>
<p>Possible <a class="el" href="group__netStatusErrorCodes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p><ul>
<li><em>netOK:</em> Cookie successfully set.</li>
<li><em>netInvalidParameter:</em> Invalid <em class="arg">cookie</em> provided.</li>
<li><em>netError:</em> Cookies not enabled or no memory available for the cookie.</li>
<li><em>netWrongState:</em> Function called from an invalid context, not from a CGI callback function.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>When the function ends, the content of <em class="arg">cookie</em> becomes irrelevant and may be discarded.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="#gafa3ddab948908d6fd4926fe3a3da06e9" title="Process data received by POST request. [user-provided].">netCGI_ProcessData</a> (uint8_t code, <span class="keyword">const</span> <span class="keywordtype">char</span> *data, uint32_t len) {</div>
<div class="line">  <span class="keywordflow">if</span> (cookie_valid == 0)</div>
<div class="line">    <span class="comment">// The cookie not received from the browser, set it</span></div>
<div class="line">    <a class="code hl_function" href="#ga13852252f460a0b6c28def972849ce2e" title="Set HTTP cookie to send to the client. [thread-safe].">netCGI_SetCookie</a> (<span class="stringliteral">&quot;sessionid=x4aPh6w35t&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">   ..</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a id="ga6a0d3e003286f2a90cd661a767e998c9" name="ga6a0d3e003286f2a90cd661a767e998c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a0d3e003286f2a90cd661a767e998c9">&#9670;&#160;</a></span>netCGX_ContentType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char * netCGX_ContentType </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Override default Content-Type for CGX script files. [<a class="el" href="group__function__categories.html#user-provided">user-provided</a>]. </p>
<dl class="section return"><dt>Returns</dt><dd>pointer to user defined Content-Type.</dd></dl>
<p>The function <b>netCGX_ContentType</b> allows you to change the Content-Type HTML header in the response to the web service application requests. The function returns a pointer to the new Content-Type HTML header. You can use this function to override the default content type header from the Network Component library. This content type header is used in cgx script responses.</p>
<p>The default content type header in cgx script response is: </p><div class="fragment"><div class="line">Content-Type: text/xml\r\n</div>
</div><!-- fragment --><p> This header is used if the <b>netCGX_ContentType</b> function does not exist in the project or if it returns a <span class="XML-Token">NULL</span> pointer.</p>
<p>The <b>netCGX_ContentType</b> function is in the <b>HTTP_Server_CGI.c</b> module. The prototype is defined in <a class="el" href="rl__net_8h.html">rl_net.h</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is optional. If missing, or returning <span class="XML-Token">NULL</span>, a default "text/xml" content type is used.</dd></dl>
<p><b>Code</b> <b>Example</b> </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="#ga6a0d3e003286f2a90cd661a767e998c9" title="Override default Content-Type for CGX script files. [user-provided].">netCGX_ContentType</a> (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keywordflow">return</span> (<span class="stringliteral">&quot;text/xml; charset=utf-8&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
