# HTTPS Server {#HTTPS_Server_Example}

This example implements an HTTPS Server on a device that can be accessed from a computer connected to the same network.

The HTTPS server uses the ARM mbed TLS software component to enable \ref secure_communication.

The example uses a fixed set of web pages stored in ROM, but is capable of exchanging information with the underlying hardware by using the CGI interface.

The following picture shows an exemplary connection of the development board and a Computer.

![HTTPS server hardware setup](cws_setup.png)

## Project Organization

The HTTPS Server project is available as part of the \ref examples "Network Reference examples".

<h2>Application Source Files</h2>

Following files implement application-specific logic in the example:

 - `HTTPS_Server.c` contains the application main thread which initializes the Network Component.
 - `HTTPS_Server_CGI.c` defines the functions for the scripting language for communication with the hardware.
 - `./Web/` directory contains all the HTML and CGI files that will be compiled into the `Web.c` file. The files in this group determine the actual layout of the web page and the behaviour of the different refs using CGI.
 - `Web.c` is a compiled file that will be generated by the \ref nw_sw_util_fcarm tool from all the web input files.

You can add the following optional files, which are not included in the project by default:

 - `HTTP_Server_Multiuser.c` is used for specifying multiple users and access rights for these users.
 - `HTTP_Server_Access.c` enables the server to accept or block connection requests from certain remote clients.
 - `HTTP_Server_Error.c` contains the information that the web server is showing in case of errors (such as Error 404).

<h2>Software Components Configuration Files</h2>

Configuration files for the software components used in the project are available in the `./RTE/` directory and can be modified by users to adjust the operation of related components.

Following configuration files are provided with this example:

 - For the Network component, in `./RTE/Network/` folder:
   - `Net_Config_HTTP_Server.h`: \ref ws_configuration "HTTP Server configuration"
   - `Net_Config_TCP.h`: \ref using_network_sockets_tcp_conf "TCP Socket configuration"
   - `Net_Config_UDP.h`: \ref using_network_sockets_udp_conf "UDP Socket configuration"
   - `Net_Config_ETH_0.h`: \ref using_ethernet_interfaces_conf "Ethernet Interface configuration"
   - `Net_Config.h`: \ref nw_Network_Core "Network Core configuration"
   - `Net_Security.c`: file with keys and certificates. Default values are used by default, for changing them refer to \ref cert_creation
   - `Net_Debug.h`: \ref netDebugConfig "Network Debug configuration"
 - For mbedTLS component, in `./RTE/Security/` folder:
   - `mbedTLS_config.h`, `mbedTLS_crypto_config.h`: [mbedTLS configuration files](https://github.com/ARM-software/CMSIS-mbedTLS).
 - For the CMSIS components, in the `./RTE/CMSIS/` folder:
   - `RTX_Config.h` and `RTX_Config.c`: [CMSIS-RTX Configuration files](https://arm-software.github.io/CMSIS-RTX/latest/config_rtx5.html) for the RTOS Kernel

When a board layer is added to the project, corresponding configuration files for the board and device components will become available in the local `./Board/` directory.

<h2>Board Layer</h2>

In order to build the project it shall be extended with a compatible board layer that provides following interfaces as [connections](https://github.com/Open-CMSIS-Pack/cmsis-toolbox/blob/main/docs/ReferenceApplications.md#connections):
 - `CMSIS_ETH`: CMSIS-Driver for Ethernet interface
 - `CMSIS_VIO`: CMSIS-Driver for Virtual I/O interface
 - `STDOUT`: Standard Output redirection

## Build the Project

[Working with MDK-Middleware Examples](../General/working_with_examples.html) explains the workflow for accessing, configuring and building an MDK-Middleware example project for your target hardware.

 -# Open the **Network** MDK-Middleware reference example.
 -# Make sure the compatible board layer is configured.
 -# Select **HTTPS_Server** as an active project for the build process.
 -# Build the project and observe that no errors are reported.

## Run the Example

**Setup**

Board-specific hardware setup such as jumpers, Ethernet ports, power supply, etc. is documented in the board layer description (`README.md`) of your selected target.

 -# Load the executable image to the target development board.
 -# Use an Ethernet cable to connect your development board to the local area network. The PC is assumed to be already in this LAN.

**Example execution**

The web server can be tested on any PC using any browser available.

In the browser URL area type the address to the local host name for the server that is defined in the `Net_Config.h` file. The default name is **my_host**, and for this case type `https://my_host` as the URL. If you have a DCHP server in your network, you will be automatically connected.

To log in to the server use *admin* for the user name and no password (you can change the defaults in the `Net_Config_HTTP_Server.h` file). The following (or a similar) page will come up in your browser:

![HTTPS server web page](cws_frontpage_s.png)

If you get an error message, please verify that all network, IP and other settings are correct.
